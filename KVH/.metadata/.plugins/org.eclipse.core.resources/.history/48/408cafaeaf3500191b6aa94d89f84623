<aura:component controller="LTE_devices_mfg">
  <aura:attribute name="searchString" type="string" Description="This is the search attribute, the root Part Number of an Asset Hierarchy" />
  <aura:attribute name="foundTemplate" type="Object[]" Description="These are the members of the Template" />
  <aura:attribute name="lteDevices" type="LTE_devices_mfg" Description="This is returned from the Server Side controller" />
  <aura:attribute name="state" type="string" Description="This is the state of the component" default="INIT"/>
  <aura:attribute name="disableSearch" type="Boolean" Description="This controls the state of the Search Button" default="false" />
  <aura:attribute name="disableCreate" type="Boolean" Description="This controls the state of the Create Assets Button" default="false" />
  <!-- DEPRECATED -->
  <aura:attribute name="assetsCreated" type="Asset[]" Description="This is the Asset Hierarchy created by the component" />

  <!-- event publishers -->
  <aura:registerEvent name="assetHierarchyTemplateSearch" type="c:LTE_Devices_component_evt" />

  <!-- event listeners -->
  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:handler name="assetHierarchyTemplateSearch" event="c:LTE_Devices_component_evt" action="{!c.handleCmpEvent}" />

  <form class="slds-form--horizontal">

    <div aura:id="search_div">
      <p class="slds-m-around--small">
        <div class="slds-form-element slds-is-required">
          <label class="slds-form-element__label" for="root">System Part Number</label>
          <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--right">
            <ui:inputText aura:id="root" class="slds-input" value="{!v.searchString}" 
                          required="true" placeholder="Enter System Part Number">
              <lightning:icon iconName="utility:search" size="x-small" 
                              alternativeText="Initiate Search Function" />
            </ui:inputText>
          </div>
        </div>
      </p>
      <input type="text" style="display:none;"/> <!-- kind of a hack, inhibits enter key from scanner -->
      <p class="slds-m-around--small">
        <div class="slds-form-element">
          <lightning:button variant="brand" label="Reset" aura:id="reset_but"
                            iconName="utility:refresh" iconPosition="left" 
                            onclick="{! c.handleReset }" />
          <lightning:button variant="brand" label="Search" aura:id="search_but"
                            iconName="utility:search" iconPosition="left" 
                            disabled="{!v.disableSearch}" 
                            onclick="{! c.handleLookup }" />
        </div>
      </p>
    </div>

    <div aura:id="input_div">
      <div style="width: 100%; height: 7px; background: #F87431; overflow: hidden;" />
      <aura:iteration items="{!v.foundTemplate}" var="template">
        <p class="slds-m-around--small">
          <div class="slds-form-element slds-is-required">
            <label class="slds-form-element__label">
              {!template.partNumber}&nbsp;{!template.description} Serial Number
            </label>
            <div class="slds-form-element__control">
              <ui:inputText placeholder="Enter Serial Number...."
                            value="{!template.name}"
                            class="slds-input"
                            required="true" />
            </div>
          </div>
        </p>
      </aura:iteration>
      <p class="slds-m-around--small">
        <div class="slds-form-element">
          <lightning:button variant="brand" label="Create Assets" 
                            iconName="utility:add" iconPosition="left" 
                            disabled="{!v.disableCreate}" 
                            onclick="{! c.createSFAssets }" />
        </div>
      </p>
    </div>
    <div aura:id="spinner_div" style="position: static; z-index: 9002;" >
      <lightning:spinner variant="brand" size="medium" alternativeText="Calling Server..."/>
    </div>
  </form>

</aura:component>