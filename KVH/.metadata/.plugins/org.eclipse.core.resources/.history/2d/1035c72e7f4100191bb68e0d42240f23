<apex:page controller="Contract_Details_Controller" sidebar="false" docType="html-5.0" showHeader="false" standardStyleSheets="false">
    <!-- <!doctype html> -->
    <html> 
        <head>
            <meta charset="utf-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            <title>Online Activation Order - Contract Details</title>
            <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js">
            </script>
            <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js">
            </script>
            <script src="https://use.fontawesome.com/0633ed32ab.js">
            </script>
            <link href="https://use.fontawesome.com/0633ed32ab.css" media="all" rel="stylesheet"/>
            <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
            <link href="{!URLFOR($Resource.ActivationOrders, 'www/css/reset.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.ActivationOrders, 'www/css/styles.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.ActivationOrders, 'www/assets/tabs/css/style.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVH_tabs)}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.ActivationOrders, 'www/assets/remodal/jquery.remodal.css')}" rel="stylesheet"/>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">
            </script>
            <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
            <!-- Handle jQuery conflicts (e.g. "$") -->
            <script type="text/javascript">
            var j$ = jQuery.noConflict();
            </script>
            <!-- Load jQuery plug-ins, use minimized libs -->
            <!-- Library for Modal windows.... -->
            <script src="{!URLFOR($Resource.ActivationOrders, 'www/assets/remodal/jquery.remodal.min.js')}" type="text/javascript"></script>
            <!-- Library for jQuery Validator... -->
                <script src="{!URLFOR($Resource.jquery_validation, 'dist/jquery.validate.js')}" type="text/javascript"></script>
            <!--Action Status Resources-->
            <apex:includeScript value="{!$Resource.ActivationStatusJS}"/>
            
            <script>
            var validator;
            j$( document ).ready(function() {
                validator = j$("[id$='theForm']").validate({ignore: ":disabled"});
                
                if(j$("input[type=radio][name=contractTerm]").length>0){
                    j$("input[type=radio][name=contractTerm]").each(function(){
                        j$(this).rules("add",{
                            required: true,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                if(j$("input[type=radio][name=OperationsDatacontractTerm]").length>0){
                    j$("input[type=radio][name=OperationsDatacontractTerm]").each(function(){
                        j$(this).rules("add",{
                            required: true,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                
                if(j$("input[type=radio][name=EntertainmentcontractTerm]").length>0){
                    j$("input[type=radio][name=EntertainmentcontractTerm]").each(function(){
                        j$(this).rules("add",{
                            required: true,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                
                if(j$("#othermonths_Text_other").length>0){
                    j$("#othermonths_Text_other").rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                } 
                
                if(j$("#enter_othermonths_Text_other").length>0){
                    j$("#enter_othermonths_Text_other").rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                } 
                
                if(j$("#leasedmonths_Text_leased").length>0){
                    j$("#leasedmonths_Text_leased").rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                } 
                
                if(j$("#enter_leasedmonths_Text_leased").length>0){
                    j$("#leasedmonths_Text_leased").rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                } 
                
                if(j$('[id$=ServiceStartDate]').length>0){
                    j$('[id$=ServiceStartDate]').rules("add",{
                        required: true,
                        // date: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                
                j$( '[id$=ServiceStartDate]' ).datepicker({
                    dateFormat: 'yy-M-dd', minDate: 0,
                    onSelect: function (date) {
                        var date2 = j$('[id$=ServiceStartDate]').datepicker('getDate');
                        var date3 = j$('[id$=ServiceStartDate]').datepicker('getDate');
                        var date4 = date2.setDate(date2.getDate() - 5);
                        var date5 = date3.setDate(date3.getDate());
                        j$('[id$=qServicePreActivationDate]').datepicker('option', 'minDate', date2);
                        j$('[id$=qServicePreActivationDate]').datepicker('option', 'maxDate', date3);
                    }
                }).attr('readonly', 'true').
                keypress(function(event){
                    if(event.keyCode == 8){
                        event.preventDefault();
                    }
                });

            if(j$('[id$=qServicePreActivationDate]').length>0){
                    j$('[id$=qServicePreActivationDate]').rules("add",{
                        required: false,
                        // date: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                
                j$( '[id$=qServicePreActivationDate]' ).datepicker({
                    dateFormat: 'yy-M-dd'
                }).attr('readonly', 'true').
                keypress(function(event){
                    if(event.keyCode == 8){
                        event.preventDefault();
                    }
                });
            });
            
            
            <!-- script to show error message area -Start -->
                function currenttabtoshowerror(){
                    var errordiv= "<div class='error-box' id='globalErrorBOX' style='display:none !important'>"; 
                    errordiv += "<h1><img src='/resource/cautionImage' height='20' width='20' />";
                    errordiv += "Please correct the errors indicated below and try again. </h1> <ul class='bullets'></ul> </div>";
                    return errordiv;
                }
            <!-- script to show error message area -End -->
                
                
                /* To remove duplidate popup window initialized -Start */
                function removeduplicatepopup(popupID){
                    while(j$(popupID).length >1){
                        j$(popupID).last().remove();
                    }
                    while(j$('.remodal-wrapper').find(popupID).length >1){
                        j$('.remodal-wrapper').find(popupID).last().remove();
                    }
                }
            /* To remove duplidate popup window initialized -End */
            
            /* Generic popup window -Start */
            var options = {hashTracking: false, closeOnOutsideClick: false,closeOnEscape: false};
            function showgenericpopup(msg){
                var setcontent = msg;
                removeduplicatepopup('[data-remodal-id=servicesinfo]');
                var instmodel = j$('[data-remodal-id=servicesinfo]').remodal(options);
                j$("#kvh-remodelcontentmessageservicesinfo").html(setcontent);
                instmodel.open();
                j$('[data-remodal-id=servicesinfo]').find('.remodal-close').hide();
                j$('[data-remodal-id=servicesinfo]').css('width', '15%').css('padding', '20px 20px').find('div:first').css('width', '100%');
            }
            /* Generic popup window -End */
            
            function validateContractDetails(param, param1){
                var Isvalid ;
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty(); 
                j$(currentcomp).find("[id$='leasedmonths_Text_leased']").removeClass('error');
                j$(currentcomp).find("[id$='enter_leasedmonths_Text_leased']").removeClass('error');
                j$(currentcomp).find("[id$='othermonths_Text_other']").removeClass('error');
                j$(currentcomp).find("[id$='enter_othermonths_Text_other']").removeClass('error');
                
                if(j$(currentcomp).find("input[type='radio'][name='contractTerm']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='contractTerm']").valid();
                    else
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='contractTerm']").valid() && Isvalid;
                }
                if(j$(currentcomp).find("input[type='radio'][name='EntertainmentcontractTerm']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='EntertainmentcontractTerm']").valid();
                    else
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='EntertainmentcontractTerm']").valid() && Isvalid;
                }
                if(j$(currentcomp).find("input[type='radio'][name='OperationsDatacontractTerm']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='OperationsDatacontractTerm']").valid();
                    else
                        Isvalid = j$(currentcomp).find("input[type='radio'][name='OperationsDatacontractTerm']").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id='leasedmonths_Text_leased']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id='leasedmonths_Text_other']").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id='leasedmonths_Text_leased']").valid() && Isvalid;
                    if(parseInt(j$(currentcomp).find("[id='leasedmonths_Text_leased']:enabled").val()) <=0)
                        Isvalid = false;
                } 
                if(j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']").valid() && Isvalid;
                    if(parseInt(j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']:enabled").val()) <=0 || parseInt(j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']:enabled").val()) > parseInt(j$(currentcomp).find("[id='leasedmonths_Text_leased']").val()))
                        Isvalid = false;
                }
                if(j$(currentcomp).find("[id='othermonths_Text_other']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id='othermonths_Text_other']").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id='othermonths_Text_other']").valid() && Isvalid;
                    if(parseInt(j$(currentcomp).find("[id='othermonths_Text_other']:enabled").val()) <=12 || parseInt(j$(currentcomp).find("[id='othermonths_Text_other']:enabled").val()) == 24)
                        Isvalid = false;
                }
                if(j$(currentcomp).find("[id='enter_othermonths_Text_other']").length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id='enter_othermonths_Text_other']").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id='enter_othermonths_Text_other']").valid() && Isvalid;
                    if(parseInt(j$(currentcomp).find("[id='enter_othermonths_Text_other']:enabled").val()) <=12 || parseInt(j$(currentcomp).find("[id='enter_othermonths_Text_other']:enabled").val()) == 24)
                        Isvalid = false;
                }
                if(j$(currentcomp).find('[id$=ServiceStartDate]').length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find('[id$=ServiceStartDate]').valid();
                    else
                        Isvalid = j$(currentcomp).find('[id$=ServiceStartDate]').valid() && Isvalid;
                }
                if(j$(currentcomp).find('[id$=qServicePreActivationDate]').length >0){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find('[id$=qServicePreActivationDate]').valid();
                    else
                        Isvalid = j$(currentcomp).find('[id$=qServicePreActivationDate]').valid() && Isvalid;
                }
                
                if(j$(currentcomp).find('[id$=ServiceStartDate]').length >0 && j$(currentcomp).find('[id$=qServicePreActivationDate]').length >0){
                    var date2 = j$('[id$=ServiceStartDate]').datepicker('getDate');
                    var date3 = j$('[id$=qServicePreActivationDate]').datepicker('getDate');
                    if(Isvalid && date3 != null){
                        if(date3.getDate() >= (date2.getDate() - 5) && (date3.getDate() <= date2.getDate())){
                            Isvalid = true && Isvalid; 
                        }else{
                            Isvalid = false && Isvalid; 
                        }
                    }
                }
                if(Isvalid){
                    var passedvalcontractTerm;
                    var passedvalOperationsDatacontractTerm;
                    var passedvalEntertainmentcontractTerm;
                    j$("input[type=radio][name=contractTerm]").each(function(){
                        if(j$(this).is(':checked')){
                            passedvalcontractTerm = j$(this).parent().find('.passedval').val();
                            
                        }
                    }); 
                    j$("input[type=radio][name=OperationsDatacontractTerm]").each(function(){
                        if(j$(this).is(':checked')){
                            passedvalOperationsDatacontractTerm = j$(this).parent().find('.passedval').val();
                        }
                    });
                    j$("input[type=radio][name=EntertainmentcontractTerm]").each(function(){
                        if(j$(this).is(':checked')){
                            passedvalEntertainmentcontractTerm = j$(this).parent().find('.passedval').val();
                        }
                    });
                    if(param1){
                        showLoadingDiv(); 
                        updateContractServiceRecord(passedvalcontractTerm,passedvalOperationsDatacontractTerm, passedvalEntertainmentcontractTerm);
                    }else{
                        updateContractServiceRecordsaveexit(passedvalcontractTerm,passedvalOperationsDatacontractTerm, passedvalEntertainmentcontractTerm);
                    }
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    if(j$(currentcomp).find('input[type=radio][name=contractTerm]').hasClass("error") && (j$(currentcomp).find("input[type=radio][name=contractTerm]").valid() == false)){
                        html += "<li>Airtime Services Term Required</li>";
                    }
                    if(j$(currentcomp).find('input[type=radio][name=EntertainmentcontractTerm]').hasClass("error") && (j$(currentcomp).find("input[type=radio][name=EntertainmentcontractTerm]").valid() == false)){
                        html += "<li>Entertainment and Training Package Term Required</li>";
                    }
                    
                    if(j$(currentcomp).find('input[type=radio][name=OperationsDatacontractTerm]').hasClass("error") && (j$(currentcomp).find("input[type=radio][name=OperationsDatacontractTerm]").valid() == false)){
                        html += "<li>Operations Data Services Term Required</li>";
                    }
                    if(j$(currentcomp).find('[id=leasedmonths_Text_leased]').hasClass("error") && (j$(currentcomp).find("[id=leasedmonths_Text_leased]").valid() == false)){
                        html += "<li>Enter Airtime Services contract term for leased hardware.</li>";
                    }
                    if(parseInt(j$(currentcomp).find("[id='leasedmonths_Text_leased']:enabled").val()) <=0){
                        html += "<li>Airtime Services Contract term for leased hardware must be greater than 0.</li>";
                    }
                    
                    if(j$(currentcomp).find('[id=enter_leasedmonths_Text_leased]').hasClass("error") && (j$(currentcomp).find("[id=enter_leasedmonths_Text_leased]").valid() == false)){
                        html += "<li>Enter Entertainment, News, Sports, and Training Package contract term for leased hardware.</li>";
                    }
                    if(parseInt(j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']:enabled").val()) <=0 || parseInt(j$(currentcomp).find("[id='enter_leasedmonths_Text_leased']:enabled").val()) > parseInt(j$(currentcomp).find("[id='leasedmonths_Text_leased']").val())){
                        html += "<li>Entertainment and Training Package Contract term for leased hardware must be greater than 0 and NOT greater than the Contract Term.</li>";
                    }
                    
                    if(j$(currentcomp).find('[id=othermonths_Text_other]').hasClass("error") && (j$(currentcomp).find("[id=othermonths_Text_other]").valid() == false)){
                        html += "<li>Enter Airtime Services contract term greater than 12 months, or select either the 12- or 24-month contract term option.</li>";
                    }
                    if(parseInt(j$(currentcomp).find("[id='othermonths_Text_other']:enabled").val()) <=12 || parseInt(j$(currentcomp).find("[id='othermonths_Text_other']:enabled").val()) == 24){
                        html += "<li>Enter Airtime Services contract term greater than 12 months, or select either the 12- or 24-month contract term option.</li>";
                    }
                    
                    if(j$(currentcomp).find('[id=enter_othermonths_Text_other]').hasClass("error") && (j$(currentcomp).find("[id=enter_othermonths_Text_other]").valid() == false)){
                        html += "<li>Enter Entertainment, News, Sports, and Training Package contract term greater than 12 months, or select either the 12- or 24-month contract term option.</li>";
                    }
                    if(parseInt(j$(currentcomp).find("[id='enter_othermonths_Text_other']:enabled").val()) <=12 || parseInt(j$(currentcomp).find("[id='enter_othermonths_Text_other']:enabled").val()) == 24){
                        html += "<li>Enter Entertainment, News, Sports, and Training Package contract term greater than 12 months, or select either the 12- or 24-month contract term option.</li>";
                    }
                    
                    if(j$(currentcomp).find('[id$=ServiceStartDate]').hasClass("error") && (j$(currentcomp).find('[id$=ServiceStartDate]').valid() == false)){
                        html += "<li>Service Start Date Required.</li>";
                    } 
                    else if(j$(currentcomp).find('[id$=qServicePreActivationDate]').hasClass("error") && (j$(currentcomp).find('[id$=qServicePreActivationDate]').valid() == false)){
                        html += "<li>Pre-Activation Date Required.</li>";
                    }
                    else if(j$(currentcomp).find('[id$=ServiceStartDate]').length >0 && j$(currentcomp).find('[id$=qServicePreActivationDate]').length >0){
                        var date2 = j$('[id$=ServiceStartDate]').datepicker('getDate');
                        var date3 = j$('[id$=qServicePreActivationDate]').datepicker('getDate');
                        if(date3.getDate() >= (date2.getDate() - 5) && (date3.getDate() <= date2.getDate())){
                        }else{
                            html += "<li>Pre-Activation Date should be no more than 5 days from the requested Service Start Date</li>";
                        }
                    }
                    
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
            
            
            j$(function (){
                var boolcheck = true; 
                j$("input[type=radio][name=contractTerm]").each(function(){
                    var passedval = j$(this).parent().find('.passedval').val();
                    if('{!objActivationOrder.Hardware_Purchased_or_Leased__c}' == 'Leased'){
                        if('{!objActivationOrder.Lease_Term__c}' == '' || '{!objActivationOrder.Lease_Term__c}' == '0' || '{!objActivationOrder.Lease_Term__c}' == '0.00'){
                            j$(this).attr('checked','checked'); 
                            j$(this).parent().find('.passedval').addClass("requiredRedMarkFld").val('{!objActivationOrder.Contract_Term__c}');
                        }else{
                            j$(this).parent().find('.passedval').attr('disabled', 'disabled').val('{!objActivationOrder.Contract_Term__c}');
                            j$(this).attr('checked','checked').attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;'); 
                        }
                    } 
                    if('{!objActivationOrder.Hardware_Purchased_or_Leased__c}' == 'Purchased'){
                        // console.log('555'+'{!objActivationOrder.Contract_Term__c}');
                        j$(this).parent().find('.passedval').attr('disabled', 'disabled');
                        if('{!objActivationOrder.Contract_Term__c}' != ''){
                            if(passedval == '{!objActivationOrder.Contract_Term__c}'){
                                j$(this).attr('checked','checked'); //.attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                                boolcheck = false;
                            }
                            if(boolcheck && (passedval == null || passedval == '')){
                                j$(this).parent().find('.passedval').removeAttr('disabled').addClass("requiredRedMarkFld").val('{!objActivationOrder.Contract_Term__c}');
                                j$(this).attr('checked','checked'); //.attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                                boolcheck = false;
                            }
                        }
                        if({!boolIridiumDisableEdit}){
                            j$(this).attr('disabled', 'disabled'); 
                        }
                    }
                });
                
                var boolcheckenter = true; 
                j$("input[type=radio][name=EntertainmentcontractTerm]").each(function(){
                    var passedval = j$(this).parent().find('.passedval').val();
                    if('{!objActivationOrder.Hardware_Purchased_or_Leased__c}' == 'Leased'){
                        /*    if('{!objActivationOrder.Lease_Term__c}' == '' || '{!objActivationOrder.Lease_Term__c}' == '0' || '{!objActivationOrder.Lease_Term__c}' == '0.00'){
                            j$(this).attr('checked','checked'); 
                            j$(this).parent().find('.passedval').addClass("requiredRedMarkFld").val('{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}');
                        }else{
                            j$(this).parent().find('.passedval').attr('disabled', 'disabled').val('{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}');
                            j$(this).attr('checked','checked').attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;'); 
                        }*/
                        j$(this).attr('checked','checked'); 
                        j$(this).parent().find('.passedval').addClass("requiredRedMarkFld").val('{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}');
                    } 
                    if('{!objActivationOrder.Hardware_Purchased_or_Leased__c}' == 'Purchased'){
                        j$(this).parent().find('.passedval').attr('disabled', 'disabled');
                        if('{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}' != ''){
                            if(passedval == '{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}'){
                                j$(this).attr('checked','checked'); //.attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                                boolcheckenter = false;
                            }
                            if(boolcheckenter && (passedval == null || passedval == '')){
                                j$(this).parent().find('.passedval').removeAttr('disabled').addClass("requiredRedMarkFld").val('{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}');
                                j$(this).attr('checked','checked'); //.attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                                boolcheckenter = false;
                            }
                        }
                    }
                });
                
                j$("input[type=radio][name=OperationsDatacontractTerm]").each(function(){
                    var passedval = j$(this).parent().find('.passedval').val();
                    if('{!objActivationOrder.Operation_Data_Services_Term__c}' != ''){
                        if(passedval == '{!objActivationOrder.Operation_Data_Services_Term__c}'){
                            j$(this).attr('checked','checked');
                        }
                    }
                });
                j$("input[type=radio][name=OperationsDatacontractTerm]").click(function (){
                    j$('.kvh-show-errormsg-here').empty();
                });  
                
                j$("input[type=radio][name=contractTerm]").click(function (){
                    j$('.kvh-show-errormsg-here').empty();
                    j$(this).closest(".panel1").find("[id$='months_Text_leased']").next('label.error').remove();
                    j$(this).closest(".panel1").find("[id$='months_Text_leased']").removeClass('error');
                    j$(this).closest(".panel1").find("[id$='months_Text_other']").next('label.error').remove();
                    j$(this).closest(".panel1").find("[id$='months_Text_other']").removeClass('error');
                    var value = j$(this).val();
                    j$(this).closest(".panel1").find("input[type=number]")
                    .addClass('kvh-disabledcss').removeClass("requiredRedMarkFld").attr("disabled", "disabled")                     
                    .end().find("." + value)
                    .removeAttr("disabled").removeClass('kvh-disabledcss')        
                    .end();
                    j$(this).closest(".panel1").find("input[type=number].chkclear").val("") ;
                    j$(this).closest(".panel1").find("input[type=number].chkclear:enabled").addClass("requiredRedMarkFld");
                });
                
                j$("input[type=radio][name=EntertainmentcontractTerm]").click(function (){
                    j$('.kvh-show-errormsg-here').empty();
                    j$(this).closest(".panel1").find("[id$='months_Text_leased']").next('label.error').remove();
                    j$(this).closest(".panel1").find("[id$='months_Text_leased']").removeClass('error');
                    j$(this).closest(".panel1").find("[id$='months_Text_other']").next('label.error').remove();
                    j$(this).closest(".panel1").find("[id$='months_Text_other']").removeClass('error');
                    var value = j$(this).val();
                    j$(this).closest(".panel1").find("input[type=number]")
                    .addClass('kvh-disabledcss').removeClass("requiredRedMarkFld").attr("disabled", "disabled")                     
                    .end().find("." + value)
                    .removeAttr("disabled").removeClass('kvh-disabledcss')        
                    .end();
                    j$(this).closest(".panel1").find("input[type=number].chkclearenter").val("") ;
                    j$(this).closest(".panel1").find("input[type=number].chkclearenter:enabled").addClass("requiredRedMarkFld");
                });
            });
            
            j$('.hasTooltip').hover(function() {
                var offset = $(this).offset();
                j$(this).next('span').fadeIn(200).addClass('showTooltip');
                j$(this).next('span').css('left', offset.left + 'px');
            }, function() {
                j$(this).next('span').fadeOut(200);
            });
            
            function showgenericpopupSaveExit(width){
                j$( "#saveExit" ).popup( "open" );   
            }
            
            function returntohomepage(){
                window.top.location = '/home/home.jsp';
            }
            </script>
            <style>
                .panel{
                box-shadow: none;
                }
                #main {
                background: white;
                padding-left: 20%;
                }
                #main {
                float: left;
                width: 100%;
                }
                .loadingStatus {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                list-style: none;
                z-index: 9999;
                }
                
                .loadingStatus .img {
                width: 32px;
                margin: 0 auto;
                }
                
                .error-box
                { color:#cc0000;margin-bottom:20px; }
                
                .error-box h1
                { background:#cc0000; color:#fff !important; font-size:1em !important; padding:5px; margin-bottom:10px; font-weight:bold; }
                
                .error-box li
                { margin-left:0px; font-weight: bold; } 
                
                .loadingBox {
                display: none;
                background: #000000;
                opacity: 0.45;
                filter: alpha(opacity=45);
                position: fixed;
                top: 0px;
                left: 0px;
                min-width: 100%;
                min-height: 100%;
                z-index: 9999;
                }
                selecterror{
                border : 1px solid #fe6d55;
                box-shadow : 0 0 5px 0 rgba(255,178,157,0.75);
                }
                .requiredRedMarkFld{
                border-left:4px solid #cc0000 !important;
                padding-left: 4px !important;
                }
                .kvh-disabledcss{
                background-color: #f1f1f1 !important;
                }
                .requiredRedMarkFld{
                border-left:4px solid #cc0000 !important;
                padding-left: 4px !important;
                }
                
                .error{
                border-top: 1px solid #cc0000 !important;
                border-bottom: 1px solid #cc0000 !important;
                color: #cc0000 !important;
                }
                
                label.error{
                border-top: 0px solid #cc0000 !important;
                border-bottom: 0px solid #cc0000 !important;
                color: #cc0000 !important;
                }
                .error-box{ 
                border:1px solid #cc0000; 
                width:47%; 
                color:#cc0000; 
                border-radius:3px; 
                margin-bottom:20px; 
                }
                
                .error-box h1{ 
                background:#cc0000; 
                color:#fff !important; 
                font-size:1em !important; 
                padding:5px; 
                margin-bottom:10px; 
                font-weight:bold; 
                }
                
                .error-box li{ 
                margin-left:20px; 
                } 
                
                #display-error {
                width: 100%;
                margin-top: 10px;
                border: 1px solid #D8D8D8;
                padding: 5px;
                border-radius: 5px;
                font-family: Arial;
                font-size: 11px;
                text-transform: uppercase;
                background-color: red;
                color: white;
                text-align: center;
                }
                
                img.err {
                float: left; 
                }
                
                .bulletErrors {
                list-style-type: square !important;
                }
                .h2Class {
                font-size: 1.5em;
                font-weight: bold;
                color: black;
                }
                
                ul.rig.columns1 li {
                width: 29.5%;
                }
                
                ul.columns1 {
                text-align: center;
                }
                
                p.kvh-fontsmall{
                font-size: small !important;
                text-align: left !important;
                min-height: 125px !important;
                }
                
                .KVH-table {
                border: solid 1px #DDEEEE;
                border-spacing: 0;
                width: 100%;
                font-size: 90% !important;
                border-radius: 3px;
                border-collapse: separate;
                line-height: normal;
                }
                
                .KVH-tableplan tbody th {
                background-color: #DDEFEF;
                border: solid 1px #DDEEEE;
                color: #336B6B;
                padding: 10px;
                text-align: left;
                text-shadow: 1px 1px 1px #fff;
                background-color:#f3f3f3 !important
                }
                
                table.KVH-tableplan > thead > tr > th {
                text-align: center;
                }
                
                table.KVH-tableplan > tbody > tr > td {
                text-align: center;
                }
                table.KVH-tableplan > tbody > tr:last-child {
                font-weight:bold;
                }
                
                .KVH-table-horizontal tbody td {
                border-left: none;
                border-right: none;
                }
                
                #ck-button span:hover {
                background-color: #3ead00;
                font-weight: bold;
                color: #fff;
                }
                
                #ck-button input:checked + span {
                background-color: #3ead00;
                font-weight: bold;
                color: #fff;
                }
                
                input[name="Selected"] {
                background-color: #3ead00;
                font-weight: bold;
                color: #fff;
                }
                
                .collapse-p{
                font-size: 80%;
                width: 80%;
                font-weight: normal;
                white-space: normal;
                margin-top: 10px;
                font-family: DINPro-Regular, Arial !important;
                }
                
                .ui-collapsible-inset {
                margin: 0 0 30px 0;
                font-family: DIN Pro;
                }
                
                .button {
                color: #fff !important;
                padding: 7px 27px 8px;
                margin: 15px 0;
                text-align: center;
                text-decoration: none;
                font-weight: bold;
                display: -moz-inline-stack;
                display: inline-block;
                zoom: 1;
                _overflow: hidden;
                -webkit-border-radius: 3px;
                -moz-border-radius: 3px;
                border-radius: 3px;
                background: #6699cc;
                border: 0;
                text-shadow: none !important;
                }
                
                .pad-bottom {
                margin-bottom: 20px;
                }
                
                table.collapse-panels th.plan-type {
                text-align: left;
                vertical-align: top;
                background: transparent;
                }
                table.collapse-panels th {
                background: #f3f3f3;
                text-align: left;
                font-weight: bold;
                font-size: 100%;
                width: 200px;
                padding: 10px;
                }
                .scrolling td, th {
                padding: 10px;
                border-bottom: 1px solid #ddd;
                }
                table.collapse-panels {
                width: 100%;
                margin: 20px auto;
                border: 1px solid #ddd;
                -moz-border-radius: 3px;
                border-radius: 3px;
                border-collapse: separate;
                line-height: normal;
                }
                table.collapse-panels td.plan-name {
                background: #ecf5fc;
                }
                table.collapse-panels td {
                text-align: center;
                border-bottom: 1px solid #ddd;
                padding: 10px;
                }
                .added {
                background-color: #3ead00 !important;
                color: #fff !important;
                }
                .collapse-button {
                font-size: 80% !important;
                font-weight: normal !important;
                color: #444 !important;
                background: #fff;
                border: 1px solid #ddd;
                border-radius: 3px;
                font-family: DINPro-Regular, Arial !important;
                }
                
                div.selected {
                box-shadow: 0 0 7px #3ead00; 
                }
                .pad-right {
                margin-right: 20px;
                }
                .ui-popup {
                max-width: 70% !important;
                margin: auto !important;
                }
                .ui-popup {
                position: relative;
                }
                ul.terms {
                list-style-type: disc;
                }
                .pad-left {
                margin-left: 20px;
                }
                ol, ul {
                list-style: none;
                }
                
                .collapse-buttonstl {
                font-size: 80% !important;
                font-weight: normal !important;
                background: #fff;
                border: 1px solid #ddd;
                border-radius: 3px;
                font-family: DINPro-Regular, Arial !important;
                }
                .notes {
                font-style: italic;
                font-size: .875em;
                font-weight: normal;
                }
                
                .KVH-disabledclassComm{
                pointer-events: none;
                }
                
                .panel-contents {
                padding: 20px;
                width: 95%;
                margin: 0 auto;
                font-family: DINPro-Regular, Arial !important;
                }
                
                label {
                display: inline-block !important;
                font-size: 100% !important;
                font-weight: bold !important;
                }
                
                table.collapse-panels {
                width: 100%;
                margin: 20px auto;
                border: 1px solid #ddd;
                -moz-border-radius: 3px;
                border-radius: 3px;
                border-collapse: separate;
                line-height: normal;
                }
                
                table.collapse-panels th.plan-type {
                text-align: left;
                vertical-align: top;
                background: transparent;
                }
                table.collapse-panels th {
                background: #f3f3f3;
                text-align: left;
                font-weight: bold;
                font-size: 85%;
                color: #444;
                width: 200px;
                padding: 10px;
                }
                table.collapse-panels td.plan-name {
                background: #ecf5fc;
                }
                table.collapse-panels td {
                text-align: center;
                border-bottom: 1px solid #ddd;
                padding: 10px;
                }
                h3 {
                font-size: 1.3em;
                color: #7c7c7c;
                font-weight: bold;
                }
                h1, h2, h3, p {
                padding-bottom: 15px;
                line-height: normal;
                }
                h4 {
                font-size: 1em;
                font-family: DINPro-Bold;
                color: #30445b;
                }
                
                #main p {
                padding-bottom: 10px;
                }
                .notes {
                font-style: italic;
                font-size: .875em;
                font-weight: normal;
                }
                .commBoxparent, .commBoxchild{
                max-width : 150px;
                }
                ul.terms li {
                padding: 0 0 10px 5px;
                text-align: left;
                }
                hr {
                border: 0;
                height: 1px;
                border-bottom: 1px solid #c7c7c7;
                margin-bottom: 30px;
                }
                .pad-top {
                margin-top: 20px;
                }
                table.collapse-panels1 {
                width: 100%;
                margin: 20px auto;
                border: 1px solid #ddd;
                -moz-border-radius: 3px;
                border-radius: 3px;
                border-collapse: separate;
                line-height: normal;
                }
                table.collapse-panels1 th {
                background: #f3f3f3;
                text-align: left;
                font-weight: bold !important;
                color: #444;
                padding: 10px;
                border-bottom: 1px solid #ddd;
                }
                table.collapse-panels1 td {
                text-align: center;
                border-bottom: 1px solid #ddd;
                padding: 10px;
                }
                
                table.collapse-panels1 td.plan-name {
                background: #ecf5fc;
                }
                
                table.collapse-panels1 th.plan-type {
                text-align: left;
                vertical-align: top;
                background: transparent;
                }
                
                table.collapse-panels1 td.row-hdr {
                background: #ddd;
                text-align: left;
                padding: 3px 3px 3px 5px;
                font-size: 80%;
                text-transform: uppercase;
                font-weight: bold;
                color: #444;
                text-shadow: none;
                }
                td.text-left, th.text-left {
                text-align: left !important;
                }
                td.width-30, th.width-30 {
                width: 30%;
                }
            </style>
        </head>
        <body class="ui-mobile-viewport ui-overlay-a" style="zoom: 1;">
            <div data-role="page" style="overflow: hidden;"  tabindex="0" class="ui-page ui-page-theme-a ui-page-active">
                
                <!-- ** Form tag Start ** -->
                <apex:form id="theForm">
                    <div class="loadingStatus" id="loadingDiv">
                        <div class="">
                            <div class="img "><img src="/img/loading.gif"/></div>
                        </div>
                    </div>
                    <div id="loadingBox" class="loadingBox"></div>
                    
                    <!-- ** Top header Start **-->
                    
                    <c:Activation_Header />
                    <!-- ** Top header End **-->
                    
                    <!-- ** Sidebar Start **-->
                    <div id="sidebar">
                        <c:Activation_Status state="{!ActivationStatus}" pageOrderID="{!ActivationOrderId}"/> 
                    </div>
                    <!-- ** Sidebar End **-->
                    <apex:actionFunction name="updateContractServiceRecord" action="{!updateActivationOrderContract}" oncomplete="gototabselected();" reRender="wrapper">
                        <apex:param name="Contract_Term" assignTo="{!objActivationOrder.Contract_Term__c}" value="" />
                        <apex:param name="Operation_Contract_Term" assignTo="{!objActivationOrder.Operation_Data_Services_Term__c}" value="" />
                        <apex:param name="Entertainment_Contract_Term" assignTo="{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}" value="" />
                    </apex:actionFunction>
                    
                    <apex:actionFunction name="updateContractServiceRecordsave" action="{!updateActivationOrderContract}" oncomplete="returntohomepage();" reRender="wrapper">
                    </apex:actionFunction>
                    
                    <apex:actionFunction name="updateContractServiceRecordsaveexit" action="{!updateActivationOrderContract}" oncomplete="showgenericpopupSaveExit('80%');">
                        <apex:param name="Contract_Term" assignTo="{!objActivationOrder.Contract_Term__c}" value="" />
                        <apex:param name="Operation_Contract_Term" assignTo="{!objActivationOrder.Operation_Data_Services_Term__c}" value="" />
                        <apex:param name="Entertainment_Contract_Term" assignTo="{!objActivationOrder.Entertainment_News_Sports_Training_Term__c}" value="" />
                    </apex:actionFunction>
                    
                    <apex:actionFunction name="gototabselected" action="{!goToTab}" oncomplete="hideLoadingDiv();" reRender="wrapper">
                        <apex:param name="param3" assignTo="{!selectedTab}" value="Service_Summary" />
                    </apex:actionFunction>
                    
                    <div id="main">
                        <apex:outputPanel layout="block" id="wrapper" styleClass="wrapper">
                            <div class="required"><span class="requiredRedMarkFld"></span> = Required field</div>
                            <h1>Contract Details</h1>
                            <div class="panel clear" >
                                <apex:outputPanel rendered="{!(ActivationStatus.Contract_Details_Active_Tab__c == 'Contract_Details')}" id="Contract_Details" >
                                    <h2>Contract Terms</h2>
                                    <h3 style="float:left;">Airtime Services</h3>
                                    <a href="#suspension-terms" data-rel="popup" data-position-to="window" data-transition="fade" class="right ui-link" aria-haspopup="true" aria-owns="suspension-terms" aria-expanded="false"><i class="fa fa-plus fa-lg" aria-hidden="true"></i> View suspension terms</a>
                                    <!--** div contain error msg contents -Start **-->
                                    <div class="kvh-show-errormsg-here" style="clear: both;">
                                    </div>
                                    <!--** div contain error msg contents -End **-->
                                    <div class="panel1" >
                                        <apex:outputPanel rendered="{!objActivationOrder.Hardware_Purchased_or_Leased__c == 'Purchased'}">
                                            <table class="collapse-panels1">
                                                <tbody>
                                                    <tr>
                                                        <th>Term</th>
                                                        <th>Details</th>
                                                    </tr>
                                                    <tr>
                                                        <td class="width-30 text-left"> <input type="radio" style="cursor: pointer;" data-role="none" id="12_month_term" name="contractTerm" data-passkey="12" data-passparent="Purchased"  value="month_term_12" />
                                                            <label for="12_month_term" style="cursor: pointer;" data-role="none">12-month term</label>
                                                            <input id="12_month" maxlength="15" size="20" type="number" value="12" style="width:15%;display:none;" class="passedval month_term_12" data-role="none"/>
                                                        </td>
                                                        <td class="width-50 text-left">Minimum 12-month initial term is required,
                                                            <apex:outputPanel layout="none" rendered="{!IF(CONTAINS(UPPER(objActivationService.Activation_Rate_Plan__c), 'FLEX'), false, true)}">
                                                                suspension is not available during initial term
                                                            </apex:outputPanel>
                                                            <apex:outputPanel layout="none" rendered="{!IF(CONTAINS(UPPER(objActivationService.Activation_Rate_Plan__c), 'FLEX'), true, false)}">
                                                                no limits on suspensions
                                                            </apex:outputPanel>
                                                        </td>
                                                    </tr>
                                                    <apex:outputPanel layout="none" rendered="{!IF(CONTAINS(UPPER(objActivationService.Activation_Rate_Plan__c), 'FLEX'), false, true)}">
                                                        <tr>
                                                            <td class="text-left"><input type="radio" style="cursor: pointer;" data-role="none" id="24_month_term" name="contractTerm" data-passkey="24" data-passparent="Purchased" value="month_term_24" />
                                                                <label for="24_month_term" style="cursor: pointer;" data-role="none" >24-month term</label>
                                                                <input id="24_month" maxlength="15" size="20" type="number" value="24" style="width:15%;display:none;" class="passedval month_term_12" data-role="none"/>
                                                            </td>
                                                            <td class="text-left">Suspension is available for 1-month increments no more than 3 months every 12 months of service during initial term</td>
                                                        </tr>
                                                    </apex:outputPanel>
                                                    
                                                    <tr>
                                                        <td class="text-left"><input type="radio" style="cursor: pointer;float: left;" data-role="none" id="other_month_term" name="contractTerm" data-passkey="" data-passparent="Purchased" value="PurchasedOther" />
                                                            <label for="other_month_term" style="cursor: pointer;float: left;margin-right: 10px;" data-role="none" >Other term: </label>
                                                            <input id="othermonths_Text_other" maxlength="15" size="20" type="number" style="width:30%;" class="passedval PurchasedOther chkclear" data-role="none"/> &nbsp; Months
                                                        </td>
                                                        <td class="text-left">Minimum contract term is 12 months</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </apex:outputPanel>
                                        
                                        <apex:outputPanel rendered="{!objActivationOrder.Hardware_Purchased_or_Leased__c == 'Leased'}">
                                            <div class="pad-top">
                                                <table class="collapse-panels1">
                                                    <tbody>
                                                        <tr>
                                                            <th>Term</th>
                                                            <th>Details</th>
                                                        </tr>
                                                        <tr>
                                                            <td class="width-30 text-left">
                                                                <input type="radio" style="cursor: pointer;display:none;" data-role="none" id="leased_months" name="contractTerm" data-passkey="" data-passparent="Leased" value="leased_months" />
                                                                <label for="leased_months" style="cursor: pointer;float: left;margin-right: 10px;" data-role="none">Term : </label>
                                                                <input id="leasedmonths_Text_leased" maxlength="15" size="20" type="number" style="width:30%;" class="passedval leased_months chkclear" data-role="none"/>&nbsp; months
                                                            </td>
                                                            <td class="width-50 text-left">
                                                                Term of the Airtime Contract must be concurrent with, and extend to, the end of the lease period
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    
                                    <div class="panel1" >
                                        <apex:outputPanel rendered="{!OR(objActivationService.Entertainment_Programming_Product__c != null, objActivationService.Training_Packages__c != '' , objActivationService.Independent_Entertainment_Channels__c != '' , objActivationService.Operations_Data_Services__c != '')}">
                                            <hr class="pad-top"/>
                                            <h3>IP-MobileCast Services</h3>
                                            <a href="#suspension-terms" data-rel="popup" data-position-to="window" data-transition="fade" class="right ui-link" aria-haspopup="true" aria-owns="suspension-terms" aria-expanded="false"><i class="fa fa-plus fa-lg" aria-hidden="true"></i> View suspension terms</a>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!OR(objActivationService.Entertainment_Programming_Product__c != null,objActivationService.Training_Packages__c != '' , objActivationService.Independent_Entertainment_Channels__c != '')}">
                                            <h4 class="pad-bottom">Entertainment and Training Packages</h4>
                                            
                                            <apex:outputPanel rendered="{!objActivationOrder.Hardware_Purchased_or_Leased__c == 'Purchased'}">
                                                <table class="collapse-panels1">
                                                    <tbody><tr>
                                                        <th>Term</th>
                                                        <th>Details</th>
                                                        </tr>
                                                        <tr>
                                                            <td class="width-30 text-left"> <input type="radio" style="cursor: pointer;" data-role="none" id="12_month_term" name="EntertainmentcontractTerm" data-passkey="12" data-passparent="Purchased"  value="month_term_12" />
                                                                <label for="12_month_term" style="cursor: pointer;" data-role="none">12-month term</label>
                                                                <input id="12_month" maxlength="15" size="20" type="number" value="12" style="width:15%;display:none;" class="passedval month_term_12" data-role="none"/>
                                                            </td>
                                                            <td class="width-50 text-left">Minimum 12-month initial term is required, suspension is not available during initial term</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-left"><input type="radio" style="cursor: pointer;float: left;" data-role="none" id="other_month_term" name="EntertainmentcontractTerm" data-passkey="" data-passparent="Purchased" value="PurchasedOther" />
                                                                <label for="other_month_term" style="cursor: pointer;float: left;margin-right: 10px;" data-role="none" >Other term: </label>
                                                                <input id="enter_othermonths_Text_other" maxlength="15" size="20" type="number" style="width:30%;" class="passedval PurchasedOther chkclearenter" data-role="none"/> &nbsp; Months
                                                            </td>
                                                            <td class="text-left">Minimum contract term is 12 months, suspension is not available during first 12 months of service</td>
                                                        </tr>
                                                    </tbody></table>
                                            </apex:outputPanel>
                                            
                                            <apex:outputPanel rendered="{!objActivationOrder.Hardware_Purchased_or_Leased__c == 'Leased'}">
                                                <table class="collapse-panels">
                                                    <tbody><tr>
                                                        <th>Term</th>
                                                        <th>Details</th>
                                                        </tr>
                                                        <tr>
                                                            <td class="width-30 text-left">
                                                                <input type="radio" style="cursor: pointer;display:none;" data-role="none" id="enter_leased_months" name="EntertainmentcontractTerm" data-passkey="" data-passparent="Leased" value="enter_leased_months" />
                                                                <label for="enter_leased_months" style="cursor: pointer;float: left;margin-right: 10px;" data-role="none">Term : </label>
                                                                <input id="enter_leasedmonths_Text_leased" maxlength="15" size="20" type="number" style="width:30%;" class="passedval enter_leased_months chkclearenter" data-role="none"/>&nbsp; Months<br/>
                                                            </td>
                                                            <td class="width-50 text-left">
                                                                Term of the IP-MobileCast Contract must be concurrent with, and extend to, the end of the lease period
                                                            </td>
                                                        </tr>
                                                    </tbody></table>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        
                                        <apex:outputPanel rendered="{!OR(objActivationService.Operations_Data_Services__c != '',objActivationService.Independent_Entertainment_Channels__c != '')}">
                                            <h4 class="pad-bottom">Independent Entertainment Channels and Operations Data Services</h4>
                                            <table class="collapse-panels">
                                                <tbody><tr>
                                                    <th>Term</th>
                                                    <th>Details</th>
                                                    </tr>
                                                    <tr>
                                                        <td class="width-30 text-left"> <input type="radio" style="cursor: pointer;" data-role="none" id="1_month_term" name="OperationsDatacontractTerm" checked="checked" disabled="disabled" data-passkey="1" value="month_term_1" />
                                                            <label for="1_month_term" style="cursor: pointer;" data-role="none">1-month term (minimum)</label>
                                                            <input id="1_month" maxlength="15" size="20" type="number" value="1" style="width:15%;display:none;" class="passedval month_term_1" data-role="none"/>
                                                        </td>
                                                        <td class="width-50 text-left"></td>
                                                    </tr>
                                                </tbody></table>
                                        </apex:outputPanel>
                                    </div>
                                    <hr class="pad-top"/>
                                    <div class="two-col left">
                                        <h2>Service Start Date</h2>
                                        <p><label>Requested Service Start Date: <span class="notes">(format: YYYY-MMM-DD)</span></label> 
                                            <apex:inputText id="qServiceStartDate" style="width:70%"  html-data-role="none" styleClass="requiredRedMarkFld" value="{!strServiceStartDate}" />
                                        </p>
                                    </div>
                                    <apex:outputPanel layout="none" rendered="{!boolShowPreActivationDate}">
                                        <div class="two-col right">
                                            <h2>Service Pre-Activation Date</h2>
                                            <p><label>Pre-activation Date: <span class="notes">(format: YYYY-MMM-DD)</span></label> 
                                                <apex:inputText id="qServicePreActivationDate" style="width:70%"  html-data-role="none" value="{!strServicePreActivationDate}" /> <!-- styleClass="requiredRedMarkFld" -->
                                            </p>
                                        </div>
                                    </apex:outputPanel>
                                    <div class="two-col left">
                                        <h2>Promotional Code</h2>
                                        <p><label>Enter code as shown on promotional documents:</label>
                                            <apex:inputField html-data-role="none" value="{!objActivationOrder.Promotional_Code__c}" />
                                        </p>
                                        <p class="notes">Subject to review by Airtime Services - you will be contacted with updated pricing if validated.</p>
                                    </div>
                                    
                                    <div class="button-bar clear">
                                        <apex:commandLink styleClass="button left" id="contractBackBtn" value="< Back to OneCare" onclick="showLoadingDiv();" action="{!goToTab}">
                                            <apex:param value="Extended_Warranty" assignTo="{!selectedTab}" /> 
                                        </apex:commandLink>
                                        <apex:commandLink styleClass="button right" id="contractNextBtn" value="Continue to Review Activation Order >" onclick="validateContractDetails('{!$Component.Contract_Details}', true); return false;">
                                        </apex:commandLink>
                                    </div>
                                    <apex:commandLink styleClass="clear right" value="Save & Exit" onclick="validateContractDetails('{!$Component.Contract_Details}', false); return false;" /> 
                                </apex:outputPanel>
                            </div> 
                            <script>
                            j$("[data-role='collapsible']").collapsible({
                                collapse: function( event, ui ) {
                                    j$(this).children().next().slideUp(500);
                                },
                                expand: function( event, ui ) {
                                    j$(this).children().next().hide();
                                    j$(this).children().next().slideDown(500);
                                }
                                
                            });
                            </script>
                        </apex:outputPanel>
                    </div>
                </apex:form>
                <!-- /popup save & exit contents -->
                <div data-role="popup" style="min-width:400px !important; max-width:800px !important;" id="saveExit" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                    <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                        <h1 class="ui-title" role="heading" aria-level="1">Save and Exit</h1>
                    </div>
                    <div role="main" class="ui-content center">
                        <span>Are you sure you want to exit the activation order? <div class="notes">This activation order will be saved.</div></span>
                        <div class="center">
                            <a href="#" class="button remodal-cancel" onclick="showLoadingDiv();updateContractServiceRecordsave();">Yes</a> 
                            <a href="#" class="pad-left ui-link" data-rel="back">Continue Activation Order</a>                           
                        </div>
                    </div>
                </div>
                <!-- /popup save & exit contents -->
                <!-- ** remodal popup Start ** -->
                <div class="remodal" data-remodal-id="servicesinfo" id="servicesinfo"  data-remodal-options='{ "hashTracking": false, "closeOnAnyClick": false }' >
                    <div style="display: inherit; width:100%;text-align:center;" >
                        <div style="display: inline-block;"> <img id="thecautionImage" style="margin-right: 5%;" src="{!URLFOR($Resource.ActivationOrders, 'www/images/caution.png')}" width="20" height="20"/></div>
                        <div style="display: inline-block;vertical-align: super;" id="kvh-remodelcontentmessageservicesinfo"></div>
                    </div>
                    <div style="text-align:center;">
                        <a data-remodal-action="cancel" id="Cancelbuttonremodel" class="remodal-cancel" style="text-decoration: underline;cursor:pointer;" >OK</a>
                    </div>
                </div>
                <!-- ** remodal popup End ** -->
            </div>
            
        </body>
    </html>
</apex:page>