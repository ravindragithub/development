<apex:page showHeader="false" standardStylesheets="false" sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0">
    <apex:stylesheet value="{!URLFOR($Resource.customer_portal_styles)}" />
    
    <head>
        <title>Sign up for myKVH</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <!-- Load jQuery, use minimized lib-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js">
    </script>
    <apex:stylesheet value="{!URLFOR($Resource.ActivationOrders, 'www/css/styles.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.util_styles)}"/>
    
    <!-- Handle jQuery conflicts (e.g. "$") -->
    <script type="text/javascript">
    var j$ = jQuery.noConflict();
    </script>
    <!-- Library for jQuery Validator... -->
    <script src="{!URLFOR($Resource.jquery_validation, 'dist/jquery.validate.js')}" type="text/javascript"></script>
    <script>
        var validator;
    j$( document ).ready(function() {
        validator = j$("[id$='theForm']").validate({ignore: ":disabled"});
    });
    j$( document ).ready(function() {
        j$.validator.addMethod("selectrequired", function(value, element, arg){
            if(arg == value){
                j$(element).addClass("selecterror");
                return false;
            }
            else{
                j$(element).removeClass("selecterror");
                return true;
            } 
        }, "");
        
        
        j$.validator.addMethod("selectemail", function(value, element){
            var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
            return pattern.test(value);
        }, "Please enter a valid email address.");
        
        j$('[id$=firstname]').each(function(){
            j$(this).rules("add", {
                required: true,
                messages: {
                    required: ""
                }
            });            
        });
        
        j$('[id$=lastname]').each(function(){
            j$(this).rules("add", {
                required: true,
                messages: {
                    required: ""
                }
            });            
        }); 
        
        j$('[id$=username]').each(function(){
            j$(this).rules("add", {
                required: true,
                email: true,
                selectemail:true,
                messages: {
                    required: ""
                }
            });            
        }); 
        
        j$('[id$=country]').each(function(){
            j$(this).rules("add", {
                selectrequired : "Choose One",
                messages: {
                    required: ""
                }
            });            
        });
        j$('[id$=State_Province__c]').each(function(){
            j$(this).rules("add", {
                selectrequired : "Choose One",
                messages: {
                    required: ""
                }
            });            
        });
    });
    
    
    <!-- script to show error message area -Start -->
        function currenttabtoshowerror(){
            var errordiv= "<div class='error-box' id='globalErrorBOX' style='display:none !important'>"; 
            errordiv += "<h1><img src='{!URLFOR($Resource.cautionImage)}' height='20' width='20' />";
            errordiv += "Please correct the errors indicated below and try again. </h1> <ul class='bullets'></ul> </div>";
            return errordiv;
        }
    <!-- script to show error message area -End -->
        
        <!-- script to show error message area -End -->
            function validateError(param){
                var Isvalid;
                var currentcomp = j$("[id$="+param+"]");
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=firstname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=lastname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=username]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=username]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=username]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=country]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=country]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=country]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=State_Province__c]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid() && Isvalid;
                }
                if(Isvalid){
                    ifSuccessCallSave(param);
                    j$("[id$='submit']").attr('disabled','disabled');
                }else{
                    var html = "";
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    
                    if(j$(currentcomp).find('[id$=firstname]').hasClass("error") && (j$(currentcomp).find("[id$=firstname]").valid() == false)){
                        html += "<li>First/Given Name Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=lastname]').hasClass("error") && (j$(currentcomp).find("[id$=lastname]").valid() == false)){
                        html += "<li>Last/Family Name/Surname Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=username]').hasClass("error") && (j$(currentcomp).find("[id$=username]").valid() == false)){
                        html += "<li>Valid Email Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=country]').hasClass("error") && (j$(currentcomp).find("[id$=country]").valid() == false)){
                        html += "<li>Select Country</li>";
                    }
                    if(j$(currentcomp).find('[id$=State_Province__c]').hasClass("error") && (j$(currentcomp).find("[id$=State_Province__c]").valid() == false)){
                        html += "<li>Select State</li>";
                    }
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
    
    function ifSuccessCallSave(param){
        var currentcomp = j$("[id$="+param+"]");
        j$(currentcomp).find('.selecterror').removeClass('selecterror');
        j$(currentcomp).find('.error').removeClass("error");
        j$(currentcomp).find('.kvh-show-errormsg-here').empty();
        //check here current tab and call appropriate method, pass next tab id 
        callSubmit();
    }
    </script>
    <style type="text/css">
        .selecterror{
        border : 1px solid #cc0000;
        box-shadow : 0 0 5px 0 rgb(204, 0, 0);
        }
        h1, h2, h3, p {
        padding-bottom: 0px;
        }
        
        .error{
        border-top: 1px solid #cc0000 !important;
        border-bottom: 1px solid #cc0000 !important;
        color: #cc0000 !important;
        }
        
        label.error{
        border-top: 0px solid #cc0000 !important;
        border-bottom: 0px solid #cc0000 !important;
        color: #cc0000 !important;
        }
        
        .requiredRedMarkFld{
        border-left: 4px solid #cc0000 !important;;padding-left: 4px !important;
        }
        
        .error-box
        { border:1px solid #cc0000; width:99%; color:#cc0000; border-radius:3px; margin-bottom:20px; }
        
        .error-box h1
        { background:#cc0000; color:#fff !important; font-size:1em !important; padding:5px; margin-bottom:10px; font-weight:bold; }
        
        .error-box li
        { margin-left:20px; } 
        
        img {
        float: left; 
        }
    </style>
    
</head>
<apex:stylesheet value="{!$Resource.portal_styles2}"/>
<apex:insert name="header">
    <c:myKVHSiteHeader />
</apex:insert>
<div style="text-align:center; width:100%; margin:20px auto;">
    <center>
        <apex:panelGrid style="width:50%;">
            
            <apex:outputPanel layout="block">
                <apex:panelGrid > 
                    
                    <apex:panelGroup >
                        
                        <div class="info-box">
                            <h2>Sign up for a KVH customer account</h2>
                            <div class="content">
                                <p>Fill out all fields below to sign up for a KVH customer account.</p>
                                <p>Once submitted, an email with a temporary password and further instructions will be emailed to the address supplied.</p>
                                
                                <c:SelfRegRegisterComponent id="siteRegister"/>
                                
                                <!-- <div class="footnote" style="margin:0px;">
<p style="text-align:center;">Supported browsers: Chrome, Internet Explorer 9+, Firefox 22+, Safari 5+</p>
<p style="text-align:center; font-style:normal;"><a href="https://kvh.my.salesforce.com/idp/login?app=0sp13000000CaVf" style="margin-top:40px;">KVH Employee Login</a></p>
</div> -->
                            </div>
                        </div>
                        
                    </apex:panelGroup>
                    
                </apex:panelGrid>
                
            </apex:outputPanel>
            
            <!-- we don't need no powered by.... <c:SitePoweredBy /> -->
        </apex:panelGrid>
    </center>
</div>

</apex:page>