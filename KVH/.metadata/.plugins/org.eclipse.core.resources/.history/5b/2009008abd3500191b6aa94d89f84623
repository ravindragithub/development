<apex:page sidebar="false" showHeader="false" standardStyleSheets="false" applyHtmlTag="false" cache="false" applyBodyTag="false" controller="Act_Product_Registration_Controller" action="{!readActivationOrder}" id="thePage" >
    <!-- ** This is the main page for Product Registration, Contains all the scripts and CSS used in referencing components --> 
    <!--DOCTYPE html-->
    <!-- ** HTML tag Start ** -->
    <html>
        <!-- ** Head tag Start ** -->
        <head>
            <meta charset="UTF-8"/> 
            <title>myKVH Portal - Product Registration</title>
            <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js">
            </script>
            <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js">
            </script>
            
            <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
            <script src="{!URLFOR($Resource.myKVHProductRegistration, 'assets/tabs/js/jquery.responsiveTabs.min.js')}" type="text/javascript"></script>
            <script src="{!URLFOR($Resource.myKVHProductRegistration, 'assets/modal/remodal.min.js')}" type="text/javascript">
                </script>
            <script src="https://use.fontawesome.com/a343804bcf.js">
            </script>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">
            </script>
            <link href="https://use.fontawesome.com/a343804bcf.css" media="all" rel="stylesheet"/>
            <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'css/reset.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'css/grid.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'css/styles.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'assets/tabs/css/responsive-tabs.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'assets/tabs/css/style.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'assets/modal/remodal-default-theme.css')}" rel="stylesheet"/>
            <link href="{!URLFOR($Resource.myKVHProductRegistration, 'assets/modal/remodal.css')}" rel="stylesheet"/>
            
            <!-- Handle jQuery conflicts (e.g. "$") -->
            <script type="text/javascript">
            var j$ = jQuery.noConflict();
            <apex:includeScript value="/support/console/33.0/integration.js"/>

            </script>
            <!-- Load jQuery plug-ins, use minimized libs -->
            <!-- Library for Modal windows.... -->
            <script src="{!URLFOR($Resource.ActivationOrders, 'www/assets/remodal/jquery.remodal.min.js')}" type="text/javascript"></script>
            <!-- Library for jQuery Validator  -->
                <script src="{!URLFOR($Resource.jquery_validation, 'dist/jquery.validate.js')}" type="text/javascript"></script>
            <!--Action Status Resources-->
            <apex:includeScript value="{!$Resource.ActivationStatusJS}"/>
            
            <!-- jQuery Validator Start -->
            <script>
            var globalDealerReq;
            j$( document ).ready(function() {
                if('{!checkflag}' == 'true' && '{!objActivationDealer.Company__c}' == ''){
                j$("[id$=dealerCompanyName]").removeClass("requiredRedMarkFld");
                j$("[id$=DealerDistributorCompany]").removeClass("requiredRedMarkFld");
                j$("[id$=Purchasingcountry]").removeClass("requiredRedMarkFld");
                j$("[id$=PurDealState_Province__c]").removeClass("requiredRedMarkFld");
                j$("[id$=dealerppnumber]").removeClass("requiredRedMarkFld");   
                globalDealerReq = 'true';         
                } 
                j$("[id$='theForm']").validate({ignore: ":disabled , :not(:visible)"});
                
                if(!FileReader.prototype.readAsBinaryString) {
                    FileReader.prototype.readAsBinaryString = function (fileData) {
                        var binary = "";
                        var pt = this;
                        var reader = new FileReader();      
                        reader.onload = function (e) {
                            var bytes = new Uint8Array(reader.result);
                            var length = bytes.byteLength;
                            for (var i = 0; i < length; i++) {
                                binary += String.fromCharCode(bytes[i]);
                            }
                            //pt.result  - readonly so assign binary
                            pt.content = binary;
                            j$(pt).trigger('onloadend');
                        }
                        reader.readAsArrayBuffer(fileData);
                    }
                }
                
                // Installation Type Tab Validation - Start
                if(j$("input[name=MarketTypeSelection][type='radio']").length>0){
                    j$("input[name=MarketTypeSelection][type='radio']").rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                
                j$('input[type=radio][name=MarketTypeSelection]').click(function(){
                    j$(this).siblings().removeAttr('disabled');
                    if(j$(this).is(':checked')){
                        j$(this).attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                        showLoadingDiv();
                        btnSelectedtosave(j$(this).data('passkey'));
                    }
                });
                
                j$.validator.addMethod("IMOValidation", function(value, element){
                    j$(element).removeClass("error");
                    return j$(element).val() != '' ? validateIMO() : true; 
                }, "");  
                
                j$.validator.addMethod("selectemail", function(value, element){
                    var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
                    return pattern.test(value);
                }, "Please enter a valid email address.");
                
                j$.validator.addMethod("selectrequired", function(value, element, arg){
                    if(arg == value){
                        j$(element).addClass("selecterror");
                        return false;
                    }
                    else{
                        j$(element).removeClass("selecterror");
                        return true;
                    } 
                }, "");  
                j$.validator.addMethod("selectstaterequired", function(value, element, arg){
                    if(arg == value && j$(element).find('option').length >1 ){
                        j$(element).addClass("selecterror").addClass("requiredRedMarkFld");
                        return false;
                    }
                    else{
                        j$(element).removeClass("selecterror");
                        return true;
                    } 
                }, "");
                
                
                j$('[id$=firstname]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=lastname]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                }); 
                
                if(j$('[id$=ServiceStartDate]').length>0){
                    j$('[id$=ServiceStartDate]').rules("add",{
                        required: true,
                        // date: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                if(j$('[id$=productLineIdDetail]').length>0){
                    j$('[id$=productLineIdDetail]').rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        } 
                    });
                }
                
                if(j$('[id$=firstserialnumber]').length>0){
                    j$('[id$=firstserialnumber]').each(function(){
                        j$(this).rules("add",{
                            required: true,
                            minlength: 4,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                
                if(j$('[id$=ProductListR]').length>0){
                    j$('[id$=ProductListR]').each(function(){
                        j$(this).rules("add",{
                            required: true,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                if(j$('[id$=fileId]').length>0){
                    j$('[id$=fileId]').rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                if(j$('[id$=inputfiletext]').length>0){
                    j$('[id$=inputfiletext]').rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                
                if(j$('[name$=havingimo]').length>0){
                    j$('[name$=havingimo]').rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                }
                
                j$('[id$=vesselMMSIIdDetail]').each(function(){
                    j$(this).rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                });
                
                j$('[id$=vesselInfoIdDetail]').each(function(){
                    j$(this).rules("add",{
                        required: true,
                        messages: {
                            required: ""
                        }
                    });
                });
                
                if(j$('[id$=ServiceStartDate]').length>0){
                    j$( '[id$=ServiceStartDate]' ).datepicker({
                        dateFormat: 'yy-M-dd',maxDate: '0'
                    }).attr('readonly', 'true').
                    keypress(function(event){
                        if(event.keyCode == 8){
                            event.preventDefault();
                        }
                    });
                }
                
                if(j$('input[id$=vesselIMOnumberIdDetailR]').length>0){
                    j$('input[id$=vesselIMOnumberIdDetailR]').each(function(){
                        j$(this).rules("add",{
                            required: j$(this).hasClass('requiredRedMarkFld'),
                            IMOValidation : true,
                            number: true,
                            minlength: 7,
                            maxlength: 7,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                
                if(j$('[id$=IdDetail].requiredRedMarkFld').length>0){
                    j$('[id$=IdDetail].requiredRedMarkFld').each(function(){
                        j$(this).rules("add",{
                            required: true,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
                
                
                j$('[id$=address1]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=city]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=email]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        email: true,
                        selectemail:true,
                        messages: {
                            required: ""
                        }
                    });            
                }); 
                
                j$('[id$=country]').each(function(){
                    j$(this).rules("add", {
                        selectrequired : "Choose One",
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=State_Province__c]').each(function(){
                    j$(this).rules("add", {
                        selectstaterequired : "Choose One",
                        messages: {
                            required: ""
                        }
                    });
                    
                    if(j$(this).val() == 'Choose Country First'){
                        j$(this).attr('disabled','disabled');
                    }
                }); 
                
                j$('[id$=postalcode]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=jobfunction]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=ppnumber]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=dealerCompanyName]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });            
                });
                
                j$('[id$=Installed_By_Boat_Builder__c]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });     
                });
                
                j$('[id$=Installed_By__c]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });     
                });
                
                j$('[id$=dealerCompanyNameinstalling]').each(function(){
                    j$(this).rules("add", {
                        required: true,
                        messages: {
                            required: ""
                        }
                    });     
                });
                
                j$('[id$=IdDetail]').find('option').each(function(){
                    if(j$(this).text() == 'Choose One'){
                        j$(this).text('--Select--');
                    }
                }); 
                
                if('{!$CurrentPage.parameters.conActID}' != ''){
                    j$(".KVH-show-inside-contactcomponent").show();
                }
                
                j$('div.phone-types').find("label, fieldset,span.req").each(function (i){
                    j$(this).css("display", "inline");
                });
                
                j$("input[type='radio']").each(function (i){
                    if(j$(this).next("label")){
                        j$(this).css("display", "inline").next('label').css("display", "inline");
                    }
                });
                
                j$('[id$=nodealercheck]').click(function (){
                    nodealercheck(j$(this), true);
                    sameaspurchasedealer(j$("[id$=Same_as_Purchase_Dealer__c]"), false);
                });
                
                j$('[id$=nodealercheck]').each(function (){
                    nodealercheck(j$(this), false);
                });
                
                validateVesselDetail();
                
                j$('[id$=Installed_By__c]').change(function (){
                    j$(this).closest('.form').find('.diabledealerClass').removeAttr('disabled').css('background-color','white');
                    j$(this).closest('.form').find('input[type="text"].diabledealerClass').val('');
                    j$(this).closest('.form').find('input[type="checkbox"]').removeAttr('checked');
                    j$(this).closest('.form').find('select.diabledealerClass').val('Choose One');
                    j$('[id$=InstallingDealerCompany]').val('');
                    installedbyvalid(j$(this));
                });
                
                j$('[id$=Installed_By__c]').each(function (){
                    installedbyvalid(j$(this));
                });
                
                j$('[id$=Same_as_Purchase_Dealer__c]').click(function (){
                    j$(this).closest('.form').find('input[type="text"].diabledealerClass').val('');
                    j$(this).closest('.form').find('select.diabledealerClass').val('Choose One');
                    sameaspurchasedealer(j$(this), true);
                });
                
                j$('[id$=Same_as_Purchase_Dealer__c]').each(function (){
                    sameaspurchasedealer(j$(this), false);
                });
                
                j$('[id$=State_Province__c]').find('option').each(function(){
                    if(j$(this).text() == 'Choose Country First'){
                        j$(this).text('--Select Country First--');
                    }
                    if(j$(this).text() == 'Choose One'){
                        j$(this).text('--Select--');
                    }
                });
                j$('[id$=country]').find('option').each(function(){
                    if(j$(this).text() == 'Choose One'){
                        j$(this).text('--Select--');
                    }
                });
                
                j$('.remodalAgain').each(function(){ 
                    j$(this).find('button').removeClass('remodal-confirm button').removeClass('ui-shadow').removeClass('ui-corner-all').addClass('btnoverride button').css("font-size", "75% !important;").parent().css("display", "inline-block").css("margin-top", "10px;").next().css("display", "inline-block").find('a').removeClass('ui-link').addClass('btnoverride button ').css("font-size", "75% !important;");
                });
                
                // We can attach the `fileselect` event to all file inputs on the page
                generateRequired();
                
                j$(document).on('change', ':file', function() {
                    var input = j$(this),
                        label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
                    var inputfiletext = j$("#inputfiletext");
                    j$(inputfiletext).val(label);
                });
                
                if('{!objActivationOrder.Order_Status__c}' == 'Submitted' || ('{!$User.Id}' == '{!objActivationOrder.CreatedById}' && '{!objActivationOrder.Activation_Type__c}' == 'Registration on behalf of Customer' && '{!objActivationOrder.Order_Status__c}' == 'Pending Customer Confirmation')){
                     j$('a, select, button, input').each(function(){ 
                        j$(this).attr('disabled','disabled').addClass('disabledlookclass'); 
                    }); 
                    j$('#returnhomeId').each(function(){ 
                        j$(this).attr('disabled','false').removeClass('disabledlookclass'); 
                    });  
                }
            });
            
            function generateRequired(){
                j$('span:has(span.req), p:has(span.req), div:has(span.req)').children('input[type=text], select').addClass('requiredRedMarkFld');
                j$('span.req').empty();
            }
            function nodealercheck(param, param1){
                j$(".purchasingstatecountry").show();
                j$(param).closest('.form').find('.diabledealerClass').removeAttr('disabled').removeClass('disabledlookclass');
                if(j$(param).is(':checked')){
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.Act_Product_Registration_Controller.getUnknowDealer}', 
                        function(result, event){
                            if (event.status && result != null) {
                            j$("[id$=dealerCompanyName]").val(result.Name);
                            j$("[id$=Purchasingcountry]").val(result.BillingCountry);
                            j$("[id$=PurDealState_Province__c]").val(result.BillingState);
                            j$("[id$=dealerppnumber]").val(result.Phone);
                            j$("[id$=DealerDistributorCompany]").val(result.Id);
                            j$(param).closest('.form').find('.diabledealerClass').attr('disabled','disabled').addClass('disabledlookclass');
                            j$(".purchasingstatecountry").hide();
                            clearDealerFields();
                            }
                            else{
                            alert('No Unknown dealer found in the system');
                            }
                        }, 
                        {escape: true}
                    );
                }else if(param1){
                    j$("[id$=dealerCompanyName]").val('');
                    j$("[id$=ppnumber]").val('');
                    j$("[id$=DealerDistributorCompany]").val('');
                } 
                if(j$("[id$=DealerDistributorCompany]").val() != ''){
                    j$(".purchasingstatecountry").hide();
                }
            }
            
            function sameaspurchasedealer(param, param1){
                j$(".installingstatecountry").show();
                j$(".purchasingstatecountry").show();
                j$('.kvh-show-errormsg-here').empty();
                j$('.error').removeClass('error');
                j$(param).closest('.form').find('.diabledealerClass').removeAttr('disabled').removeClass('disabledlookclass');
                if(j$(param).is(':checked')){
                    j$("[id$=installingcountry]").val(j$("[id$=Purchasingcountry]").val());
                    j$(".installingstatecountry").hide();
                    j$("[id$=dealerCompanyNameinstalling]").val(j$("[id$=dealerCompanyName]").val());
                    j$("[id$=InstallingDealerCompany]").val(j$("[id$=DealerDistributorCompany]").val());
                    j$(param).closest('.form').find('.diabledealerClass').attr('disabled','disabled').addClass('disabledlookclass');
                }else if(param1){
                    j$("[id$=dealerCompanyNameinstalling]").val('');
                    j$("[id$=InstallingDealerCompany]").val('');
                } 
                if(j$("[id$=InstallingDealerCompany]").val() != ''){
                    j$(".installingstatecountry").hide();
                }
                if(j$("[id$=DealerDistributorCompany]").val() != ''){
                    j$(".purchasingstatecountry").hide();
                }
                if(j$("[id$='dealerCompanyName']").val() != '' && '{!checkflag}' == 'true'){
                  j$(".purchasingstatecountry").hide();
                }
            }
            
            function installedbyvalid(param){
                j$('.show-select').hide();
                if(j$(param).val() != undefined && j$(param).val() != '' && j$(param).val().indexOf('Authorized Dealer') >=0){
                    j$('.kvh-auth-dealer').show();
                }else if(j$(param).val() != undefined && j$(param).val() != '' && j$(param).val().indexOf('Factory Install') >=0){
                    j$('.factory-install').show();
                }
            }
            
            <!-- function to add CSS to Dependent Picklist Start -->
                function dependentPicklist(dependent_field_div_id,dependent_field_class, tabindex){
                var MutationObserver = window.WebKitMutationObserver || window.MutationObserver || window.MozMutationObserver;
                var observer = new MutationObserver(function(mutations) {
                    // If the dependent_field_class was removed from the list – re-assign it
                    if(!j$("#"+dependent_field_div_id+" select").first().hasClass(dependent_field_class) && '{!checkflag}' == false ){
                        j$("#"+dependent_field_div_id+" select").first().attr("tabindex",tabindex);
                        j$("#"+dependent_field_div_id+" select").first().addClass(dependent_field_class);
                    }
                    if(j$("#"+dependent_field_div_id+" select > option").length<=1){
                        j$("#"+dependent_field_div_id+" select").addClass('disabledlookclass');
                    }
                    
                    j$("#"+dependent_field_div_id+" select > option").each(function(){
                        if(j$(this).text() == '--None--'){
                            j$(this).text('--Select--');
                            return false;
                        }
                    });
                    
                    showproperblock();
                });
                var dependentlst = document.querySelector('#'+dependent_field_div_id);
                observer.observe(dependentlst, {
                    childList: true,
                    subtree: true,
                    attributes: true
                });               
            }
            <!-- function to add CSS to Dependent Picklist End -->
                
                <!-- script to show error message area -Start -->
                    function currenttabtoshowerror(){
                        var errordiv= "<div class='error-box' id='globalErrorBOX' style='display:none !important'>"; 
                        errordiv += "<h1><img src='/resource/cautionImage' height='20' width='20' />";
                        errordiv += "Please correct the errors indicated below and try again. </h1> <ul class='bullets'></ul> </div>";
                        return errordiv;
                    }
            <!-- script to show error message area -End -->
                
                <!-- script IMO Number Validation Start -->     
                    function validateIMO(){
                        var IsvalidIMO = false;
                        var imo = j$("[id$='vesselIMOnumberIdDetailR']").val();
                        var sum = 0;
                        for (var i = 0, len = imo.length; i < len-1; i++) {
                            sum += (imo[i])*(imo.length-i);
                        }
                        if(sum % 10 == imo[6]){
                            IsvalidIMO = true;
                        }
                        // console.log(IsvalidIMO);
                        return IsvalidIMO;
                    }
            <!--script IMO Number Validation End --> 
                
                <!-- script Installation Type Select Button Validation Start --> 
                    function checkBtnSelected(param, param1){
                        var currentcomp  = document.getElementById(param);
                        j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                        if(!(j$(currentcomp).find("input[name=MarketTypeSelection][type='radio']").valid()) && j$(currentcomp).find("input[name=MarketTypeSelection][type='radio']").hasClass("error")){
                            j$("input[name=MarketTypeSelection][type='radio']").parent().find("label[id=MarketTypeSelection-error]").remove();
                            var errordiv = currenttabtoshowerror();
                            j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                            
                            var html = "";
                            html += "<li>\Select Vessel or Vehicle Type</li>";
                            j$(currentcomp).find('.error-box').find('.bullets').html(html);
                            j$(currentcomp).find('.error-box').show();
                            var errorDivision = j$(currentcomp).find('.error-box').first();
                            var scrollPos = errorDivision.offset().top;
                            j$(window).scrollTop(scrollPos);
                        }else{
                            if(param1){
                                showLoadingDiv();
                                btnSelectednavigateBack('Product'); //, j$("input[name=MarketTypeSelection][type='radio']:checked").data('passkey')
                                //createActOrderCase();
                            }else{
                                saveandexitfunction();
                            }
                        }
                    }
            <!-- script Installation Type Select Button Validation End -->
                
                
                var maxStringSize = 5000000//6000000;    //Maximum String size is 6,000,000 characters
                var maxFileSize =  5000000;//4350000;      //After Base64 Encoding, this is the max file size
            var attachment;
            var attachmentName;
            var attachmentType;
            var fileSize;
            
            function saveData(param, param1){
            
                var Isvalid ;
                var IsvalidProduct = false ;
                j$(currentcomp).find("[id$='ProductListR']").removeClass('error');
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=productLineIdDetail]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=productLineIdDetail]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=productLineIdDetail]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=ProductListR]").length >1){
                    if(Isvalid == undefined){
                        Isvalid = (j$(currentcomp).find("[id$=CurrentProductListR]").valid() || j$(currentcomp).find("[id$=RetiredProductListR]").valid()) ? true : false;
                    }else{
                        Isvalid = ((j$(currentcomp).find("[id$=CurrentProductListR]").valid() || j$(currentcomp).find("[id$=RetiredProductListR]").valid()) ? true : false) && Isvalid;
                    }
                    IsvalidProduct = (j$(currentcomp).find("[id$=CurrentProductListR]").valid() || j$(currentcomp).find("[id$=RetiredProductListR]").valid()) ? true : false;
                }
                if(j$(currentcomp).find("[id$=firstserialnumber]:visible").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=firstserialnumber]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=firstserialnumber]").valid() && Isvalid;
                    if(j$("[id$='theHiddenInput']").val() > 0 && '{!checkFlag}' == 'true' && j$("[id$='CurrentProductListR']").val() != '' )
                    Isvalid = false;
                }
                if(j$(currentcomp).find("[id$=ServiceStartDate]").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=ServiceStartDate]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=ServiceStartDate]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=fileId]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=fileId]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=fileId]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=inputfiletext]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=inputfiletext]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=inputfiletext]").valid() && Isvalid;
                }
                
                if(IsvalidProduct){
                    j$(currentcomp).find("[id$='ProductListR']").removeClass('error');
                }
                if(Isvalid){
                    var file;
                    if(j$('#fileId')[0] != undefined && j$(currentcomp).find("[id$=inputfiletext]").is(":visible")){
                        file = j$('#fileId')[0].files[0];
                    }
                    
                    if(file != undefined && file != '') {
                        if(file.size <= maxFileSize) {
                            attachmentName = file.name;
                            attachmentType = file.type;
                            var fileReader = new FileReader();
                            fileReader.onloadend = function(e) {
                                if (fileReader.result) fileReader.content = fileReader.result;
                                attachment = window.btoa(fileReader.content);  //Base 64 encode the file before sending it
                                fileSize = attachment.length;
                                // console.log("Total Attachment Length: " + fileSize);
                                if(fileSize < maxStringSize){
                                    uploadAttachment(param1, 'upsertall');
                                } else {
                                    alert("Base 64 Encoded file is too large.  Maximum size is " + maxStringSize + " your file is " + fileSize + ".");
                                }
                            }
                            
                            fileReader.onerror = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                            }
                            fileReader.onabort = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                            }
                            
                            fileReader.readAsBinaryString(file);  //Read the body of the file
                            
                        } else {
                            alert("File must be under 5 MB in size.  Your file is too large.  Please try again.");
                        }
                    } else {
                        if(param1){
                            showLoadingDiv();
                            upsertActivationHardwareJS('', '', '', j$('.serialnumberlableclass').text(), j$('.serialnumbersecondlableclass').text());
                        } else{
                            saveandexitfunction();
                        }
                        //   alert("You must choose a file before trying to upload it");
                    }
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    
                    if(j$(currentcomp).find('[id$=productLineIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=productLineIdDetail]").valid() == false)){
                        html += "<li>Select Product Line</li>";
                    }
                    if(!IsvalidProduct){
                        html += "<li>Select Product</li>";
                    }
                    if(j$(currentcomp).find('[id$=firstserialnumber]').hasClass("error") && (j$(currentcomp).find("[id$=firstserialnumber]").valid() == false)){
                        var dynamicval = j$(currentcomp).find('.serialnumberlableclass').text().replace(':','');
                        html += "<li>"+dynamicval+" Required</li>"; 
                    }
                    if(j$("[id$='theHiddenInput']").val() > 0 && '{!checkFlag}' == 'true'){
                        var dynamicval = j$(currentcomp).find('.serialnumberlableclass').text().replace(':','');
                        html += "<li>"+dynamicval+" Required</li>"; 
                    }
                    if(j$(currentcomp).find('[id$=ServiceStartDate]').hasClass("error") && (j$(currentcomp).find('[id$=ServiceStartDate]').valid() == false)){
                        html += "<li>Select Purchase Date</li>";
                    } 
                    
                    if(j$(currentcomp).find('[id$=inputfiletext]').hasClass("error") && (j$(currentcomp).find("[id$=inputfiletext]").valid() == false)){
                        html += "<li>Proof of Purchase Required</li>";
                    }else if(j$(currentcomp).find('[id$=fileId]').hasClass("error") && (j$(currentcomp).find("[id$=fileId]").valid() == false)){
                        html += "<li>Proof of Purchase Required</li>";
                    }
                    
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                } 
            }
            
            //Method to send a file controller
            function uploadAttachment(passKey, passkey1) {
                var attachmentBody = "";
                // alert(fileSize);
                attachmentBody = attachment;
                if(passkey1 == 'upsertall' && passKey == true){
                    showLoadingDiv();
                    upsertActivationHardwareJS(attachmentName, attachmentType, attachmentBody, j$('.serialnumberlableclass').text(), j$('.serialnumbersecondlableclass').text());
                } else if(passkey1 == 'Save' && passKey == false){
                    showLoadingDiv();
                    upsertAttachmentJS(attachmentName, attachmentType, attachmentBody);
                }else if(passkey1 == 'upsertall' && passKey == false)
                    saveandexitfunction();                
            }
            /* attachment functions -End */
            function returnHomeJS(){
            returnHomeAF();
            }
            function saveAttachmentData(param){
                var Isvalid ;
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=fileId]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=fileId]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=fileId]").valid() && Isvalid;
                }
                
                if(Isvalid){
                    var file;
                    if(j$('#fileId')[0] != undefined){
                        file = j$('#fileId')[0].files[0];
                    }
                    if(file != undefined && file != '') {
                        if(file.size <= maxFileSize) {
                            attachmentName = file.name;
                            attachmentType = file.type;
                            var fileReader = new FileReader();
                            fileReader.onloadend = function(e) {
                                if (fileReader.result) fileReader.content = fileReader.result;
                                attachment = window.btoa(fileReader.content);  //Base 64 encode the file before sending it
                                fileSize = attachment.length;
                                // console.log("Total Attachment Length: " + fileSize);
                                if(fileSize < maxStringSize){
                                    uploadAttachment(false, "Save");
                                } else {
                                    alert("Base 64 Encoded file is too large.  Maximum size is " + maxStringSize + " your file is " + fileSize + ".");
                                }
                            }
                            
                            fileReader.onerror = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                            }
                            fileReader.onabort = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                            }
                            
                            fileReader.readAsBinaryString(file);  //Read the body of the file
                            
                        } else {
                            alert("File must be under 5 MB in size.  Your file is too large.  Please try again.");
                        }
                    } else {
                        alert("You must choose a file before trying to upload it");
                    }
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    
                    if(j$(currentcomp).find('[id$=fileId]').hasClass("error") && (j$(currentcomp).find("[id$=fileId]").valid() == false)){
                        html += "<li>Proof of Purchase Required</li>";
                    }
                    
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                } 
            }
            
            function requiredserialnumber(param){
                var Isvalid ;
                j$(currentcomp).find("[id$='ProductListR']").removeClass('error');
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=firstserialnumber]:visible").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=firstserialnumber]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=firstserialnumber]").valid() && Isvalid;
                }
                if(Isvalid){
                    showLoadingDiv();
                    validateAssetJS();
                }
            }
            
            function showproperblock(){
                j$(".renderblockfield").hide();
                j$('.invalidserial').hide();
                j$('.serialnumbersecondlableclass').text('');
                j$('.serialnumberlableclass').text('');
                j$('[id$=serialNumberj]').val('');
                var countervar = 0;
                j$("[id$='hiddenVisibleLines'] > option").each(function() {
                    var currentthis = j$(this);
                    if(j$(currentthis).text() != '--Select--' && j$(currentthis).text() != '--None--'){
                        j$(".renderblockfield").each(function(i) {
                            if(countervar == i){
                                j$(this).find("label:first").text(j$(currentthis).val() +':');
                                j$(this).show();
                            }
                        });
                        countervar = countervar +1;
                    }
                });
            }
            
            function saveVesselVehicle(param, param1){
                var Isvalid ;
                var currentcomp = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                j$(currentcomp).find("[id$=vesselInfoIdDetail]").removeClass('error');
                j$(currentcomp).find("[id$=vesselMMSIIdDetail]").removeClass('error');
                if(j$(currentcomp).find('[id$=IdDetail].requiredRedMarkFld').length > 0 ){
                    j$(currentcomp).find('[id$=IdDetail].requiredRedMarkFld').each(function() {
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=IdDetail].requiredRedMarkFld").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=IdDetail].requiredRedMarkFld").valid() && Isvalid;
                    });
                }
                if(j$(currentcomp).find("[id$=country]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=country]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=country]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[name$=havingimo]").length >1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[name$=havingimo]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[name$=havingimo]").valid() && Isvalid;
                }
                
                if(j$(currentcomp).find("[id$=vesselIMOnumberIdDetailR]").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=vesselIMOnumberIdDetailR]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=vesselIMOnumberIdDetailR]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=vesselInfoIdDetail]").length ==1){
                    var validradiommsi = false;
                    if(j$(currentcomp).find("[id$=vesselInfoIdDetail]").valid()){
                        validradiommsi = true;
                    }
                    if(!validradiommsi){
                        if(j$(currentcomp).find("[id$=vesselMMSIIdDetail]").valid()){
                            validradiommsi = true;
                        }
                    }
                    if(Isvalid == undefined)
                        Isvalid = validradiommsi;
                    else
                        Isvalid = validradiommsi && Isvalid;
                    if(!validradiommsi){
                        j$(currentcomp).find("[id$=vesselInfoIdDetail]").addClass('error');
                        j$(currentcomp).find("[id$=vesselMMSIIdDetail]").addClass('error');
                    }
                }
                console.log('===@@==='+'{!checkflag}');
                if('{!checkflag}' == 'true'){
                    Isvalid = true;
                    j$(currentcomp).find("[id$=vesselInfoIdDetail]").removeClass('error');
                    j$(currentcomp).find("[id$=vesselMMSIIdDetail]").removeClass('error');
                    j$(currentcomp).find("[id$=flagcountry]").removeClass('error');
                    j$(currentcomp).find("[id$=flagcountry]").removeClass('selecterror');
                    j$(currentcomp).find("[id$=flagregcountry]").removeClass('error');
                    j$(currentcomp).find("[id$=flagregcountry]").removeClass('selecterror');
                }
                console.log('Isvalid ===@@==='+Isvalid );
                if(Isvalid){
                    if(param1){
                        showLoadingDiv();
                        btnSelectedVesselVehicle('Purchase_Details');
                    }else{
                        saveandexitfunction(); 
                    }
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    if(j$(currentcomp).find('[id$=vesselNameIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=vesselNameIdDetail]").valid() == false)){
                        html += "<li>Vessel Name Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=vesselTypeIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=vesselTypeIdDetail]").valid() == false)){
                        html += "<li>Select Vessel Type</li>";
                    }
                    if(j$(currentcomp).find('[id$=vesselPlatformIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=vesselPlatformIdDetail]").valid() == false)){
                        html += "<li>Select Vessel Details</li>";
                    }
                    
                    if(j$(currentcomp).find('[name$=havingimo]').hasClass("error") && (j$(currentcomp).find("[name$=havingimo]").valid() == false)){
                        html += "<li>Select Vessel IMO Number Status</li>";
                    }
                    if(j$(currentcomp).find('[id$=vesselIMOnumberIdDetailR]').hasClass("error") && (j$(currentcomp).find("[id$=vesselIMOnumberIdDetailR]").valid() == false)){
                        html += "<li>Vessel IMO Number Required</li>";
                    }
                    if(j$(currentcomp).find('[name$=havingimo]').length > 1 && j$(currentcomp).find("[id$=vesselInfoIdDetail]").valid() == false && j$(currentcomp).find("[id$=vesselMMSIIdDetail]").valid() == false){
                        html += "<li>Radio Call Sign or MMSI Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=LandvesselTypeIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=LandvesselTypeIdDetail]").valid() == false)){
                        html += "<li>Select Vehicle/Platform Type</li>";
                    }
                    if(j$(currentcomp).find('[id$=LandvesselPlatformIdDetail]').hasClass("error") && (j$(currentcomp).find("[id$=LandvesselPlatformIdDetail]").valid() == false)){
                        html += "<li>Select Vehicle/Platform Details</li>";
                    }
                    if(j$(currentcomp).find('[id$=flagcountry]').hasClass("error") && (j$(currentcomp).find("[id$=flagcountry]").valid() == false)){
                        html += "<li>Select Flag</li>";
                    }
                    if(j$(currentcomp).find('[id$=flagregcountry]').hasClass("error") && (j$(currentcomp).find("[id$=flagregcountry]").valid() == false)){
                        html += "<li>Select Country of Registration</li>";
                    }
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
            
            function selectedrecordremovehandler(recordId){
                var setcontent = "<input type='hidden' class='passsedrecordId' value='"+recordId+"' />"
                setcontent += "Are you sure you want to remove this Product?";
                j$("#kvh-remodelmsg").html(setcontent);
                j$('#Aremovehardware').popup("open");
            }
            
            function validateAuthorizedRep(param){
                var Isvalid ; 
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=firstname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=lastname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=email]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=email]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=email]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=country]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=country]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=country]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=State_Province__c]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=ppnumber]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid() && Isvalid;
                }
                
                if(Isvalid){
                    showLoadingDiv();
                    callauthorizedRepSave();
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    if(j$(currentcomp).find('[id$=firstname]').hasClass("error") && (j$(currentcomp).find("[id$=firstname]").valid() == false)){
                        html += "<li>First/Given Name Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=lastname]').hasClass("error") && (j$(currentcomp).find("[id$=lastname]").valid() == false)){
                        html += "<li>Last/Family Name/Surname Required</li>";
                    } 
                    if(j$(currentcomp).find('[id$=email]').hasClass("error") && (j$(currentcomp).find("[id$=email]").valid() == false)){
                        html += "<li>Valid Email Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=ppnumber]').hasClass("error") && (j$(currentcomp).find("[id$=ppnumber]").valid() == false)){
                        html += "<li>Phone Number Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=country]').hasClass("error") && (j$(currentcomp).find("[id$=country]").valid() == false)){
                        html += "<li>Select Country</li>";
                    }
                    if(j$(currentcomp).find('[id$=State_Province__c]').hasClass("error") && (j$(currentcomp).find("[id$=State_Province__c]").valid() == false)){
                        html += "<li>Select State/Province/Territory</li>";
                    }
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
            
            function savedealer(param,param1){
                var Isvalid ;
                var currentcomp  = document.getElementById(param);
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=country]").length >=1){
                    j$(currentcomp).find('[id$=country]').each(function() {
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=country]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=country]").valid() && Isvalid;
                    });
                }
                console.log(Isvalid+'====@@Country');
                if(j$(currentcomp).find("[id$=Installed_By__c]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=Installed_By__c]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=Installed_By__c]").valid() && Isvalid;
                }
                console.log(Isvalid+'====@@Installed_By__c');
                if(j$(currentcomp).find("[id$=State_Province__c]").length >=1){
                    j$(currentcomp).find('[id$=State_Province__c]').each(function() {
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid() && Isvalid;
                    });
                }
                console.log(Isvalid+'====@@State_Province__c');
                if(j$(currentcomp).find("[id$=Installed_By_Boat_Builder__c]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=Installed_By_Boat_Builder__c]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=Installed_By_Boat_Builder__c]").valid() && Isvalid;
                }
                console.log(Isvalid+'====@@Installed_By_Boat_Builder__c');
                if(j$(currentcomp).find("[id$=dealerCompanyNameinstalling]").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=dealerCompanyNameinstalling]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=dealerCompanyNameinstalling]").valid() && Isvalid;
                    
                }
                console.log(Isvalid+'====@@dealerCompanyNameinstalling');
                if(j$(currentcomp).find("[id$=dealerCompanyName]").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=dealerCompanyName]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=dealerCompanyName]").valid() && Isvalid;
                }
                console.log(Isvalid+'====@@dealerCompanyName');
                if(j$(currentcomp).find("[id$=ppnumber]").length == 1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid() && Isvalid;
                }
                console.log(Isvalid+'====@@ppnumber');
            
                if('{!checkflag}' == 'true' && globalDealerReq == 'true'){
                Isvalid = true;
                } 
                else if('{!checkflag}' == 'true'){
                Isvalid = true;
                } 
                if('{!checkflag}' == 'true'){
                j$(currentcomp).find("[id$=dealerCompanyName]").removeClass('error');
                j$(currentcomp).find("[id$=Purchasingcountry]").removeClass('error');
                j$(currentcomp).find("[id$=Purchasingcountry]").removeClass('selecterror');
                j$(currentcomp).find("[id$=dealerppnumber]").removeClass('error');
                j$(currentcomp).find("[id$=dealerppnumber]").removeClass('error');
                j$(currentcomp).find("[id$=Installed_By__c]").removeClass('error');
                j$(currentcomp).find("[id$=dealerCompanyNameinstalling]").removeClass('error');
                j$(currentcomp).find("[id$=installingcountry]").removeClass('error');
                j$(currentcomp).find("[id$=installingcountry]").removeClass('selecterror');
                j$(currentcomp).find("[id$=PurDealState_Province__c]").removeClass('selecterror');
                j$(currentcomp).find("[id$=PurDealState_Province__c]").removeClass('error');
                j$(currentcomp).find("[id$=PurDealState_Province__c]").removeClass('requiredRedMarkFld');
                j$(currentcomp).find("[id$=Installed_By_Boat_Builder__c]").removeClass('error');
                }
                console.log(Isvalid+'====@@Final');
                if(Isvalid){
                    j$('.diabledealerClass').removeAttr('disabled');
                    if(param1){
                        showLoadingDiv();
                        if('{!objActivationHardware.Product_Line__c}' == 'Satellite_Communications'){
                            upsertDeal('Authorized_Representative');
                        }else{
                            upsertDeal('Review');
                        }
                    }else{
                        saveandexitfunction(); 
                    }
                    
                }else{
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    var html = "";
                    if(j$(currentcomp).find('[id$=dealerCompanyName]').hasClass("error") && (j$(currentcomp).find("[id$=dealerCompanyName]").valid() == false) && globalDealerReq != 'true'){
                        html += "<li>Purchasing Dealer Name Required</li>";
                    }
                    
                    if(j$(currentcomp).find('[id$=Purchasingcountry]').hasClass("error") && (j$(currentcomp).find("[id$=Purchasingcountry]").valid() == false) && globalDealerReq != 'true'){
                        html += "<li>Select Purchasing Dealer Country</li>";
                    }
                    if(j$(currentcomp).find("[id$=PurDealState_Province__c]").hasClass("error") && (j$(currentcomp).find("[id$=PurDealState_Province__c]").valid() == false) && globalDealerReq != 'true'){
                        html += "<li>Select Purchasing Dealer State</li>";
                    }
                    
                    if(j$(currentcomp).find('[id$=ppnumber]').hasClass("error") && (j$(currentcomp).find("[id$=ppnumber]").valid() == false) && globalDealerReq != 'true'){
                        html += "<li>Purchasing Dealer Phone Number Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=Installed_By__c]').hasClass("error") && (j$(currentcomp).find("[id$=Installed_By__c]").valid() == false) && '{!checkflag}' == 'false'){
                        html += "<li>Select Installed By</li>";
                    }
                    if(j$(currentcomp).find('[id$=dealerCompanyNameinstalling]').hasClass("error") && (j$(currentcomp).find("[id$=dealerCompanyNameinstalling]").valid() == false) && '{!checkflag}' == 'false'){
                        html += "<li>Installing Dealer Name Required </li>";
                    }
                    if(j$(currentcomp).find('[id$=installingcountry]').hasClass("error") && (j$(currentcomp).find("[id$=installingcountry]").valid() == false) && '{!checkflag}' == 'false'){
                        html += "<li>Select Installing Dealer Country</li>";
                    }
                    if(j$(currentcomp).find('[id$=InstallDealState_Province__c]').hasClass("error") && (j$(currentcomp).find("[id$=InstallDealState_Province__c]").valid() == false)){
                        html += "<li>Select Installing Dealer State</li>";
                    }
                    if(j$(currentcomp).find('[id$=Installed_By_Boat_Builder__c]').hasClass("error") && (j$(currentcomp).find("[id$=Installed_By_Boat_Builder__c]").valid() == false)){
                        var dynamicval = j$(currentcomp).find('.factory-install').text().replace(':','');
                        html += "<li>"+dynamicval+" Required</li>"; 
                    }
                    
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
            
            var projectsTemp = [];
            
            function temprun(projectsTemp, param){
                
                j$(param).autocomplete({
                    minLength: 6,
                    source: projectsTemp,
                    focus: function( event, ui ) {
                        if(ui != undefined && ui.item != undefined  && ui != 'undefined' && ui.item != 'undefined' ){
                            if(j$(param).attr('id').indexOf('dealerCompanyNameinstalling') >= 0){
                                j$("[id$=dealerCompanyNameinstalling]").val( ui.item.value );
                                j$("[id$=InstallingDealerCompany]").val( ui.item.Id );
                            }else if(j$(param).attr('id').indexOf('dealerCompanyName') >= 0){
                                j$("[id$=dealerCompanyName]").val( ui.item.value );
                                j$("[id$=ppnumber]").val( ui.item.Phone );
                                j$("[id$=DealerDistributorCompany]").val( ui.item.Id );
                            }
                            sameaspurchasedealer(j$("[id$=Same_as_Purchase_Dealer__c]"), false);
                        }
                        return false;
                    }//you can write for select too
                    /*select:*/
                });
                
                //overriding jquery-ui.autocomplete .js functions
                j$.ui.autocomplete.prototype._renderMenu = function(ul, items) {
                    var self = this;
                    //table definitions
                    ul.append("<table class='ui-menu-item'><thead><tr><th>NAME</th><th>CITY</th><th>STATE</th><th>COUNTRY</th></tr></thead><tbody></tbody></table>");
                    j$.each( items, function( index, item ) {
                        self._renderItemData(ul, ul.find("table tbody"), item );
                    });
                };
                j$.ui.autocomplete.prototype._renderItemData = function(ul,table, item) {
                    return this._renderItem( table, item ).data( "ui-autocomplete-item", item );
                };
                j$.ui.autocomplete.prototype._renderItem = function(table, item) {
                    return j$( "<tr class='ui-menu-item' role='presentation'></tr>" )
                    //.data( "item.autocomplete", item )
                    .append( "<td >"+item.value+"</td>"+"<td>"+item.BillingCity+"</td>"+"<td>"+item.BillingState+"</td>"+"<td>"+item.BillingCountry+"</td>" )
                    .appendTo( table );
                };
            }
            function clearDealerFields(){
            j$("[id$=Purchasingcountry]").val('');
            j$("[id$=dealerCompanyName]").removeClass("requiredRedMarkFld");
            j$("[id$=DealerDistributorCompany]").removeClass("requiredRedMarkFld");
            j$("[id$=Purchasingcountry]").removeClass("requiredRedMarkFld");
            j$("[id$=PurDealState_Province__c]").removeClass("requiredRedMarkFld");
            j$("[id$=dealerppnumber]").removeClass("requiredRedMarkFld");   
            globalDealerReq = 'true';         
            }
            function tempfun(param) {
                console.log(param);
                var tempvalidate = j$(param).val();
                console.log(tempvalidate );
                // console.log('this'+tempvalidate.length  +j$(param).attr('id'));
                if(tempvalidate == '' && tempvalidate.length == 0 && '{!checkFlag}' == 'true')
                    clearDealerFields();
                else
                globalDealerReq = ''; 
                if(j$(param).attr('id').indexOf('dealerCompanyNameinstalling') >= 0){
                    j$("[id$=InstallingDealerCompany]").val('');
                }else if(j$(param).attr('id').indexOf('dealerCompanyName') >= 0){
                    j$("[id$=ppnumber]").val('');
                    j$("[id$=DealerDistributorCompany]").val('');
                }
                sameaspurchasedealer(j$("[id$=Same_as_Purchase_Dealer__c]"), false);
                if(tempvalidate != '' && tempvalidate.length >= 5){
                    console.log(tempvalidate.length);
                    projectsTemp = [];
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.Act_Product_Registration_Controller.getAccountData}', tempvalidate ,
                        function(result, event){
                            projectsTemp = [];
                            if (event.status) {
                                for(var i=0; i<result.length; i++) {
                                    var tempMap = {};
                                    tempMap.value = result[i].Name != undefined ?  result[i].Name : '';
                                    tempMap.BillingCity = result[i].BillingCity != undefined ?  result[i].BillingCity : '';
                                    tempMap.BillingState = result[i].BillingState != undefined ?  result[i].BillingState : '';
                                    tempMap.BillingCountry = result[i].BillingCountry != undefined ?  result[i].BillingCountry : '';
                                    tempMap.Phone = result[i].Phone != undefined ?  result[i].Phone : '';
                                    tempMap.Id = result[i].Id != undefined ?  result[i].Id : '';
                                    projectsTemp.push(tempMap); 
                                } 
                            }
                            console.log(projectsTemp);
                            temprun(projectsTemp, param);
                        }, 
                        {escape: true}
                    );
                }
            }
            
            
            function validateVesselDetail(){
                j$("[id$=vesselIMOnumberIdDetailR]").removeClass('error').next('label.error').remove();
                if('{!objActivationPlatform.Market__c}' == 'Leisure' && '{!objActivationPlatform.Market_Sector__c}' == 'Marine'){
                    j$(".vesselPlatformIdblock").show();
                    j$("[id$=vesselIMOnumberIdDetailR]").addClass('requiredRedMarkFld');
                    if(j$( "[id$=NvesselTypeIdDetail]" ).val() != undefined && j$( "[id$=NvesselTypeIdDetail]" ).val() != '' && j$( "[id$=NvesselTypeIdDetail]" ).val().indexOf('>80 ft') >= 0 && j$( "[id$=NvesselTypeIdDetail]" ).val().indexOf('Megayacht') >= 0){
                        j$(".vesselPlatformIdblock").hide();
                        j$("[id$=NvesselPlatformIdDetail]").val('Other');
                    }else if(j$( "[id$=NvesselTypeIdDetail]" ).val() != undefined && j$( "[id$=NvesselTypeIdDetail]" ).val() != '' && j$( "[id$=NvesselTypeIdDetail]" ).val().indexOf('<80 ft') >= 0 && j$( "[id$=NvesselTypeIdDetail]" ).val().indexOf('Megayacht') == -1){
                        j$("[id$=vesselIMOnumberIdDetailR]").removeClass('requiredRedMarkFld');
                    }
                }
                if(j$('input[id$=vesselIMOnumberIdDetailR]').length>0){
                    j$('input[id$=vesselIMOnumberIdDetailR]').each(function(){
                        j$(this).rules("add",{
                            required: j$(this).hasClass('requiredRedMarkFld'),
                            number: true,
                            IMOValidation : true,
                            minlength: 7,
                            maxlength: 7,
                            messages: {
                                required: ""
                            }
                        });
                    });
                }
            }
            
            function reassignvalues(){
                j$('[id$=serialNumberj]').val('');
                j$('.renderblockfield').hide();
                j$('.kvh-show-errormsg-here').empty();
                j$('.serialnumbersecondlableclass').text('');
                j$('.serialnumberlableclass').text('');
            }
            /* Cancel Button to close window and make Act Order cancelled */
            function cancelProcess(){
                j$( "#cancelPopup" ).popup( "open" );
            }
            function getAssetValue(param){
            var tempvalidate = j$(param).val();
            var CurrentProductListR = j$("[id$='CurrentProductListR']").val();
            var RetiredProductListR = j$("[id$='RetiredProductListR']").val();
            var resultAsset;
            
            if(tempvalidate != '' && tempvalidate.length >= 4 ){
            Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.Act_Product_Registration_Controller.getAssetValue}', tempvalidate ,CurrentProductListR ,RetiredProductListR ,
                        function(result, event){
                            projectsTemp = [];
                            if (event.status) {
                            console.log('result===@==='+result);
                            console.log('tempvalidate ===@==='+tempvalidate );
                            if(result != null)
                            resultAsset = result;
                            
                            }
                        }, 
                        {escape: true}
                    );
                }
            }
            function closeTab(){
                var isInternalUser = '{!internalUser}';
                if(internalUser)
                window.close();
            }
            /* saveandexitfunction -Start */
            function saveandexitfunction(){
                j$( "#Insttype" ).popup( "open" );
            }
            /* saveandexitfunction -End */
            
            /* saveandexitfunction -Start */
            function saveandexitsubfunction(){
                j$( "#saveandExitsubspop" ).popup( "open" );
            }
            /* saveandexitfunction -End */
            
            function returntohomepage(){
                window.top.location = '/home/home.jsp';
            }
            
            // Validator script //
            function validateError(param,param1,param2){
                var Isvalid ;
                var currentcomp  = j$("[id$="+param+"]");
                j$(currentcomp).find('.kvh-show-errormsg-here').empty();
                if(j$(currentcomp).find("[id$=firstname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=firstname]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=lastname]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=lastname]").valid() && Isvalid;
                }
                
                if(j$(currentcomp).find("[id$=email]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=email]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=email]").valid() && Isvalid;
                }
                
                if(j$(currentcomp).find("[id$=country]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=country]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=country]").valid() && Isvalid;
                }
                if(j$(currentcomp).find("[id$=State_Province__c]").length ==1){
                    if(Isvalid == undefined)
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid();
                    else
                        Isvalid = j$(currentcomp).find("[id$=State_Province__c]").valid() && Isvalid;
                }
                
                if('{!$User.Id}' != '{!objActivationOrder.CreatedById}') {           
                    if(j$(currentcomp).find("[id$=address1]").length ==1){
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=address1]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=address1]").valid() && Isvalid;
                    }
                    if(j$(currentcomp).find("[id$=city]").length ==1){
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=city]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=city]").valid() && Isvalid;
                    }
                    if(j$(currentcomp).find("[id$=ppnumber]").length ==1){
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=ppnumber]").valid() && Isvalid;
                    }
                    
                    if(j$(currentcomp).find("[id$=postalcode]").length ==1){
                        if(Isvalid == undefined)
                            Isvalid = j$(currentcomp).find("[id$=postalcode]").valid();
                        else
                            Isvalid = j$(currentcomp).find("[id$=postalcode]").valid() && Isvalid;
                    }
                    if(j$(currentcomp).find("[id$=jobfunction]").length ==1){
                        var tempjob = j$(currentcomp).find("[id$=jobfunction]").valid();
                        if(tempjob == false){
                            j$(currentcomp).find("[id$=jobfunction]").addClass('selecterror');
                        }else{
                            j$(currentcomp).find("[id$=jobfunction]").removeClass('selecterror');
                        }
                        if(Isvalid == undefined){
                            Isvalid = tempjob;
                        }else{
                            Isvalid = tempjob && Isvalid;
                        }
                    } 
                    
                    var ppType = false;
                    if(j$(currentcomp).find("table[id$=PPT]").find('input[type=radio]:enabled').length > 0){
                        j$(currentcomp).find("table[id$=PPT]").find('input[type=radio]:enabled').each(function(){
                            if(j$(this).is(':checked')){
                                ppType = true;
                            }
                        });
                    }else{
                        ppType = true;
                    }
                    if(!ppType){
                        Isvalid = false;
                        j$(currentcomp).find("table[id$=PPT]").addClass('selecterror');
                    }
                    else{
                        j$(currentcomp).find("table[id$=PPT]").removeClass('selecterror');
                    }
                    var spType = false;
                    if(j$(currentcomp).find("table[id$=SPT]").find('input[type=radio]:enabled').length > 0 ){
                        j$(currentcomp).find("table[id$=SPT]").find('input[type=radio]:enabled').each(function(){
                            if(j$(this).is(':checked')){
                                spType = true;
                            }
                        });
                        if(j$(currentcomp).find("[id$=spnumber]:enabled").val() == ''|| j$(currentcomp).find("[id$=spnumber]:enabled").val() == null){
                            spType = true;
                        }
                    }else{
                        spType = true;
                    }
                    
                    if(!spType){
                        Isvalid = false;
                        j$(currentcomp).find("table[id$=SPT]").addClass('selecterror');
                    }
                    else{
                        j$(currentcomp).find("table[id$=SPT]").removeClass('selecterror');
                    }
                }
                if(Isvalid ){
                    if(param1){
                        //alert('save and next!!');
                        showLoadingDiv();
                        callSubscriberSave('Installation_Type');
                    }else{
                        //alert('save and exit!!');
                        saveandexitsubfunction(); 
                    }
                }else{
                    var html = "";
                    var errordiv = currenttabtoshowerror();
                    j$(currentcomp).find('.kvh-show-errormsg-here').append(errordiv);
                    
                    if(j$(currentcomp).find('[id$=firstname]').hasClass("error") && (j$(currentcomp).find("[id$=firstname]").valid() == false)){
                        html += "<li>First/Given Name Required</li>";
                    }
                    if(j$(currentcomp).find('[id$=lastname]').hasClass("error") && (j$(currentcomp).find("[id$=lastname]").valid() == false)){
                        html += "<li>Last/Family Name/Surname Required</li>";
                    } 
                    
                    if(j$(currentcomp).find('[id$=email]').hasClass("error") && (j$(currentcomp).find("[id$=email]").valid() == false)){
                        html += "<li>Valid Email Required</li>";
                    }
                    //console.log('tere--- {!$User.Id}' +'==='+ '{!objActivationOrder.CreatedById}');
                    if('{!$User.Id}' != '{!objActivationOrder.CreatedById}') { 
                        
                        if(j$(currentcomp).find('[id$=ppnumber]').hasClass("error") && (j$(currentcomp).find("[id$=ppnumber]").valid() == false)){
                            html += "<li>Primary Phone Number Required</li>";
                        }
                        if(!ppType){
                            html += "<li>Select Primary Phone Type</li>";
                        }
                        if(!spType){
                            html += "<li>Select Secondary Phone Type</li>";
                        }
                        if(j$(currentcomp).find('[id$=jobfunction]').hasClass("error") && (j$(currentcomp).find("[id$=jobfunction]").valid() == false)){
                            html += "<li>Select Role</li>";
                        }
                        if(j$(currentcomp).find('[id$=address1]').hasClass("error") && (j$(currentcomp).find("[id$=address1]").valid() == false)){
                            html += "<li>Address 1 Required</li>";
                        }
                        if(j$(currentcomp).find('[id$=city]').hasClass("error") && (j$(currentcomp).find("[id$=city]").valid() == false)){
                            html += "<li>City Required</li>";
                        }
                        if(j$(currentcomp).find('[id$=postalcode]').hasClass("error") && (j$(currentcomp).find("[id$=postalcode]").valid() == false)){
                            html += "<li>Postal/Zip Code Required</li>";
                        }
                    }
                    if(j$(currentcomp).find('[id$=country]').hasClass("error") && (j$(currentcomp).find("[id$=country]").valid() == false)){
                        html += "<li>Select Country</li>";
                    }
                    if(j$(currentcomp).find('[id$=State_Province__c]').hasClass("error") && (j$(currentcomp).find("[id$=State_Province__c]").valid() == false)){
                        html += "<li>Select State/Province/Territory</li>";
                    }
                    j$(currentcomp).find('.error-box').find('.bullets').html(html);
                    j$(currentcomp).find('.error-box').show();
                }
            }
            //Close tab in Console    
            var callCloseTab= function callCloseTab(result) {
                sforce.console.closeTab(result.id);
            }               
            function closeConsoleTab(){
                if('{!internalUser}'){
                    if (sforce.console.isInConsole()) {
                          sforce.console.getEnclosingTabId(callCloseTab);
                       } else {
                          window.close();
                    }
                }
            }
            </script>
            
            <!-- Custom CSS Start -->
            <style>
                form{
                font-size: 110%;
                }
                input, select, textarea{
                font-size: 1.2em !important;
                color:black !important;
                }
                .activeTab {
                color: #000000;
                text-shadow: none;
                background: white !important;
                border-bottom: 3px solid #1f83ad !important;
                margin: 0;
                cursor: pointer;
                }
                
                .inactiveTab { 
                display: inline-block;
                padding: 10px 15px;
                text-decoration: none;
                color: #1f83ad;
                cursor: pointer;
                }
                
                .inputfilecss{
                width: 80% !important;
                color: #4a4a4a !important;
                border: 1px solid #ccc !important;
                background-color: #fff !important;
                padding: 8px !important;
                border-radius: 3px !important;
                font-size: 1em !important;
                }
                h3 {
                font-size: 1.6em;
                font-weight: lighter;
                }
                .documents td.heading {
                background: #ddd;
                font-size: 115%;
                }
                .remodal, [data-remodal-id] {
                display: inline-block;
                }
                .small-button{
                padding: 5px !important;
                padding-top: 8px !important;
                }
                .rich-tabhdr-side-cell {
                border: none !important;
                }
                .rich-tabpanel-content {
                box-shadow: none;
                background: white;
                border: none;
                }
                .rich-tabhdr-side-border {
                background: none !important;
                }
                h2 {
                font-size: 1.7em;
                padding-bottom: 0px;
                padding-top: 20px;
                }
                .marginbottom{
                margin-bottom :10px;
                }
                .loadingStatus {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                list-style: none;
                z-index: 9999;
                }
                
                .loadingStatus .img {
                width: 32px;
                margin: 0 auto;
                }
                .invalidserial {
                position: relative;
                background: #cc0000;
                color: #fff;
                padding: 10px;
                border-radius: 3px;
                margin-top: 10px;
                }
                
                .invalidserial:after, label.error:not(:empty):after {
                bottom: 100%;
                left: 50%;
                border: solid transparent;
                content: " ";
                height: 0;
                width: 0;
                position: absolute;
                pointer-events: none;
                border-color: rgba(204, 0, 0, 0);
                border-bottom-color: #cc0000;
                border-width: 5px;
                margin-left: -5px;
                }
                .info-box h5 {
                color: #1f83ad;
                font-weight: bold;
                padding-bottom: 5px;
                font-size: 1em;
                }
                .loadingBox {
                display: none;
                background: #000000;
                opacity: 0.7;
                filter: alpha(opacity=45);
                position: fixed;
                top: 0px;
                left: 0px;
                min-width: 100%;
                min-height: 100%;
                z-index: 9999;
                }
                
                .requiredRedMarkFld{
                border-left:4px solid #cc0000 !important;
                padding-left: 4px !important;
                }
                
                .error{
                border-top: 1px solid #cc0000 !important;
                border-bottom: 1px solid #cc0000 !important;
                color: #cc0000 !important;
                }
                .r-tabs .r-tabs-panel {
                box-shadow: none;
                border-top: 1px solid #c7c7c7;
                }
                .rich-tab-disabled{
                color:#888 !important;
                }
                .rich-tabpanel-content{
                box-shadow: none;
                }
                .rich-tab-header{
                padding: 10px!important;
                vertical-align:middle !important;
                background: white;
                font-size: inherit;
                }
                .rich-tab-bottom-line {
                border-bottom: 1px solid #c7c7c7;
                }
                label.error:empty{
                border-top: 1px solid white !important;
                border-bottom: 1px solid white !important;
                color: white !important;
                display:none !important;
                }
                
                label.error:not(:empty){ 
                position: relative;
                background: #cc0000;
                color: #fff !important;
                padding: 10px;
                width: 100%;
                font-size: inherit;
                font-weight: normal !important;
                border-radius: 3px;
                }
                
                .error-box{ 
                border:1px solid #cc0000; 
                width: 100%;
                color: #cc0000;
                font-size: 1.2em !important;
                border-radius:3px; 
                margin-bottom:20px;
                margin-top: 10px;
                }
                
                .selecterror{
                border : 1px solid #cc0000;
                box-shadow : 0 0 5px 0 rgb(204, 0, 0);
                }
                
                .error-box h1{ 
                background:#cc0000; 
                color:#fff !important; 
                font-size:1em !important; 
                padding:5px; 
                margin-bottom:10px; 
                }
                
                .error-box li{ 
                margin-left:20px; 
                } 
                
                #display-error {
                width: 100%;
                margin-top: 10px;
                border: 1px solid #D8D8D8;
                padding: 5px;
                border-radius: 5px;
                font-family: Arial;
                font-size: 11px;
                text-transform: uppercase;
                background-color: red;
                color: white;
                text-align: center;
                }
                
                img.err {
                float: left; 
                }
                .not-bold {
                font-weight: normal;
                }
                
                .bulletErrors {
                list-style-type: square !important;
                }
                
                .tooltip {
                display: inline-block;
                }
                
                .fontTip {
                font-size: 10px;
                }
                
                .tooltip .tooltiptext {
                visibility: hidden;
                width: 250px;
                background-color: white;
                border: 1px solid black;
                color: block;
                text-align: center;
                border-radius: 6px;
                padding: 5px 0;
                
                /* Position the tooltip */
                position: absolute;
                z-index: 1;
                }
                
                .btnoverride{
                text-decoration: none !important;
                cursor: pointer !important;
                background-color: #f6f6f6;
                border-color: #ddd !important;
                color: #333 !important;
                text-shadow: 0 1px 0 #f3f3f3 !important;
                width: 100px !important;
                font-size: 75% !important;
                padding: 10px !important;
                }
                
                .tooltip:hover .tooltiptext {
                visibility: visible;
                }
                
                select {
                width: 100%;
                padding: 2px 2px 5px;
                border: 1px solid #c7c7c7;
                background-color: #fff;
                }
                
                .kvh-hide-field{
                display:none;
                }
                .required {
                float: right;
                font-size: .875em;
                }
                
                .remodalAgain{
                max-width: 500px !important;
                min-width: 500px !important;
                min-height: 50px !important;
                margin: 0px auto !important;
                border-radius: 6px !important;
                }
                
                .button {
                padding: 10px 15px;
                border: 1px solid #ddd;
                text-transform: uppercase;
                text-decoration: none;
                font-weight: bold;
                display: inline-block;
                color: #cc0000;
                border-radius: 3px;
                font-size: 100% !important;
                }
                
                .KVH-table > thead > tr> th{
                padding: 10px 15px !important;
                margin: 0 !important;
                background: #e3e3e3 !important;
                color: #666 !important;
                }
                
                .KVH-table {
                border: 1px solid #ddd !important;
                }
                
                .KVH-table > tbody > tr> td > a, .KVH-table > tbody > tr> td > span > a {
                font-weight: normal !important;
                }
                
                .ui-mobile label, .ui-controlgroup-label {
                display: -webkit-inline-box;
                margin: 0 0 .4em;
                }
                .ui-mobile label, div.ui-controlgroup-label {
                font-weight: 400;
                font-size: 13px;
                } 
                table.collapse-panels {
                width: 100%;
                margin: 0 auto 20px 0;
                border: 1px solid #ddd;
                -moz-border-radius: 3px;
                border-radius: 3px;
                border-collapse: separate;
                line-height: normal;
                }
                table.collapse-panels th {
                background: #f3f3f3;
                text-align: left;
                font-weight: bold !important;
                color: #444;
                padding: 10px;
                border-bottom: 1px solid #ddd;
                }
                ul.terms {
                list-style-type: disc;
                }
                .pad-left {
                margin-left: 20px;
                }
                ol, ul {
                list-style: none;
                }
                
                ol li, ul.terms li {
                padding: 0 0 10px 5px;
                text-align: left;
                }
                .validateSkipButton{
                margin-left: 33%;
                background-color: #f3f3f3 !important;
                color: gray !important;
                border: 1px solid #ddd;
                }
                .req-field {
                border-left: 4px solid #cc0000 !important;
                }
                p{
                margin-bottom: 25px;
                }
                .form {
                width: 100%;
                }
                label{
                font-weight: bold !important;
                margin: 9px 0px 0px 0px !important;
                }
                select {
                width: 100%;
                font-size: small;
                padding: 6px 2px 9px;
                border: 1px solid #c7c7c7;
                background-color: #fff;
                }
                .button-blue {
                color: #fff !important;
                }
                .renderblockfield{
                display: none;
                }
                .ui-menu-item th{
                background-color: #30445b; 
                color           : white;
                padding-left    : 10px;
                padding-right   : 10px;
                
                height          : 30px;
                text-align      : left;
                }
                .ui-menu-item td{
                background-color: white; 
                color           : black;
                padding-left    : 10px;
                padding-right   : 10px;
                
                }
                .ui-menu-item  tr:hover td{
                background-color: #e3f3ff; 
                color           : black;
                padding-left    : 10px;
                padding-right   : 10px;
                }
                .ui-menu-item{
                background-color: #f3f3f3;
                width           : 100%;
                }
                .disabledlookclass{
                background : #f1f1f1 !important;
                pointer-events: none;
                }
                .phone-types fieldset {
                display: inline;
                float: right;
                margin-right: 2%;
                }
                .two-col {
                width: 48%;
                margin-bottom: 30px;
                }
                .phonetypescss{
                padding-right: 10px;
                font-weight: 100 !important;
                font-size: 11px;
                }
            </style>
            <!-- Custom CSS Start -->
        </head>
        <!-- ** Head tag End ** -->
        
        <!-- ** Body tag Start ** -->
        <body class="ui-mobile-viewport ui-overlay-a" style="zoom: 1;">
            <div data-role="page" style="overflow: hidden;"  tabindex="0" class="ui-page ui-page-theme-a ui-page-active">
                <!-- <apex:insert name="header">
<c:myKVHSiteHeader />
</apex:insert>  -->
                <header>
                    <div class="width-100 header header-partner-portal">
                        <div class="bg-10 left simple-header" style="height:60px; padding:15px 20px;">
                            <img src="{!URLFOR($Resource.myKVHProductRegistration, 'images/logo_mykvh_white.png')}" class="width-100" style="max-width:130px;"/>
                        </div>
                        <h1 class="pad-15">Portal</h1>
                    </div>
                </header>
                <apex:outputPanel layout="none" id="completererender">
                    
                    <!-- ** Form tag Start ** -->
                    <apex:form id="theForm" enctype="multipart/form-data">
                        <script>
                        j$( document ).ready(function() {
                        console.log('{!checkFlag}'+'=======CheckFlag');
                            j$("input[type=radio][name=MarketTypeSelection]").each(function(){
                                // console.log(j$(this).data('passkey'));
                                //console.log('{!selectedMarketType}');
                                if(j$(this).data('passkey') !=null && j$(this).data('passkey')!= '' && '{!selectedMarketType}' == j$(this).data('passkey')){
                                    j$(this).attr('checked','checked').attr('disabled', 'disabled').css('cursor', 'none !important;').next('label').css('cursor', 'none !important;');
                                }
                            });
                        });
                        </script>
                        <div class="loadingStatus" id="loadingDiv">
                            <div class="">
                                <div class="img "><img src="/img/loading.gif" style="width: 30px;"/></div>
                            </div>
                        </div>
                        <div id="loadingBox" class="loadingBox"></div>
                        
                        <!-- ** Action Function Start **-->  
                        <apex:actionFunction name="returnHomeAF" action="{!returnHome}" reRender="theForm">
                        </apex:actionFunction> 
                        <apex:actionFunction name="btnSelectedtosave" action="{!updateActivationPlatformMarketTab}" oncomplete="hideLoadingDiv();" reRender="theForm">
                            <apex:param name="param5" assignTo="{!selectedMarketType}" value="" />
                        </apex:actionFunction> 
                        <apex:actionFunction name="upsertDeal" action="{!upsertDealer}" oncomplete="hideLoadingDiv();" reRender="theForm">
                            <apex:param name="param9" assignTo="{!selectedTab}" value="" />
                        </apex:actionFunction> 
                        <apex:actionFunction name="btnSelectedVesselVehicle" action="{!updateActivationPlatformMarketTab}" reRender="theForm">
                            <apex:param name="param3" assignTo="{!selectedTab}" value="" />
                        </apex:actionFunction>
                        <apex:actionFunction name="btnSelectednavigateBack" action="{!goToTab}" oncomplete="hideLoadingDiv();" reRender="theForm" >
                            <apex:param name="param4" assignTo="{!selectedTab}" value="" />
                        </apex:actionFunction> 
                        <!--
                        <apex:actionFunction name="createActOrderCase" action="{!createActivitionOrderCase}" reRender="theForm" />
                        -->
                        <apex:actionFunction name="btnSelectednavigateNext" action="{!goToTab}" oncomplete="hideLoadingDiv();" immediate="true" reRender="theForm" >
                            <apex:param name="param1" assignTo="{!selectedTab}" value="" />
                        </apex:actionFunction>
                        <apex:actionFunction name="upsertActivationHardwareJS" action="{!upsertActivationHardwareTab}"  reRender="theForm"> <!-- oncomplete="showLoadingDiv();btnSelectednavigateBack('Product');" -->
                            <apex:param name="fname" value="" assignTo="{!strfilename}" />
                            <apex:param name="ftype" assignTo="{!strAttachmentType}" value="" />
                            <apex:param name="fbody" value="" assignTo="{!strbody}"/>
                            <apex:param name="firstnumberlabel" value=""/>
                            <apex:param name="secondnumberlabel" value=""/>
                            <apex:param name="param8" assignTo="{!selectedTab}" value="Platform" />
                        </apex:actionFunction>
                        
                        <apex:actionFunction name="upsertAttachmentJS" action="{!saveAttachment}" reRender="attachmentblockrr" oncomplete="hideLoadingDiv();"> <!-- oncomplete="showLoadingDiv();btnSelectednavigateBack('Product');" -->
                            <apex:param name="fname" value="" assignTo="{!strfilename}" />
                            <apex:param name="ftype" assignTo="{!strAttachmentType}" value="" />
                            <apex:param name="fbody" value="" assignTo="{!strbody}"/>
                        </apex:actionFunction>
                        <apex:actionFunction name="validateAssetJS" action="{!validateAsset}" oncomplete="hideLoadingDiv();if({!intCounter} == 1) j$('.invalidserial').show(); else j$('.invalidserial').hide();" reRender="none,theHiddenInput" >
                        </apex:actionFunction>
                        <apex:actionFunction name="callauthorizedRepSave" action="{!upsertActivationContact}" rerender="theForm" oncomplete="hideLoadingDiv();">
                        </apex:actionFunction>
                        <apex:actionFunction name="savesubmit" action="{!savesubmitflow}" oncomplete="hideLoadingDiv();" reRender="theForm" >
                        </apex:actionFunction>
                        <apex:actionFunction name="saveaddnew" action="{!savesubmitaddflow}" oncomplete="hideLoadingDiv();" reRender="theForm" >
                        </apex:actionFunction>
                        <apex:actionFunction name="confirmsaveandexit" action="{!saveandExit}" reRender="theForm" oncomplete="closeTab();">
                        </apex:actionFunction>
                        <apex:actionFunction name="removeattach" action="{!removeAttachment}" oncomplete="hideLoadingDiv();" reRender="attachmentblockrr" >
                            <apex:param name="replaceAttachmentId" value="" assignTo="{!strAttachmentId}" />
                        </apex:actionFunction>
                            <apex:actionFunction name="confirmcancelProcess" action="{!cancelProcess}" oncomplete="closeConsoleTab();hideLoadingDiv();">
                        </apex:actionFunction>
                        <!-- ** Action Function End **--> 
                        
                        <div>
                            <apex:outputPanel layout="block" id="wrapper" style="max-width: {!IF(objActivationOrder.Activation_Type__c != 'Self Registration','900px', '850px')}" styleClass="tabs-wrap">
                                <!-- ** TabPanel Start **-->
                                <div style="float:left;">  <h1 class="title">Product Registration</h1></div>
                                <div class="required"> <span class="requiredRedMarkFld"></span> = Required field</div>
                                <br/><br/><br/>
                                <div id="horizontalTab" class="r-tabs">
                                    
                                    <apex:tabPanel switchType="client" activeTabClass="activeTab" inactiveTabClass="inactiveTab" styleClass="r-tabs" value="{!selectedTab}" id="theTabPanel" > 
                                        
                                        <!-- ** Main Contact  Tab Start  ** -->
                                        <apex:tab switchType="client" label="Main Customer Contact" rendered="{!objActivationOrder.Activation_Type__c != 'Self Registration'}" name="Subscriber_Information" id="Subscriber_Information" 
                                                  onTabEnter="showLoadingDiv();btnSelectednavigateBack('Subscriber_Information');" disabled="{!IF(mapdisableProductRegistrationTabs['Subscriber_Information'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c,true,false)}">
                                                                                        <apex:outputPanel rendered="{!checkflag == true}">
                                            <div style="border-bottom: 1px solid #ccc;">               
                                            <h2>Main Customer Contact</h2>
                                            <p><strong>IMPORTANT NOTE:</strong> When submitting a product registration <strong><em>on behalf of your customer</em></strong>, you <strong>MUST</strong> provide the customer&quot;s information for the following required fields:</p>
                                            <div class="width-25 left">
                                            <ul class="list">
                                            <li>First/Given Name</li>
                                            <li>Last/FamilyName/Surname</li>
                                            <li>Email</li>
                                            <li>State/Province/Territory</li>
                                            </ul>
                                            </div>
                                            <div class="width-70 right">
                                            <ul class="list">
                                            <li>Country</li>
                                            <li>Product Line</li>
                                            <li>Product</li>
                                            <li>Primary Serial Number</li>
                                            </ul>
                                            </div>
                                            <div class="clear"></div>
                                            <p>To facilitate your customer&quot;s registration you may also enter any other information you may have available. Once you submit the form to KVH, we will then email the partially completed registration to your customer to review, complete and submit and will notify the customer and you when the registration has been validated and is active.</p>
                                            </div>
                                            </apex:outputPanel>

                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Subscriber_Information'}">
                                                
                                                <c:Activation_Subscriber newProductVal="{!newProduct}" checkPortalFlag="{!checkFlag}" pageOrderID="{!$CurrentPage.Parameters.order}" pageStatus="{!objActivationStatus}" id="Act_subscriber" rendered="{!(objActivationStatus.Account_Setup_Active_Tab__c == 'Subscriber_Information')}" />
                                                <script>
                                                j$( document ).ready(function(){
                                                    var currentcomp  = document.getElementById('{!$Component.Subscriber_Information}');
                                                    
                                                    if('{!$User.Id}' == '{!objActivationOrder.CreatedById}') { 
                                                        
                                                        j$(currentcomp).find('[id$=ppnumber]').removeClass("requiredRedMarkFld");
                                                        
                                                        j$(currentcomp).find('[id$=jobfunction]').removeClass("requiredRedMarkFld");
                                                        
                                                        j$(currentcomp).find('[id$=address1]').removeClass("requiredRedMarkFld");
                                                        
                                                        j$(currentcomp).find('[id$=city]').removeClass("requiredRedMarkFld");
                                                        
                                                        j$(currentcomp).find('[id$=postalcode]').removeClass("requiredRedMarkFld");
                                                        
                                                    }
                                                    
                                                    j$(currentcomp).find('.mainTitle').text('Main Customer Contact').css("padding-left", "5px").next('p').remove();
                                                    j$(currentcomp).find('.box-content:last').find('p:first').css("margin-bottom", "20px").css("padding-top", "5px");
                                                    j$(currentcomp).find('.validator').find('label').css("padding-bottom", "5px").css("color", "#252424");
                                                    j$(currentcomp).find('.validator').find('fieldset').find('label:not(:last)').addClass('phonetypescss');
                                                    j$(currentcomp).find('.validator').find('fieldset').find('label:last').addClass('phonetypescss').css("padding-right: ", "0px");
                                                    j$('[id$=Act_subscriber]').find('.box-content:first').css("margin-top", "-20px").css("margin-left", "8px");
                                                    j$('[id$=Act_subscriber]').find('a.button').addClass('button-blue').text('Next');
                                                    j$('[id$=Act_subscriber]').find('a.clear').addClass('pad-right').removeClass('clear').css("font-size", "small").css("font-weight", "normal");
                                                });
                                                </script>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        <!-- ** Main Contact Tab End  ** -->
                                        
                                        <!-- ** Installation Type Tab Start  ** -->
                                        <apex:tab switchType="client" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Installation_Type', 'rich-tab-active','rich-tab-inactive')}" label="Installation Type" name="Installation_Type" id="Installation_Type"  disabled="{!IF((mapdisableProductRegistrationTabs['Installation_Type'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c),true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateBack('Installation_Type');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Installation_Type'}">
                                                <div>
                                                    <h2>Installation Type</h2>
                                                </div>
                                                <!--** div contain error msg contents -Start **-->
                                                <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                </div>
                                                <!--** div contain error msg contents -End **-->
                                                
                                                <div class="section group">
                                                    <div class="col span_6_of_12">
                                                        <div class="info-box border">
                                                            <h3>At Sea <a href="#vessel-types" style="text-decoration: underline;font-size: small;padding-left: 5%;font-weight: normal;" data-rel="popup" data-position-to="window" data-transition="pop" class="pad-left ui-link right font-75" aria-haspopup="true" aria-owns="vessel-types" aria-expanded="false">Vessel Type Examples</a></h3>
                                                            <div class="content matchheight" style="height: 190px;">
                                                                <p style="padding-top: 10px;"> <input type="radio" style="cursor: pointer;" id="CommercialVessel" name="MarketTypeSelection" data-passkey="Commercial Vessel"  value="Commercial Vessel" data-role="none"/>
                                                                    <label for="CommercialVessel" style="cursor: pointer;">Commercial Vessel</label>
                                                                </p>
                                                                <p> <input type="radio" style="cursor: pointer;" id="LeisureVessel" name="MarketTypeSelection" data-passkey="Leisure Vessel" value="Leisure Vessel" data-role="none"/>
                                                                    <label for="LeisureVessel" style="cursor: pointer;">Leisure Boat or Yacht</label>
                                                                </p>
                                                                <p> <input type="radio" style="cursor: pointer;" id="MilitaryGovernmentVessel" name="MarketTypeSelection" data-passkey="Military/Government Vessel" value="Military/Government Vessel" data-role="none"/>
                                                                    <label for="MilitaryGovernmentVessel" style="cursor: pointer;">Military/Government Vessel</label>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col span_6_of_12">
                                                        <div class="info-box border">
                                                            <h3>On Land <a href="#vehicle-types" style="text-decoration: underline;font-size: small;padding-left: 5%;font-weight: normal;" data-rel="popup" data-position-to="window" data-transition="pop" class="pad-left ui-link right font-75" aria-haspopup="true" aria-owns="vehicle-types" aria-expanded="false">Vehicle Type Examples</a></h3>
                                                            <div class="content matchheight" style="height: 190px;">
                                                                <p style="padding-top: 10px;"> <input type="radio" style="cursor: pointer;" id="CommercialLandVehicles" name="MarketTypeSelection" data-passkey="Commercial Vehicle/Platform"  value="Commercial Vehicle/Platform" data-role="none"/>
                                                                    <label for="CommercialLandVehicles" style="cursor: pointer;">Commercial Vehicle/Platform</label>
                                                                </p>
                                                                <p><input type="radio" style="cursor: pointer;" id="LeisureRVVehicle" name="MarketTypeSelection" data-passkey="Leisure RV" value="Leisure RV" data-role="none"/>
                                                                    <label for="LeisureRVVehicle" style="cursor: pointer;">Leisure RV</label>
                                                                </p>
                                                                <p><input type="radio" style="cursor: pointer;" id="LeisureAutomobileVehicle" name="MarketTypeSelection" data-passkey="Leisure Automobiler" value="Leisure Automobiler" data-role="none"/>
                                                                    <label for="LeisureAutomobileVehicle" style="cursor: pointer;">Leisure Automobile</label>
                                                                </p>
                                                                <p> <input type="radio" style="cursor: pointer;" id="MilitaryGovernmentLandVehicles" name="MarketTypeSelection" data-passkey="Military/Government Vehicle/Platform" value="Military/Government Vehicle/Platform" data-role="none"/>
                                                                    <label for="MilitaryGovernmentLandVehicles" style="cursor: pointer;">Military/Government Vehicle/Platform</label>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="clear"></div>
                                                <div class="button-bar">
                                                    
                                                    <apex:commandLink styleClass="button left button-blue" value="Back" rendered="{!objActivationOrder.Activation_Type__c != 'Self Registration'}" onclick="showLoadingDiv();btnSelectednavigateBack('Subscriber_Information'); return false;" >
                                                    </apex:commandLink>
                                                    <apex:commandLink styleClass="button right button-blue" value="Next" onclick="checkBtnSelected('{!$Component.Installation_Type}',true); return false;" >
                                                    </apex:commandLink>
                                                    <!--  <apex:commandLink styleClass="right pad-right pad-top"  style="font-size: small;font-weight: normal;" value="Save & Exit" onclick="checkBtnSelected('{!$Component.Installation_Type}',false); return false;"/> -->
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        <apex:inputField id="hiddenMarket" value="{!objProductRegistrationManagement.Market__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                        <div id="hiddenMarketSectorDiv">
                                            <apex:inputField id="hiddenMarketSector" value="{!objProductRegistrationManagement.Market_Sector__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                        </div>
                                        <script>
                                        dependentPicklist('hiddenMarketSectorDiv','kvh-hide-field', '');
                                        </script>
                                        <apex:inputField id="hiddenMarketPlatform" value="{!objActivationPlatform.Market__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                        <div id="hiddenMarketSectorDiv">
                                            <apex:inputField id="hiddenMarketSectorPlatform" value="{!objActivationPlatform.Market_Sector__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                        </div>
                                        <script>
                                        dependentPicklist('hiddenMarketSectorDiv','kvh-hide-field', '');
                                        </script>
                                        <apex:tab switchType="client" label="Product" name="Product" id="Product" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Product', 'rich-tab-active','rich-tab-inactive')}" disabled="{!IF(mapdisableProductRegistrationTabs['Product'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c,true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateNext('Product');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Product'}">
                                                
                                                <div class="form newproductlayout">
                                                    <h2>Product Details</h2>
                                                    
                                                    <!--** div contain error msg contents -Start **-->
                                                    <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                    </div>
                                                    <!--** div contain error msg contents -End **-->
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Select Product Line:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <span id="productLineIdDetailDiv">
                                                                <apex:actionRegion >
                                                                    <apex:inputField id="productLineIdDetail" styleClass="{!IF(OR(objActivationOrder.Order_Status__c = 'Submitted',AND($User.Id == objActivationOrder.CreatedById,objActivationOrder.Activation_Type__c == 'Registration on behalf of Customer',objActivationOrder.Order_Status__c == 'Pending Customer Confirmation')), 'disabledlookclass ', '')} requiredRedMarkFld" value="{!objProductRegistrationManagement.Product_Line__c}" html-tabIndex="1" html-data-role="none" >
                                                                        <apex:actionSupport event="onchange" action="{!fetchCurrentRetired}" onsubmit="showLoadingDiv();reassignvalues();" oncomplete="hideLoadingDiv();" reRender="productBlock"  />
                                                                    </apex:inputField>
                                                                </apex:actionRegion>
                                                            </span>
                                                            <script>
                                                            dependentPicklist('productLineIdDetailDiv','requiredRedMarkFld', '1');
                                                            </script>  
                                                        </div>
                                                    </div>
                                                    
                                                    <apex:outputPanel id="productBlock" layout="none" >
                                                        <div class="kvh-hide-field" >
                                                            <apex:inputField id="hiddenCatelogDependency" value="{!objProductRegistrationManagement.Hidden_Dependency_Product__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                                            <div id="hiddenVisibleLinesDiv">
                                                                <apex:inputField id="hiddenVisibleLines" value="{!objProductRegistrationManagement.Hidden_Visible_Lines__c}" styleClass="kvh-hide-field" html-data-role="none"/>
                                                            </div>
                                                            <script>
                                                            dependentPicklist('hiddenVisibleLinesDiv','kvh-hide-field', '');
                                                            </script>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Select Product:</label>
                                                            </div>
                                                            <div class="col span_4_of_12">
                                                                <apex:selectList size="1" html-data-role="none" multiselect="false" tabIndex="2"  id="CurrentProductListR" value="{!strSelectedCurrentProduct}">
                                                                    <apex:selectOptions value="{!lstCurrent}"></apex:selectOptions>
                                                                    <apex:actionSupport event="onchange" onsubmit="showLoadingDiv();j$('[id$=hiddenCatelogDependency]').val(j$('[id$=CurrentProductListR]').val());" oncomplete="hideLoadingDiv();showproperblock();" action="{!onchangeCurrent}" reRender="productBlock" />
                                                                </apex:selectList>
                                                            </div>
                                                            <div class="col span_1_of_12 center">
                                                                OR
                                                            </div>
                                                            <div class="col span_4_of_12">
                                                                <apex:selectList size="1" html-data-role="none" multiselect="false" tabIndex="3" id="RetiredProductListR" value="{!strSelectedRetiredProduct}">
                                                                    <apex:selectOptions value="{!lstRetired}"></apex:selectOptions> 
                                                                    <apex:actionSupport event="onchange" onsubmit="showLoadingDiv();j$('[id$=hiddenCatelogDependency]').val(j$('[id$=RetiredProductListR]').val());" oncomplete="hideLoadingDiv();showproperblock();" action="{!onchangeRetired}" reRender="productBlock"/>
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="section group renderblockfield">
                                                            <div class="col span_3_of_12">
                                                                <label class="serialnumberlableclass"></label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                 <apex:inputText id="firstserialnumber" onblur="requiredserialnumber('{!$Component.Product}'); return false;" styleClass="requiredRedMarkFld" value="{!objActivationHardware.Antenna_Serial_Number__c}"  tabIndex="4" maxlength="100" size="100" html-data-role="none" >
                                                                </apex:inputText>
                                                                <apex:inputHidden value="{!intCounter}" id="theHiddenInput"/>
                                                                <div class="invalidserial" style="display:none;">
                                                                    We did not find this serial number in our system. Please try again.
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="section group renderblockfield">
                                                            <div class="col span_3_of_12">
                                                                <label class="serialnumbersecondlableclass"></label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputText id="secondserialnumber" value="{!objActivationHardware.Below_Decks_Serial_Number__c}" styleClass="chkcheckbox" tabIndex="4" maxlength="100" size="100" html-data-role="none" />
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Purchase Date:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputText id="ServiceStartDate"  html-data-role="none" styleClass="requiredRedMarkFld" value="{!strServiceStartDate}" />
                                                        </div>
                                                    </div>
                                                    
                                                    <apex:outputPanel id="attachmentblockrr">
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Attach Proof of Purchase:</label>
                                                                <span class="notes" style="font-size: 100%;">Maximum upload file size: 5 MB</span>
                                                            </div>
                                                            <div class="col span_9_of_12" style="padding: 0px 0px 0px 0px !important;">
                                                                <apex:outputPanel id="attachmentblk">
                                                                    <div style="display:{!IF(objActivationHardware.Have_Proof_of_Purchase__c == false ,'block','none')}" >
                                                                        <apex:variable value="{!1}" var="i"/>
                                                                        <apex:repeat value="{!lstAttachments}" var="objAttachment">
                                                                            <div class="">
                                                                                <div class="col span_6_of_12" style="{!IF(i ==1,'padding-top: 25px;','')}">
                                                                                    <apex:outputLink value="{!URLFOR($Action.Attachment.Download, objAttachment.Id)}" target="_blank">{!objAttachment.name}</apex:outputLink>
                                                                                </div>
                                                                                <div class="col {!IF(i < lstAttachments.size,'span_6_of_12','span_2_of_12')}">
                                                                                    <a class="button small-button font-85" data-role="none" value="Remove" onclick="showLoadingDiv();removeattach('{!objAttachment.Id}');" >
                                                                                        Remove
                                                                                    </a>
                                                                                </div>
                                                                                <div class="col span_4_of_12" style="display: {!IF(i == lstAttachments.size , 'Block', 'none')}">
                                                                                    <apex:commandLink styleClass="button small-button font-85" html-data-role="none" value="Add Another" onclick="j$('.inputfileblock').show(); return false;" >
                                                                                        <apex:param name="addAttachmentId" value="" assignTo="{!strAttachmentId}" />
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                <apex:variable value="{!i+1}" var="i"/>
                                                                            </div>
                                                                        </apex:repeat>
                                                                        <span style="display: {!IF(lstAttachments.size == 0 , 'Block', 'none')}" data-role="none" class="inputfileblock">
                                                                            <div class="section group">
                                                                                <div class="col span_6_of_12">
                                                                                    <input type="text" data-role="none" id="inputfiletext" Class="requiredRedMarkFld disabledlookclass" value=""/>
                                                                                </div>
                                                                                <div class="col span_2_of_12">
                                                                                    <label style="max-width: 66px;margin: 0px 0px 0px 0px !important; padding: 8px !important; cursor: pointer;" data-role="none" class="button small-button font-85">
                                                                                        <span>
                                                                                            Browse  
                                                                                            <input type="file" style="display: none;" data-role="none" id="fileId" name="attFile" Class="inputfilecss requiredRedMarkFld"/>
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                                <div class="col span_1_of_12">
                                                                                    <a class="button small-button font-85" data-role="none" value="Save" onclick="saveAttachmentData('{!$Component.Product}');">
                                                                                        Save
                                                                                    </a>
                                                                                </div>
                                                                                <div class="col span_3_of_12" style="padding-top: 23px;text-decoration: underline;cursor: pointer;">
                                                                                    <a  href="#" data-role="none" style="display: {!IF(lstAttachments.size == 0 , 'none', 'Block')}" value="cancel" onclick="j$('.inputfileblock').hide();">
                                                                                        Cancel
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </span>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                
                                                                <apex:inputField id="haveproofofpurchase" style="margin-top: 8px;"  html-data-role="none" value="{!objActivationHardware.Have_Proof_of_Purchase__c}" >
                                                                    <apex:actionSupport event="onchange" action="{!allAttachhments}" onsubmit="showLoadingDiv();" oncomplete="hideLoadingDiv();" reRender="attachmentblockrr" />
                                                                    &nbsp; I do not have Proof of Purchase
                                                                </apex:inputField><br/>
                                                                <span class='notes'>Note: Proof of Purchase is required for warranty support.</span>
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                                
                                                <div class="button-bar">
                                                    <apex:commandLink styleClass="button left button-blue" value="Back" onclick="showLoadingDiv();btnSelectednavigateBack('Installation_Type'); return false;" >
                                                    </apex:commandLink>
                                                    <apex:commandLink styleClass="button right button-blue" value="Next"  onclick="saveData('{!$Component.Product}', true); return false;" > <!-- style="pointer-events:{!IF(lstActivationHardwares.size == 0 ,'none;','auto;')}" -->
                                                    </apex:commandLink>                                                    
                                                    <apex:commandLink styleClass="right pad-right pad-top" style="font-size: small;font-weight: normal;" value="Cancel"  onclick="cancelProcess();" rendered="{! (checkflag && !internalUser)}" reRender="none"/>
                                                    <apex:commandLink styleClass="right pad-right pad-top" style="font-size: small;font-weight: normal;" value="Cancel"  onclick="cancelProcess();" rendered="{! (!checkflag && internalUser)}" reRender="none"/>
                                                    <apex:commandLink styleClass="right pad-right pad-top"  style="font-size: small;font-weight: normal;" value="Save & Exit" onclick="saveandexitfunction(); return false;" rendered="{! (!checkflag && !internalUser)}"/>  
                                                    
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        
                                        <apex:tab switchType="client" rendered="{!OR(CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VESSEL'),CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VEHICLE'))}" label="{!IF(CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VESSEL'),'Vessel', IF(CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VEHICLE'),'Vehicle',''))}" name="Platform" id="Platform" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Platform', 'rich-tab-active','rich-tab-inactive')}" disabled="{!IF(mapdisableProductRegistrationTabs['Platform'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c,true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateNext('Platform');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Platform'}">
                                                <apex:outputPanel rendered="{!CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VESSEL')}">
                                                    <h2>Vessel Details</h2>
                                                    <!--** div contain error msg contents -Start **-->
                                                    <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                    </div>
                                                    <!--** div contain error msg contents -End **-->
                                                    
                                                    <div class="form">
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vessel Name:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputField id="vesselNameIdDetail" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}" value="{!objActivationPlatform.Name}" html-tabIndex="1" html-data-role="none"/>
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vessel Type:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <span id="vesselTypeIdDetailDiv">
                                                                    <apex:inputField id="NvesselTypeIdDetail" styleClass="{!IF(OR(objActivationOrder.Order_Status__c = 'Submitted',AND($User.Id == objActivationOrder.CreatedById,objActivationOrder.Activation_Type__c == 'Registration on behalf of Customer',objActivationOrder.Order_Status__c == 'Pending Customer Confirmation')), 'disabledlookclass ', '')} {!IF((checkFlag == false),'requiredRedMarkFld','')}" onchange="validateVesselDetail();" value="{!objActivationPlatform.Industry_Designation__c}" html-tabIndex="2" html-data-role="none"/>
                                                                </span>
                                                                <script>
                                                                dependentPicklist('vesselTypeIdDetailDiv','requiredRedMarkFld', '2');
                                                                </script>        
                                                            </div>
                                                        </div>
                                                        <div class="section group vesselPlatformIdblock">
                                                            <div class="col span_3_of_12">
                                                                <label>Vessel Detail:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <span id="vesselPlatformIdDetailDiv">
                                                                    <apex:inputField id="NvesselPlatformIdDetail" styleClass="{!IF(OR(objActivationOrder.Order_Status__c = 'Submitted',AND($User.Id == objActivationOrder.CreatedById,objActivationOrder.Activation_Type__c == 'Registration on behalf of Customer',objActivationOrder.Order_Status__c == 'Pending Customer Confirmation')), 'disabledlookclass ', '')} {!IF((checkFlag == false),'requiredRedMarkFld','')}" value="{!objActivationPlatform.Platform_Detail__c}" html-tabIndex="3" html-data-role="none"/>
                                                                </span>
                                                                <script>
                                                                dependentPicklist('vesselPlatformIdDetailDiv','requiredRedMarkFld' ,'3');
                                                                </script>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vessel IMO Number: <a class="tooltip"><i class="fa fa-info-circle" aria-hidden="true"></i>
                                                                    <span class="tooltiptext" style="font-weight: normal;text-align: left;font-family: sans-serif; padding: 10px;">The International Maritime Organization (IMO) number is a unique and permanent 7-digit number assigned to sea-going ships. IMO numbers are mandatory for cargo vessels that are at least 300 gross tons and passenger vessels of at least 100 gross tons. In addition, they are now often assigned to vessels outside of the mandatory groups, such as fishing vessels and commercial yachts.</span>
                                                                    </a></label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <div class="{!IF((checkFlag == false),'requiredRedMarkFld','')}"  style="padding-left:10px;font-size: small;">
                                                                    <apex:selectRadio layout="pageDirection" style="font-weight: normal !important;" id="havingimo" value="{!objActivationPlatform.Having_IMO__c}" html-data-role="none" >
                                                                        <apex:selectOption html-data-role="none" html-class="marginbottom" itemEscaped="true" itemLabel=" I have a Vessel IMO number" itemValue="Yes" />
                                                                        <apex:selectOption html-data-role="none" itemLabel=" I don't have a Vessel IMO number" itemValue="No" />
                                                                        <apex:actionSupport event="onchange" reRender="radiocallblock" onsubmit="showLoadingDiv();" oncomplete="hideLoadingDiv();"/>
                                                                    </apex:selectRadio>
                                                                    <span class="notes pad-left">You may not have an IMO number if your vessel is under a certain weight.</span>
                                                                </div> 
                                                            </div>
                                                        </div>
                                                        
                                                        <apex:outputPanel id="radiocallblock"> 
                                                            <div style="display:{!IF(objActivationPlatform.Having_IMO__c == 'Yes','Block','none')}">
                                                                <div class="section group">
                                                                    <div class="col span_3_of_12">
                                                                        <label>IMO Number:</label>
                                                                    </div>
                                                                    <div class="col span_9_of_12">
                                                                        <apex:inputField id="vesselIMOnumberIdDetailR" value="{!objActivationPlatform.Vessel_IMO__c}" html-tabIndex="5" html-maxlength="7" html-size="7" html-data-role="none" styleClass="{!IF(AND(objActivationPlatform.Market__c != 'Mil/Gov', objActivationPlatform.Market__c != '',checkFlag == false),'requiredRedMarkFld','')}" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="display:{!IF(objActivationPlatform.Having_IMO__c == 'No','Block','none')}">
                                                                <div class="kvh-vesselRadiogrpDetail">
                                                                    <div class="section group">
                                                                        <div class="col span_3_of_12">
                                                                            <label>Additional Identifying Information:<br/>
                                                                                <span class="notes">(at least one required)</span></label>
                                                                        </div>
                                                                        <div class="col span_5_of_12">
                                                                            <div class="{!IF((checkFlag == false),'req-field','')}" style="padding-left:10px;">
                                                                                <label class="not-bold">Radio Call Sign:</label>   
                                                                                <apex:inputField id="vesselInfoIdDetail" value="{!objActivationPlatform.Vessel_Radio_Call_Sign__c}" html-tabIndex="6" html-data-role="none"/>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                        <div class="col span_4_of_12">
                                                                            <label class="not-bold">MMSI:</label>  
                                                                            <apex:inputField id="vesselMMSIIdDetail" value="{!objActivationPlatform.MMSI__c}" html-tabIndex="7" html-data-role="none"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Flag:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:selectList id="flagcountry" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}" value="{!objActivationPlatform.Flag__c}" multiselect="false"  size="1"  tabIndex="8" html-data-role="none"> 
                                                                    <apex:selectOptions value="{!CountriesList}" html-data-role="none"/>
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VEHICLE')}">
                                                    <h2>Vehicle Details</h2>
                                                    <!--** div contain error msg contents -Start **-->
                                                    <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                    </div>
                                                    <!--** div contain error msg contents -End **-->
                                                    
                                                    <div class="form">
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vehicle/Platform Type:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <span id="LandvesselTypeIdDetailDiv">
                                                                    <apex:inputField id="LandvesselTypeIdDetail" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}" value="{!objActivationPlatform.Industry_Designation__c}" html-tabIndex="1" html-data-role="none"/>
                                                                </span>
                                                                <script>
                                                                dependentPicklist('LandvesselTypeIdDetailDiv','requiredRedMarkFld', '1');
                                                                </script>
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vehicle/Platform Detail:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <span id="LandvesselPlatformIdDetailDiv">
                                                                    <apex:inputField id="LandvesselPlatformIdDetail" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}"  value="{!objActivationPlatform.Platform_Detail__c}" html-tabIndex="2" html-data-role="none"/>
                                                                </span>
                                                                <script>
                                                                dependentPicklist('LandvesselPlatformIdDetailDiv','requiredRedMarkFld', '2');
                                                                </script>                                                     
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Vehicle Make/Model:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputField id="LandvesselMakeId" value="{!objActivationPlatform.Vehicle_Make_Model__c}" html-tabIndex="3" html-data-role="none"/>
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Country of Registration:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:selectList id="flagregcountry" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}" value="{!objActivationPlatform.Flag__c}" multiselect="false"  size="1"  tabIndex="4" html-data-role="none"> 
                                                                    <apex:selectOptions value="{!CountriesList}" html-data-role="none"/>
                                                                </apex:selectList> 
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                
                                                <div class="button-bar">
                                                    <apex:commandLink styleClass="button left button-blue" value="Back" onclick="showLoadingDiv();btnSelectednavigateBack('Product'); return false;" >
                                                        <!-- Use the Name attribute of the next tab -->
                                                    </apex:commandLink> 
                                                    
                                                    <apex:commandLink styleClass="right button button-blue" value="Next" onclick="saveVesselVehicle('{!$Component.Platform}',true); return false;">
                                                        <!-- Use the Name attribute of the next tab -->
                                                    </apex:commandLink>
                                                    <apex:commandLink styleClass="right pad-right pad-top" style="font-size: small;font-weight: normal;" value="Cancel"  onclick="cancelProcess();" rendered="{! (checkflag && !internalUser)}" reRender="none"/>
                                                    <apex:commandLink styleClass="right pad-right pad-top"  style="font-size: small;font-weight: normal;" value="Save & Exit" onclick="saveandexitfunction(); return false;" rendered="{! (!checkflag && !internalUser)}"/>  
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        <apex:tab switchType="client" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Purchase_Details', 'rich-tab-active','rich-tab-inactive')}" label="Purchase Details" name="Purchase_Details" id="Purchase_Details"  disabled="{!IF((mapdisableProductRegistrationTabs['Purchase_Details'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c),true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateNext('Purchase_Details');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Purchase_Details'}">
                                                <apex:inputHidden value="{!objActivationDealer.Dealer_Distributor_Company__c}" id="DealerDistributorCompany"/>
                                                <apex:inputHidden value="{!objActivationDealer.Installing_Dealer_Company__c}" id="InstallingDealerCompany"/>
                                                
                                                <h2>Purchase Details</h2>
                                                <!--** div contain error msg contents -Start **-->
                                                <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                </div>
                                                <!--** div contain error msg contents -End **-->
                                                <h3>Dealer</h3>
                                                <div class="form" >
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Purchasing Dealer Name:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField value="{!objActivationDealer.Company__c}" onkeyup="tempfun(this);" id="dealerCompanyName" styleClass="requiredRedMarkFld diabledealerClass" html-tabIndex="1" html-data-role="none"/>
                                                        </div>
                                                    </div>
                                                    <div class="purchasingstatecountry" >
                                                        
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Purchasing Dealer Country:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:selectList id="Purchasingcountry" styleClass="requiredRedMarkFld diabledealerClass" value="{!objActivationDealer.Country__c}" multiselect="false"  size="1"  tabIndex="2" html-data-role="none"> 
                                                                    <apex:actionSupport action="{!componentCountryChangeHandlerPurchase}" event="onchange" reRender="PurDealState_Province__c" onsubmit="showLoadingDiv();" oncomplete="hideLoadingDiv();" />
                                                                    <apex:selectOptions value="{!CountriesList}" html-data-role="none"/>
                                                                </apex:selectList> 
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Purchasing Dealer State/Province/Territory:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:selectList id="PurDealState_Province__c" tabindex="3" value="{!objActivationDealer.State__c}" multiselect="false" size="1" styleClass="{!IF(StatesListDeal.size > 1,'requiredRedMarkFld diabledealerClass','diabledealerClass')}" html-data-role="none">
                                                                    <apex:actionSupport event="onchange" reRender="statecon" >
                                                                        <apex:param value="{!objActivationDealer.State__c}" assignTo="{!dummy2}"/> 
                                                                    </apex:actionSupport>
                                                                    <apex:selectOptions value="{!StatesListDeal}" html-data-role="none"/>
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Purchasing Dealer Phone Number:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputField value="{!objActivationDealer.Dealer_Phone__c}" styleClass="requiredRedMarkFld diabledealerClass" id="dealerppnumber" html-tabIndex="4" html-data-role="none"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                        </div>
                                                        <div class="span_9_of_12">
                                                            <p class="">
                                                                <apex:inputField style="margin-right: 5px;" value="{!objActivationOrder.Don_t_have_Dealer__c}" id="nodealercheck" html-tabIndex="5" html-data-role="none"/>
                                                                Unknown
                                                            </p>                     
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                                <hr/>
                                                <h3>Installation</h3>
                                                <div class="form">
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Installed By:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField value="{!objActivationOrder.Installed_By__c}" id="Installed_By__c" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')}" html-tabIndex="6" html-data-role="none"/>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="kvh-auth-dealer show-select" style="display: none;">
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>Installing Dealer Name:</label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputField value="{!objActivationDealer.Installing_Dealer_Name__c}" style="width:60%; margin-right:10px;" onkeyup="tempfun(this);"  id="dealerCompanyNameinstalling" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')} diabledealerClass" html-tabIndex="7" html-data-role="none"/> <apex:inputField style="margin-right: 5px;" value="{!objActivationDealer.Same_as_Purchase_Dealer__c}" id="Same_as_Purchase_Dealer__c" html-tabIndex="8" html-data-role="none">Same as Purchase Dealer</apex:inputField>
                                                            </div>
                                                        </div>
                                                        <div class="installingstatecountry" >
                                                            <div class="section group">
                                                                <div class="col span_3_of_12">
                                                                    <label>Installing Dealer Country:</label>
                                                                </div>
                                                                <div class="col span_9_of_12">
                                                                    <apex:selectList id="installingcountry" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')} diabledealerClass" value="{!objActivationDealer.Installing_Dealer_Country__c}" multiselect="false"  size="1"  tabIndex="9" html-data-role="none"> 
                                                                        <apex:actionSupport action="{!componentCountryChangeHandlerInstalling}" event="onchange" reRender="InstallDealState_Province__c" onsubmit="showLoadingDiv();" oncomplete="hideLoadingDiv();" />
                                                                        <apex:selectOptions value="{!CountriesList}" html-data-role="none"/>
                                                                    </apex:selectList> 
                                                                </div>
                                                            </div>
                                                            <div class="section group">
                                                                <div class="col span_3_of_12">
                                                                    <label>Installing Dealer State/Province/Territory:</label>
                                                                </div>
                                                                <div class="col span_9_of_12">
                                                                    <apex:selectList id="InstallDealState_Province__c" tabindex="10" value="{!objActivationDealer.Installing_Dealer_State__c}" multiselect="false" size="1" styleClass="{!IF((StatesListInstalling.size > 1 && checkFlag == false),'requiredRedMarkFld diabledealerClass','diabledealerClass')}" html-data-role="none">
                                                                        <apex:actionSupport event="onchange" reRender="statecon" >
                                                                            <apex:param value="{!objActivationDealer.Installing_Dealer_State__c}" assignTo="{!dummy1}"/> 
                                                                        </apex:actionSupport>
                                                                        <apex:selectOptions value="{!StatesListInstalling}" html-data-role="none"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="factory-install show-select" style="display: none;">
                                                        <div class="section group">
                                                            <div class="col span_3_of_12">
                                                                <label>
                                                                    <apex:outputPanel layout="none" rendered="{!CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VESSEL')}" >Boat Builder:</apex:outputPanel>
                                                                    <apex:outputPanel layout="none" rendered="{!CONTAINS(UPPER(objActivationPlatform.Vessel_Info__c),'VEHICLE')}">Vehicle Manufacturer:</apex:outputPanel>
                                                                </label>
                                                            </div>
                                                            <div class="col span_9_of_12">
                                                                <apex:inputField value="{!objActivationDealer.Installed_By_Boat_Builder__c}" id="Installed_By_Boat_Builder__c" styleClass="{!IF((checkFlag == false),'requiredRedMarkFld','')} diabledealerClass" html-tabIndex="11" html-data-role="none"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="button-bar">
                                                        <apex:commandLink styleClass="button left button-blue" value="Back" onclick="showLoadingDiv();btnSelectednavigateBack('Platform'); return false;" >
                                                            <!-- Use the Name attribute of the next tab -->
                                                        </apex:commandLink> 
                                                        
                                                        <apex:commandLink styleClass="right button button-blue" value="Next" onclick="savedealer('{!$Component.Purchase_Details}', true); return false;"> <!-- btnSelectednavigateBack('Authorized_Representative'); return false; -->
                                                            <!-- Use the Name attribute of the next tab -->
                                                        </apex:commandLink>
                                                        <apex:commandLink styleClass="right pad-right pad-top" style="font-size: small;font-weight: normal;" value="Cancel"  onclick="cancelProcess();" rendered="{! (checkflag && !internalUser)}" reRender="none"/> 
                                                    <apex:commandLink styleClass="right pad-right pad-top"  style="font-size: small;font-weight: normal;" value="Save & Exit" onclick="saveandexitfunction(); return false;" rendered="{! (!checkflag && !internalUser)}"/>  
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        <apex:tab switchType="client" rendered="{!objActivationHardware.Product_Line__c == 'Satellite_Communications'}" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Authorized_Representative', 'rich-tab-active','rich-tab-inactive')}" label="Authorized Representative(s)" name="Authorized_Representative" id="Authorized_Representative"  disabled="{!IF((mapdisableProductRegistrationTabs['Authorized_Representative'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c),true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateNext('Authorized_Representative');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Authorized_Representative'}">
                                                <div style="">
                                                    <h2 class="mainTitle"> Authorized Representatives</h2>
                                                    <p style="font-size: larger;">
                                                        Authorized Representatives will have permission to act on behalf of the subscriber or the subscribing company with respect to the Airtime Services account. 
                                                        <a href="#Authorized_Representatives_Permissions" data-rel="popup" data-position-to="window" data-transition="pop" class="ui-link" aria-haspopup="true" aria-owns="modal" aria-expanded="false"> Learn more about these permissions.</a>
                                                    </p>
                                                </div>
                                                <c:Activation_Contact_list pageOrderID="{!objActivationOrder.Id}" id="contactlistcomponent" />
                                                
                                                <a href="#" onclick="j$('.KVH-show-inside-contactcomponent').show();"  class="button button-blue pad-top pad-bottom" data-role="none"><i class="fa fa-plus" aria-hidden="true"></i> Add Authorized Representative</a>
                                                
                                                <!--** div contain error msg contents -Start **-->
                                                <div class="kvh-show-errormsg-here" style="padding-top:10px;">
                                                </div>
                                                <!--** div contain error msg contents -End **-->
                                                
                                                <div style="display:none;padding-bottom: 10px;" class="form KVH-show-inside-contactcomponent">
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>First/Given Name:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField id="firstname" styleClass="firstname1 requiredRedMarkFld"  value="{!objActivationContact.First_Name__c}" html-tabIndex="1" html-data-role="none" />
                                                        </div>
                                                    </div>
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Last/Family Name/Surname:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField value="{!objActivationContact.Last_Name__c}" html-tabIndex="2" styleClass="requiredRedMarkFld" id="lastname" html-data-role="none" />
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Company Name:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField id="ree" value="{!objActivationContact.Account__c}" html-tabIndex="3" html-data-role="none"/>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Email:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField value="{!objActivationContact.Email__c}" html-tabIndex="4" id="email" styleClass="email requiredRedMarkFld" html-data-role="none" />
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Primary Phone Number:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:inputField id="ppnumber" value="{!objActivationContact.Primary_Phone__c}" html-tabIndex="5" styleClass="requiredRedMarkFld" html-data-role="none" />
                                                        </div>
                                                    </div>
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>Country:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:actionRegion >
                                                                <apex:selectList id="country" tabindex="6" value="{!objActivationContact.Country__c}" styleClass="requiredRedMarkFld" multiselect="false"  size="1" html-data-role="none">
                                                                    <apex:actionSupport action="{!componentCountryChangeHandler}" event="onchange" reRender="State_Province__c" onsubmit="showLoadingDiv();" oncomplete="hideLoadingDiv();" />
                                                                    <apex:selectOptions value="{!CountriesList}" html-data-role="none"/>
                                                                </apex:selectList>
                                                            </apex:actionRegion>
                                                        </div>
                                                    </div>
                                                    <div class="section group">
                                                        <div class="col span_3_of_12">
                                                            <label>State/Province/Territory:</label>
                                                        </div>
                                                        <div class="col span_9_of_12">
                                                            <apex:selectList id="State_Province__c" tabindex="7" value="{!objActivationContact.State__c}" multiselect="false" size="1" styleClass="{!IF(StatesList.size > 1,'requiredRedMarkFld','')}" html-data-role="none">
                                                                <apex:actionSupport event="onchange" reRender="statecon" >
                                                                    <apex:param value="{!objActivationContact.State__c}" assignTo="{!dummy}"/> 
                                                                </apex:actionSupport>
                                                                <apex:selectOptions value="{!StatesList}" html-data-role="none"/>
                                                            </apex:selectList>
                                                        </div>
                                                    </div>
                                                    
                                                    <apex:commandLink styleClass="button right button-blue" value="Save Authorized Rep" onclick="validateAuthorizedRep('{!$Component.Authorized_Representative}'); return false;">
                                                    </apex:commandLink>
                                                    <apex:commandLink styleClass="right" style="margin: 10px 10px 0px 0px;" value="Cancel" action="{!goToTab}" onclick="showLoadingDiv();" rerender="contactcomponent" oncomplete="hideLoadingDiv();" >
                                                    </apex:commandLink>
                                                </div>
                                                <div class="button-bar">
                                                    <apex:commandLink styleClass="button left button-blue" value="Back" onclick="showLoadingDiv();btnSelectednavigateBack('Purchase_Details'); return false;" >
                                                        <!-- Use the Name attribute of the next tab -->
                                                    </apex:commandLink> 
                                                    
                                                    <apex:commandLink styleClass="right button button-blue" value="Next" onclick="showLoadingDiv();btnSelectednavigateBack('Review'); return false;" >
                                                        <!-- Use the Name attribute of the next tab -->
                                                    </apex:commandLink>
                                                    <apex:commandLink styleClass="right pad-right pad-top" style="font-size: small;font-weight: normal;" value="Cancel"  onclick="cancelProcess();" rendered="{! (checkflag && !internalUser)}" reRender="none"/>
                                                    <apex:commandLink styleClass="right pad-right pad-top"  style="font-size: small;font-weight: normal;" value="Save & Exit" onclick="saveandexitfunction(); return false;" rendered="{! (!checkflag && !internalUser)}"/>  
                                                    
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                        <apex:tab switchType="client" styleClass="{!IF(objActivationStatus.Account_Setup_Active_Tab__c == 'Review', 'rich-tab-active','rich-tab-inactive')}" label="Review" name="Review" id="Review"  disabled="{!IF((mapdisableProductRegistrationTabs['Review'] > objActivationStatus.Account_Setup_Last_Active_Tab_Index__c),true,false)}" onTabEnter="showLoadingDiv();btnSelectednavigateNext('Review');">
                                            <apex:outputPanel rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Review'}">
                                                <c:Product_Registration_Review_Component />
                                                <div class="button-bar">
                                                    <apex:commandLink styleClass="button left button-blue" value="Back" onclick="showLoadingDiv();btnSelectednavigateBack('{!IF(objActivationHardware.Product_Line__c == 'Satellite_Communications','Authorized_Representative','Purchase_Details')}'); return false;" >
                                                        <!-- Use the Name attribute of the next tab -->
                                                    </apex:commandLink> 
                                                    <apex:outputPanel rendered="{!objActivationOrder.Order_Status__c == 'Submitted' }">
                                                        <a href="#" id="returnhomeId" onclick="returnHomeJS();" class="right button button-white pad-bottom" >Return Home</a>
                                                    </apex:outputPanel>
                                                    
                                                    <apex:outputPanel layout="none" rendered="{! !(checkflag == false && internalUser == false) }">
                                                        <a class="button right button-red pad-bottom" id="finishCust" style="color:white;background:red;"  href="#saveandsubmit" data-rel="popup" data-position-to="window" data-transition="pop" aria-haspopup="true" aria-owns="saveandsubmit" aria-expanded="false">
                                                            Finish &amp; Submit to Customer
                                                        </a> 
                                                    </apex:outputPanel> 
                                                    <apex:outputPanel layout="none" rendered="{!AND(OR(objActivationOrder.Order_Status__c == 'In Progress', objActivationOrder.Order_Status__c == 'Pending Customer Confirmation'), checkflag != true , internalUser != true)}" > <!--  -->                                                        
                                                        <a Class="right button remodal-cancel" style="background: #e9e9e9!important; color:red!important;"  href="#saveandsubmit" data-rel="popup" data-position-to="window" data-transition="pop" aria-haspopup="true" aria-owns="saveandsubmit" aria-expanded="false">
                                                            Save &amp; Exit
                                                        </a> 
                                                        <div class="clear"></div>
                                                        <a class="right" style="font-size: small;font-weight: normal;"  href="#addnewproduct" data-rel="popup" data-position-to="window" data-transition="pop" aria-haspopup="true" aria-owns="addnewproduct" aria-expanded="false">
                                                            Save &amp; Add Another Product
                                                        </a> 
                                                    </apex:outputPanel>
                                                </div>
                                            </apex:outputPanel>
                                        </apex:tab>
                                    </apex:tabPanel>
                                </div>
                            </apex:outputPanel>
                        </div>
                    </apex:form>
                    
                    <!-- ** Form tag End ** -->
                    
                    <!-- **  Script Methods And Functions ** -->
                    <script type="text/javascript" language="JavaScript">
                    <!-- script Block for Modal Windows Start -->
                        window.remodalGlobals = {
                        namespace: "modal",
                        defaults: {
                        hashTracking: true
                        }
                        };
                        
                        var options = {hashTracking: false, closeOnOutsideClick: false,closeOnEscape: false};
                        
                        /* To remove duplidate popup window initialized -Start */
                        function removeduplicatepopup(popupID){
                            while(j$(popupID).length >1){
                            j$(popupID).last().remove();
                        }
                                                      while(j$('.remodal-wrapper').find(popupID).length >1){
                            j$('.remodal-wrapper').find(popupID).last().remove();
                        }
                    }
                    /* To remove duplidate popup window initialized -End */
                    
                    function generateRequired(){ 
                        j$('span:has(span.req), p:has(span.req), div:has(span.req)').children('input[type=text], select').addClass('requiredRedMarkFld');
                    }
                    </script>
                    
                    <!-- Terms popup contents --> 
                    <c:Activation_Terms_Component rendered="{!objActivationStatus.Account_Setup_Active_Tab__c == 'Authorized_Representative'}" referencePageName="ACCOUNT_SETUP"/> <!-- {!UPPER($CurrentPage.Name)} -->
                    <!-- Terms popup contents -->  
                    
                    <!-- ** remodal popup Start ** -->
                    <div data-role="popup" id="vessel-types" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Vessel Type Examples</h1>
                        </div>
                        <div role="main" class="ui-content">
                            <div class="section group">
                                <div class="col span_4_of_12">
                                    <h4>Commercial Vessels:</h4>
                                    <ul class="list">
                                        <li>Bulk Carriers</li>
                                        <li>Dry Cargo Vessels</li>
                                        <li>Fishing Vessels</li>
                                        <li>Inland Waterways</li>
                                        <li>Non-ship Structures</li>
                                        <li>Non-propelled Vessels</li>
                                        <li>Cruise Ships/Ocean Liners</li>
                                        <li>Ferries (cargo and passengers)</li>
                                        <li>Tankers</li>
                                    </ul>
                                </div>
                                <div class="col span_4_of_12">
                                    <h4>Leisure Vessels:</h4>
                                    <ul class="list">
                                        <li>Power Boats</li>
                                        <li>Yachts</li>
                                        <li>Cruisers</li>
                                        <li>Houseboats</li>
                                        <li>Sportfishing Vessels</li>
                                        <li>Trawlers</li>
                                        <li>Charter Vessels</li>
                                    </ul>
                                </div>
                                <div class="col span_4_of_12">
                                    <h4>Military/Government Vessels:</h4>
                                    <ul class="list">
                                        <li>Government Vessels</li>
                                        <li>Homeland Security</li>
                                        <li>Emergency Management</li>
                                        <li>Scientific Research</li>
                                        <li>NGOs</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" id="vehicle-types" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Vehicle Type Examples</h1>
                        </div>
                        <div role="main" class="ui-content">
                            <div class="section group">
                                <div class="col span_6_of_12">
                                    <h4>Commercial Land/Vehicles:</h4>
                                    <ul class="list">
                                        <li>Mining</li>
                                        <li>Oil &amp; Gas</li>
                                        <li>Satellite News Gathering</li>
                                    </ul>
                                </div>
                                <div class="col span_6_of_12">
                                    <h4>Military/Governement Land/Vehicles:</h4>
                                    <ul class="list">
                                        <li>Emergency services</li>
                                        <li>Homeland Security</li>
                                        <li>Military</li>
                                        <li>NGO</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" style="min-width:400px;" data-dismissible="false" id="saveandsubmit" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Save &amp; Exit</h1>
                        </div>
                        <div role="main" class="ui-content center">
                            Are you sure want to save and exit?
                            <span class="notes" style="display : {!IF(AND($User.Id == objActivationOrder.CreatedById, objActivationOrder.Activation_Type__c == 'Registration on behalf of Customer'), 'block;','none;')}">
                                This action will alert your customer of the Product Registration being submitted on their behalf
                            </span>
                            <div style="text-align:center;padding: 10px;">
                                <a class="button ui-btn" style="width:75px;font-size: 75% !important;" onclick="showLoadingDiv();j$('#saveandsubmit-popup').hide();savesubmit();" >Yes</a>
                                <a data-rel="back" class="button ui-btn" id="" style="width:75px;font-size: 75% !important;">Cancel</a>
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" style="min-width:400px;" data-dismissible="false" id="addnewproduct" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Save &amp; Add Product</h1>
                        </div> 
                        <div role="main" class="ui-content center">
                            Are you sure want to save and add another product?
                            <span class="notes" style="display : {!IF(AND($User.Id == objActivationOrder.CreatedById, objActivationOrder.Activation_Type__c == 'Registration on behalf of Customer'), 'block;','none;')}">
                                This action will alert your customer of the Product Registration being submitted on their behalf
                            </span>
                            <div style="text-align:center;padding: 10px;">
                                <a class="button ui-btn" style="width:75px;font-size: 75% !important;" onclick="showLoadingDiv();j$('#addnewproduct-popup').hide();saveaddnew();" >Yes</a>
                                <a data-rel="back" class="button ui-btn" id="" style="width:75px;font-size: 75% !important;">Cancel</a>
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" id="Insttype" style="min-width:400px !important; max-width:600px !important;" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Save and Exit</h1>
                        </div>
                        <div role="main" class="ui-content center">
                            <span>Are you sure you want to exit the Product Registration? <div class="notes" style="padding: 10px;">This registration will be saved.</div></span>
                            <div class="center"> 
                                <a Class="button remodal-cancel" style="background:#38c !important;color:white !important;"  value="Yes"  onclick="showLoadingDiv();confirmsaveandexit();">Yes</a> 
                                <a href="#" class="pad-left ui-link" data-rel="back">Continue Product Registration</a>                           
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" id="cancelPopup" style="min-width:400px !important; max-width:600px !important;" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                                <h1 class="ui-title" role="heading" aria-level="1" style="font-size: 1.3em;color: #cc0000;">
                                <i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true"></i>
                                Alert!
                                </h1>
                        </div>
                        <div role="main" class="ui-content center">
                            <span>Are you sure you want to exit the Product Registration? <div class="notes" style="padding: 10px;">If you leave this page your changes will not be saved, and the registration information entered will have to be re-entered.</div></span>
                            <div class="center"> 
                                <a Class="button remodal-cancel" style="background: #e9e9e9!important; color:red!important;"  value="Cancel & Exit"  onclick="showLoadingDiv();confirmcancelProcess();">Cancel &amp; Exit</a> 
                                <a href="#" class="button button-blue ui-link" data-rel="back">Continue Product Registration</a>                           
                            </div>
                        </div>
                    </div>
                    
                    <div data-role="popup" id="saveandExitsubspop" style="min-width:400px !important; max-width:600px !important;" data-overlay-theme="b" class="ui-popup ui-body-inherit ui-overlay-shadow ui-corner-all">
                        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
                        <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
                            <h1 class="ui-title" role="heading" aria-level="1">Save and Exit</h1>
                        </div>
                        <div role="main" class="ui-content center">
                            <span>Are you sure you want to exit the Product Registration? <div class="notes" style="padding: 10px;">This registration will be saved.</div></span>
                            <div class="center"> 
                                <a Class="button remodal-cancel" style="background:#38c !important;color:white !important;" value="Yes" onclick="showLoadingDiv();saveandExitsubs();">Yes</a> 
                                <a href="#" class="pad-left ui-link" data-rel="back">Continue Product Registration</a>                           
                            </div>
                        </div>
                    </div>
                    <!-- ** remodal popup End ** -->
                </apex:outputPanel>
            </div>
            <!-- **  Script Methods And Functions ** -->
        </body>
        <!-- ** Body tag End ** -->
    </html>
    <!-- ** HTML tag End ** -->
</apex:page>