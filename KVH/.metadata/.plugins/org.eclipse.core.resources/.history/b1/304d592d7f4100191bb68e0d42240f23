<apex:page standardController="Opportunity" extensions="AgilePlansController">
  <apex:sectionHeader title="Opportunity" subtitle="Attach AgilePlans Service Order(s)"/>
  <apex:form >
      <apex:pageBlock >
          <apex:pageMessages ></apex:pageMessages>
          <apex:pageBlockButtons location="bottom">
              <apex:commandButton value="Back" action="{!back}" immediate="true"/>
              <apex:commandButton value="Submit" action="{!submit}"/>
          </apex:pageBlockButtons>
          <apex:pageBlockSection columns="1">
              <apex:pageBlockTable value="{!caselist}" var="c" rendered="{!caselist.size > 0}">
                  <apex:column headerValue="Vessel Name">
                      <apex:outputLink target="blank" value="/{!c.id}" >{!c.New_Vessel_or_Platform__c}</apex:outputLink>
                  </apex:column>
                  <apex:column headerValue="Status">
                      <apex:outputText value="{!c.status}"></apex:outputText>
                  </apex:column>
              </apex:pageBlockTable>
          </apex:pageBlockSection>
          <apex:pageBlockSection columns="1" title="Attach New Service Order" collapsible="false">
              <apex:pageBlockSectionItem >
                  <apex:outputLabel value="Vessel Name"></apex:outputLabel>
                  <apex:inputField required="true" value="{!newCase.New_Vessel_or_Platform__c}"/>              
              </apex:pageBlockSectionItem>              
              <apex:pageBlockSectionItem >
                  <apex:outputLabel value="AgilePlans Service Order"></apex:outputLabel>
                  <apex:inputFile value="{!serviceOrder.body}" fileName="{!serviceOrder.name}"></apex:inputFile>              
              </apex:pageBlockSectionItem>
              <apex:pageBlockSectionItem >
                  <apex:outputLabel value="Site Survey"></apex:outputLabel>
                  <apex:inputFile value="{!siteSurvey.body}" fileName="{!siteSurvey.name}"></apex:inputFile>              
              </apex:pageBlockSectionItem>
              <apex:pageBlockSectionItem >
                  <apex:outputLabel value="Order Entry Notification"></apex:outputLabel>
                  <apex:selectRadio value="{!notification}">
                      <apex:selectOptions value="{!notificationOptions}"/>
                  </apex:selectRadio>
              </apex:pageBlockSectionItem>
              <apex:pageBlockSectionItem >
                  <apex:outputLabel value="Service Order Comments"></apex:outputLabel>
                  <apex:inputTextarea cols="100" rows="5" value="{!comments}"></apex:inputTextarea>
              </apex:pageBlockSectionItem>
          </apex:pageBlockSection>
      </apex:pageBlock>
  </apex:form>
</apex:page>