<aura:component implements="forceCommunity:availableForAllPageTypes" access="global" controller="EventPortalComponentController" >
   
    <aura:attribute name="newsHeader" type="String" access="global"/>    
    <aura:attribute name="selectedportalview" type="String" access="global"/>
    <aura:attribute name="serviceName" type="String" access="global"/>  
    <aura:attribute name="showpopup" type="String" default="slds-hide"/>
    <aura:attribute name="eventlist" type="EventPortalComponentController.EventWrapper[]" />
    <aura:attribute name="toptwoeventlist" type="EventPortalComponentController.EventWrapper[]" />
    <aura:attribute name="availableCheck" type="String" access="global" default="slds-hide"/>
    <aura:attribute name="shownoeventimg" type="boolean" access="global" default="false"/>
    
    <!--- event handler to catch the service name and available flag as event param     -->
    <aura:handler event="c:PlaceAvailableServicesEvent" action="{!c.handlePlaceAvailableServiceEvent}"/>
   <!-- <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>-->
  <!-- <aura:handler event="aura:waiting" action="{!c.showSpinner}"/>
    <aura:handler event="aura:doneWaiting" action="{!c.hideSpinner}"/>-->
    <aura:handler event="c:PortalViewOptionEvent" action="{!c.setPortalview}"/>



   
	  <div style="padding:20px;padding-top:0px;" class="{! 'slds-grid slds-wrap ' + v.availableCheck}">
         <div  >
             <h2 class="slds-p-around_medium" style="background: #e3e3e3;color: #666;font-size: 18px;padding: 10px 15px;">{!v.newsHeader}</h2>
            
             <div class="filter-box"  style="background: #fff;min-height: 320px;max-height:320px;overflow-y: auto;">
                 <!--<ui:spinner aura:id="spinner"/>-->
                 <aura:iteration items="{!v.toptwoeventlist}" var="event">
                     <div class="slds-p-around_medium slds-p-bottom_none event" >
                         <b style="font-size:14px"><aura:unescapedHtml value="{!event.EventTitle}"/></b>
                         <p><aura:unescapedHtml value="{!event.fromdate}"/> - <aura:unescapedHtml value="{!event.todate}"/></p>
                         <p><aura:unescapedHtml value="{!event.LocationName}"/></p>
                         <p><aura:unescapedHtml value="{!event.address1}"/></p>
                         <p><aura:unescapedHtml value="{!event.address2}"/></p>
                         <p><aura:unescapedHtml value="{!event.LocationRoom}"/></p>
                         <p><aura:unescapedHtml value="{!event.city}"/>&nbsp;<aura:unescapedHtml value="{!event.state}"/></p>
                         <aura:if isTrue="{!!empty(event.zip)}">
                         	<p><aura:unescapedHtml value="{!event.country}"/>,&nbsp;<aura:unescapedHtml value="{!event.zip}"/></p>
                         </aura:if>
                         <aura:if isTrue="{!event.zip == ''}">
                         	<p><aura:unescapedHtml value="{!event.country}"/></p>
                         </aura:if>                         
                     </div>
                 </aura:iteration>
                 <aura:if isTrue="{!v.shownoeventimg}">
                     	<div style="text-align:center;">                            
                     		<img style="padding:10px" src="{!  '/resource/icons/noevent.jpg'}"/>
                        </div>
                 </aura:if>
                 <aura:if isTrue="{!v.eventlist.length > 0}">
                     	<a href="javascript:void(0);" class="button more slds-m-around_medium" onclick="{!c.openpopup}">More</a>
                 </aura:if>
             </div>
         </div>
     </div>
<div class="{!v.showpopup}" style="height: 640px;">
  <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
    <div class="slds-modal__container">
      <header class="slds-modal__header">       
        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">
        	<a class="button closeicon"  onclick="{!c.closepopup}">&times;</a>
            KVH Events
        </h2>
      </header>
      <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
         <aura:iteration items="{!v.eventlist}" var="event">
             <div class="slds-p-around_medium slds-p-bottom_none event">
                 <b style="font-size:14px"><aura:unescapedHtml value="{!event.EventTitle}"/></b>
                 <p><aura:unescapedHtml value="{!event.fromdate}"/> - <aura:unescapedHtml value="{!event.todate}"/></p>
                 <p><aura:unescapedHtml value="{!event.LocationName}"/></p>
                 <p><aura:unescapedHtml value="{!event.address1}"/></p>
                 <p><aura:unescapedHtml value="{!event.address2}"/></p>
                 <p><aura:unescapedHtml value="{!event.LocationRoom}"/></p>
                 <p><aura:unescapedHtml value="{!event.city}"/>&nbsp;<aura:unescapedHtml value="{!event.state}"/></p>
                 <aura:if isTrue="{!!empty(event.zip)}">
                     <p><aura:unescapedHtml value="{!event.country}"/>,&nbsp;<aura:unescapedHtml value="{!event.zip}"/></p>
                 </aura:if>
                 <aura:if isTrue="{!event.zip == ''}">
                     <p><aura:unescapedHtml value="{!event.country}"/></p>
                 </aura:if>                         
             </div>
          </aura:iteration>
      </div>
      <footer class="slds-modal__footer">
        <button class="button"  onclick="{!c.closepopup}">CLOSE</button>       
      </footer>
    </div>
  </section>
  <div class="slds-backdrop slds-backdrop_open"></div>
</div>
</aura:component>