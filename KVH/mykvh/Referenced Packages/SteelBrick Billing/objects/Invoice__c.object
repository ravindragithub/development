<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <customHelpPage>support</customHelpPage>
    <deploymentStatus>Deployed</deploymentStatus>
    <deprecated>false</deprecated>
    <description>Storing the Invoices.</description>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <fieldSets>
        <fullName>Cancellation_Reason_Fields</fullName>
        <availableFields>
            <field>Billing_Contact__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Delivery_Type__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Reference__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>It is used in the cancel Invoice Page</description>
        <displayedFields>
            <field>Cancellation_Reason__c</field>
            <isFieldManaged>true</isFieldManaged>
            <isRequired>true</isRequired>
        </displayedFields>
        <label>Cancellation Reason Fields</label>
    </fieldSets>
    <fieldSets>
        <fullName>Invoice_PDF_Template_Invoice_Fields</fullName>
        <availableFields>
            <field>Account__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>CurrencyL__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Delivery_Type__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Discount_Value__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Due_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Email_Sent__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Reference__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Run_Created_By__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_State__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Status__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Order__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Regular_Invoice__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Shipping_Contact__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Status_Flag__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Target_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Tax__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Total_Invoice_Value__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>VAT__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>It is used in Invoice PDF Template - Invoice Fields</description>
        <displayedFields>
            <field>Billing_Contact__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Name</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Invoice PDF Template - Invoice Fields</label>
    </fieldSets>
    <fieldSets>
        <fullName>Partial_Credit_Fields</fullName>
        <availableFields>
            <field>Account__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Billing_Contact__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Credited_Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>CurrencyL__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Delivery_Type__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Due_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_State__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Status__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Name</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Net_Total__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Order__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Payment_Status__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Tax__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>VAT__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>This fields are used in partial credit Page</description>
        <displayedFields>
            <field>Unpaid_Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Paid_Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Total_Invoice_Value__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Partial Credit Fields</label>
    </fieldSets>
    <fieldSets>
        <fullName>Payment_Allocation_Wizard_Fields</fullName>
        <availableFields>
            <field>Account__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>display this fields in payment allocation wizard</description>
        <displayedFields>
            <field>Name</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Invoice_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Due_Date__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Total_Invoice_Value__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Paid_Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <displayedFields>
            <field>Unpaid_Amount__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </displayedFields>
        <label>Payment Allocation Wizard Fields</label>
    </fieldSets>
    <fieldSets>
        <fullName>Unpost_Reason_Fields</fullName>
        <availableFields>
            <field>Billing_Contact__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Delivery_Type__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <availableFields>
            <field>Invoice_Reference__c</field>
            <isFieldManaged>false</isFieldManaged>
            <isRequired>false</isRequired>
        </availableFields>
        <description>It is used in the cancel Post Page</description>
        <displayedFields>
            <field>Unpost_Reason__c</field>
            <isFieldManaged>true</isFieldManaged>
            <isRequired>true</isRequired>
        </displayedFields>
        <label>Unpost Reason Fields</label>
    </fieldSets>
    <fields>
        <fullName>Account__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>false</reparentableMasterDetail>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Accounting_Period__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Accounting Period</label>
        <referenceTo>Accounting_Period__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Amount__c</fullName>
        <deprecated>false</deprecated>
        <description>It is the sum of invoice lines amount excluding VAT/Tax</description>
        <externalId>false</externalId>
        <inlineHelpText>It is the sum of invoice lines amount excluding VAT/TAX</inlineHelpText>
        <label>Subtotal</label>
        <summarizedField>Invoice_Lines__c.Line_Amount__c</summarizedField>
        <summaryForeignKey>Invoice_Lines__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Billing_Contact__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <description>It is loop up to Contact for Billing Contact</description>
        <externalId>false</externalId>
        <inlineHelpText>This is the contact to which the invoice is sent by email</inlineHelpText>
        <label>Billing Contact</label>
        <referenceTo>Contact</referenceTo>
        <relationshipLabel>Invoices (Billing Contact)</relationshipLabel>
        <relationshipName>Invoices1</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Cancellation_Reason__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Cancellation Reason</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Created in Error</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Duplicate order</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Layup</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Lost VOD Charged – Rental Period Credited</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Other – add further comments</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Rebilled – initial pricing error</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Rebilled – moved to new account</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Rebilled – new alignment date</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Rebilled – new product line</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Rebilled – uplift error</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Service downtime</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Test Invoice</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>VOD/Library Returned – Lost contract</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>VOD/Library Returned – Renewal</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>VOD/Library Returned – Sold or Scrapped</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>(DO NOT USE)VOD Returned</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>(DO NOT USE)Customer cancelled the order</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Credited_Amount__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Credited Amount</label>
        <summarizedField>Credit_Line__c.Total_Line_Value__c</summarizedField>
        <summaryFilterItems>
            <field>Credit_Line__c.Status__c</field>
            <operation>equals</operation>
            <value>Posted</value>
        </summaryFilterItems>
        <summaryForeignKey>Credit_Line__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>CurrencyL__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Currency</label>
        <referenceTo>Currency__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Custom_Invoice_Number__c</fullName>
        <deprecated>false</deprecated>
        <externalId>true</externalId>
        <label>Obsolete_Invoice Reference</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Cut_off_Date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Cut off Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Debit_Invoice__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Debit Invoice</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Delivery_Type__c</fullName>
        <deprecated>false</deprecated>
        <description>Delivery Type like Print,Email or both.If it selected as email or both then the email is sent to the Billing Contact on invoice.</description>
        <externalId>false</externalId>
        <label>Delivery Type</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Print</fullName>
                    <default>true</default>
                </value>
                <value>
                    <fullName>Email</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Email &amp; Print</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Discount_Value__c</fullName>
        <deprecated>false</deprecated>
        <description>This is the total Discount provided on this Invoice.</description>
        <externalId>false</externalId>
        <inlineHelpText>This is the total discount provided on this invoice.</inlineHelpText>
        <label>Discount Value</label>
        <summarizedField>Invoice_Lines__c.Discount_Value__c</summarizedField>
        <summaryForeignKey>Invoice_Lines__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Disputed__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Disputed</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Due_Date__c</fullName>
        <deprecated>false</deprecated>
        <description>When is the last date of invoice to be paid.</description>
        <externalId>false</externalId>
        <label>Due Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Email_Sent__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <description>If it checked means Email has been sent to the customer.</description>
        <externalId>false</externalId>
        <label>Email Sent</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Exception_Log__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Exception Log</label>
        <length>32768</length>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Exchange_Rate_Applied__c</fullName>
        <deprecated>false</deprecated>
        <description>Exchange Rate Applied</description>
        <externalId>false</externalId>
        <inlineHelpText>If you are a multi currency org, this field will hold the exchange rate between the Invoice Currency and your Corporate Currency. 
Value in Corporate Currency = Value in Invoice Currency x Exchange Rate Applied</inlineHelpText>
        <label>Exchange Rate Applied</label>
        <precision>18</precision>
        <required>false</required>
        <scale>6</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Invoice_Batch__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Invoice Batch</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Batch 1</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Batch 2</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Batch 3</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Invoice_Currency_Symbol__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>CurrencyL__r.Currency_Symbol__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Currency Symbol</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Invoice_Date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Invoice Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Invoice_Reference__c</fullName>
        <caseSensitive>false</caseSensitive>
        <deprecated>false</deprecated>
        <description>This field is used to hold the custom invoice number you need. This can have a specific suffix, prefix or a sequence number based on your legal entity used.</description>
        <externalId>true</externalId>
        <inlineHelpText>This field is used to hold the custom invoice number you need. This can have a specific suffix, prefix or a sequence number based on your legal entity used.
Search Invoice IT documentation for &quot;Legal Entity&quot; to find out how to use this field</inlineHelpText>
        <label>Invoice Reference</label>
        <length>25</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>Invoice_Run_Created_By__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <description>Look up relationship to the Invoice Run.Invoice is child of  Invoice Run.
This field tells from which Invoice Run the Invoice is generated.</description>
        <externalId>false</externalId>
        <label>Invoice Run (Created By)</label>
        <referenceTo>Invoice_Run__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Invoice_State__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Invoice State</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Regular</fullName>
                    <default>true</default>
                </value>
                <value>
                    <fullName>Proforma</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Legacy</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Invoice_Status__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Invoice Status</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Draft</fullName>
                    <default>true</default>
                </value>
                <value>
                    <fullName>Posted</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Cancelled</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Invalid</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Last_Processing_Date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Last Processing Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Net_Total__c</fullName>
        <deprecated>false</deprecated>
        <description>This would be Subtotal - Discount value</description>
        <externalId>false</externalId>
        <formula>Amount__c -  Discount_Value__c</formula>
        <inlineHelpText>This would be Subtotal - Discount value</inlineHelpText>
        <label>Net Total</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>No_Of_Instalments__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>No Of Instalments</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>No_of_Tries__c</fullName>
        <defaultValue>0</defaultValue>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>No of Tries</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Number_Of_Invoice_Lines__c</fullName>
        <deprecated>false</deprecated>
        <description>Number Of Invoice Lines</description>
        <externalId>false</externalId>
        <label>Number Of Invoice Lines</label>
        <summaryForeignKey>Invoice_Lines__c.Invoice__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Order__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Order</label>
        <referenceTo>Job__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Paid_Amount__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Paid Amount</label>
        <summarizedField>Payment_Allocation__c.Amount__c</summarizedField>
        <summaryFilterItems>
            <field>Payment_Allocation__c.Status__c</field>
            <operation>equals</operation>
            <value>Complete, Completed</value>
        </summaryFilterItems>
        <summaryForeignKey>Payment_Allocation__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Payment_Batch__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Payment Batch</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Batch 1</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Batch 2</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Batch 3</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Payment_Request_Amount__c</fullName>
        <defaultValue>0</defaultValue>
        <deprecated>false</deprecated>
        <description>Use this field if you want to process partial payments for the Inovice</description>
        <externalId>false</externalId>
        <label>Payment Request Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Payment_Status__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>IF(
AND(Unpaid_Amount__c &gt; 0, Paid_Amount__c &gt; 0),
&apos;Partially Paid&apos;, IF(Unpaid_Amount__c &gt; 0, &apos;Unpaid&apos;, &apos;Paid&apos;)
)</formula>
        <inlineHelpText>Payment Status of Paid can be paid fully or settled.</inlineHelpText>
        <label>Payment Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Preferred_Payment_Date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Preferred Payment Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Reference_Log_Number__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Reference Log Number</label>
        <length>25</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Regular_Invoice__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Regular Invoice</label>
        <referenceTo>Invoice__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Shipping_Contact__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <description>It is loop up to contact for Shipping Contact</description>
        <externalId>false</externalId>
        <label>Shipping Contact</label>
        <referenceTo>Contact</referenceTo>
        <relationshipLabel>Invoices (Shipping Contact)</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Status_Flag__c</fullName>
        <deprecated>false</deprecated>
        <description>Yellow - Invoices that are Active
Green - Invoices that have been Paid
Red - Invoices that are Overdue
White - Invoices that have been Cancelled</description>
        <externalId>false</externalId>
        <formula>IF(ISPICKVAL(Invoice_Status__c, &apos;Cancelled&apos;),Image(&quot;https://c.na12.content.force.com/servlet/servlet.ImageServer?id=015U00000002jv0&amp;oid=00DU0000000HSiW&quot;,&quot;White&quot;),
IF((Payment_Status__c == &apos;Paid&apos;), Image(&quot;/img/samples/flag_green.gif&quot;,&quot;Green&quot;) ,
     IF(TODAY() &gt;  Due_Date__c &amp;&amp; (Payment_Status__c != &apos;Paid&apos;),                                               
            Image(&quot;/img/samples/flag_red.gif&quot;,&quot;Red&quot;),
            Image(&quot;/img/samples/flag_yellow.gif&quot;,&quot;Yellow&quot;)
        )
   )
)</formula>
        <inlineHelpText>Yellow - Invoices that are active
Green - Invoices that have been paid
Red - Invoices that are overdue
White - Invoices that have been cancelled</inlineHelpText>
        <label>Status Flag</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Target_Date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Target  Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Tax_Calculation_Status__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Tax Calculation Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Queued</fullName>
                    <default>true</default>
                </value>
                <value>
                    <fullName>Voided</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Stopped</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Processed</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Tax_Engine__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Tax Engine</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Standard</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Avalara AvaTax</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Tax__c</fullName>
        <deprecated>false</deprecated>
        <description>Shows the total amount of Tax  for all invoice lines applied to the invoice</description>
        <externalId>false</externalId>
        <inlineHelpText>The total amount of Tax for all invoice lines</inlineHelpText>
        <label>Tax</label>
        <summarizedField>Invoice_Lines__c.Tax__c</summarizedField>
        <summaryForeignKey>Invoice_Lines__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>Total_Invoice_Value__c</fullName>
        <deprecated>false</deprecated>
        <description>Subtotal - Discount + VAT + Tax</description>
        <externalId>false</externalId>
        <formula>Amount__c  -  Discount_Value__c +  VAT__c +  Tax__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Subtotal - Discount + VAT + Tax</inlineHelpText>
        <label>Total Invoice Value</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Unpaid_Amount__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>ROUND(Total_Invoice_Value__c, 2) - ROUND(Paid_Amount__c, 2) - ROUND( Credited_Amount__c, 2)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Unpaid Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Unpost_Reason__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Unpost Reason</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Order information entered incorrectly</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Invoice generated before order adjustment</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>Wrong invoice or target dates</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>VAT__c</fullName>
        <deprecated>false</deprecated>
        <description>Shows the total amount of VAT for all invoice lines that has been applied to the Invoice</description>
        <externalId>false</externalId>
        <inlineHelpText>The total amount of VAT for all invoice lines</inlineHelpText>
        <label>VAT</label>
        <summarizedField>Invoice_Lines__c.VAT__c</summarizedField>
        <summaryForeignKey>Invoice_Lines__c.Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <label>Invoice</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>Account__c</columns>
        <columns>Legal_Entity__c</columns>
        <columns>Invoice_Reference__c</columns>
        <columns>Invoice_Date__c</columns>
        <columns>Due_Date__c</columns>
        <columns>Total_Invoice_Value__c</columns>
        <columns>CurrencyL__c</columns>
        <columns>Invoice_Status__c</columns>
        <columns>Status_Flag_KVH__c</columns>
        <columns>KVH_Payment_Status__c</columns>
        <columns>CREATED_DATE</columns>
        <filterScope>Everything</filterScope>
        <label>All Invoices</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>Cancelled_Invoices</fullName>
        <columns>NAME</columns>
        <columns>Account__c</columns>
        <columns>Invoice_Date__c</columns>
        <columns>Total_Invoice_Value__c</columns>
        <columns>CurrencyL__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>Invoice_Status__c</field>
            <operation>equals</operation>
            <value>Cancelled</value>
        </filters>
        <label>Cancelled Invoices</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>Unpaid_Invoice_List</fullName>
        <columns>NAME</columns>
        <columns>Account__c</columns>
        <columns>Billing_Contact__c</columns>
        <columns>Due_Date__c</columns>
        <columns>Paid_Amount__c</columns>
        <columns>Unpaid_Amount__c</columns>
        <columns>CurrencyL__c</columns>
        <columns>Invoice_Status__c</columns>
        <columns>Payment_Status__c</columns>
        <columns>Delivery_Type__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>Unpaid_Amount__c</field>
            <operation>greaterThan</operation>
            <value>0</value>
        </filters>
        <filters>
            <field>Invoice_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </filters>
        <label>Unpaid Invoices</label>
    </listViews>
    <nameField>
        <displayFormat>INV-{0000}</displayFormat>
        <label>Invoice Number</label>
        <trackHistory>true</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Invoices</pluralLabel>
    <searchLayouts>
        <customTabListAdditionalFields>Account__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Invoice_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Total_Invoice_Value__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>CurrencyL__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Invoice_Status__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Status_Flag_KVH__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>KVH_Payment_Status__c</customTabListAdditionalFields>
        <excludedStandardButtons>New</excludedStandardButtons>
        <lookupDialogsAdditionalFields>Invoice_Reference__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Account__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Invoice_Date__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Total_Invoice_Value__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>CurrencyL__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Invoice_Status__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>KVH_Payment_Status__c</lookupDialogsAdditionalFields>
        <searchFilterFields>NAME</searchFilterFields>
        <searchFilterFields>Account__c</searchFilterFields>
        <searchFilterFields>Billing_Contact__c</searchFilterFields>
        <searchFilterFields>Shipping_Contact__c</searchFilterFields>
        <searchFilterFields>Invoice_Date__c</searchFilterFields>
        <searchFilterFields>Total_Invoice_Value__c</searchFilterFields>
        <searchFilterFields>CurrencyL__c</searchFilterFields>
        <searchFilterFields>Invoice_Status__c</searchFilterFields>
        <searchFilterFields>KVH_Payment_Status__c</searchFilterFields>
        <searchFilterFields>CREATEDBY_USER</searchFilterFields>
        <searchResultsAdditionalFields>Account__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Invoice_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Total_Invoice_Value__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>CurrencyL__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Invoice_Status__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Status_Flag__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>KVH_Payment_Status__c</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>ControlledByParent</sharingModel>
    <startsWith>Vowel</startsWith>
    <webLinks>
        <fullName>Attach_Invoice_as_PDF</fullName>
        <availability>online</availability>
        <description>It will attach the invoice as pdf</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Attach Invoice as PDF</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;
var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;/&apos;;
}
} 
   // Now make a synchronous call to the Apex Web service
   // method
   var result = sforce.apex.execute(
    &quot;&quot;+prefix+&quot;ClassWebServiceEmailing&quot;,  
    &quot;attachPdf&quot;, 
    {invoiceId : &quot;{!Invoice__c.Id}&quot;,invoiceName : &quot;{!Invoice__c.Name}&quot;});
   alert(result); //response</url>
    </webLinks>
    <webLinks>
        <fullName>Authorize</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Authorize</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;
var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;/&apos;;
}
}

var paymentStatus = &apos;{!Invoice__c.Payment_Status__c}&apos;;
var invoiceStatus = &apos;{!Invoice__c.Invoice_Status__c}&apos;;
var invoiceUnPaidAmt = &apos;{!Invoice__c.Unpaid_Amount__c}&apos;;

var zero = &apos;0&apos;;
var paidAmount =invoiceUnPaidAmt .replace(&quot;,&quot;,&quot;&quot;);

if(paymentStatus != &apos;Paid&apos;) {
if(invoiceStatus == &apos;Posted&apos;) {
// Now make a synchronous call to the Apex Web service
var result = sforce.apex.execute(
&quot;&quot;+prefix+&quot;PaymentOperations&quot;,
&quot;authorize&quot;,
{invoiceId : &quot;{!Invoice__c.Id}&quot;});

result = result[0];
alert(result.message);

if(result.reloadPage == &quot;true&quot;) {
window.location.reload();
}
}

else {
alert(&apos;Only Posted invoices can be authorized.&apos;);
}
}

else {
alert(&apos;Only Unpaid invoices can be authorized&apos;);
}</url>
    </webLinks>
    <webLinks>
        <fullName>Cancel_Invoice</fullName>
        <availability>online</availability>
        <description>Cancel Invoice</description>
        <displayType>button</displayType>
        <height>600</height>
        <linkType>page</linkType>
        <masterLabel>Cancel Invoice</masterLabel>
        <openType>sidebar</openType>
        <page>cancelInvoice</page>
        <protected>false</protected>
    </webLinks>
    <webLinks>
        <fullName>Cancel_Post</fullName>
        <availability>online</availability>
        <description>Can be clicked only when the status is post. This changes the status of the invoice and the invoice lines back to draft</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Unpost_Obsolete</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>alert(&apos;This is Obsolete&apos;);</url>
    </webLinks>
    <webLinks>
        <fullName>Charge</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Charge</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;
var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;/&apos;;
}
} 

var paymentStatus = &apos;{!Invoice__c.Payment_Status__c}&apos;;
var invoiceStatus = &apos;{!Invoice__c.Invoice_Status__c}&apos;;
var invoiceUnPaidAmt = &apos;{!Invoice__c.Unpaid_Amount__c}&apos;;
var invoiceState = &apos;{!Invoice__c.Invoice_State__c}&apos;;

var zero = &apos;0&apos;;
var paidAmount =invoiceUnPaidAmt .replace(&quot;,&quot;,&quot;&quot;); 

if(paymentStatus != &apos;Paid&apos;)  {
    ///Now make a synchronous call to the Apex Web service
    // method
    if(invoiceStatus ==  &apos;Posted&apos; &amp;&amp; invoiceState != &apos;Proforma&apos;) {
        var result = sforce.apex.execute(
        &quot;&quot;+prefix+&quot;PaymentOperations&quot;, 
        &quot;authorizeAndCharge&quot;, 
        {invoiceId : &quot;{!Invoice__c.Id}&quot;});
        
        result = result[0];
        alert(result.message); 
        
        if(result.reloadPage == &quot;true&quot;)  {
            window.location.reload();
        }
    }
    
    else  if(invoiceStatus !=  &apos;Posted&apos;) {
         alert(&apos;Only Posted invoices can be charged&apos;);
    }

        if(invoiceState == &apos;Proforma&apos; &amp;&amp; invoiceStatus == &apos;Posted&apos;) {
           alert(&apos;Proforma invoices cannot be charged&apos;); 
       }
}

else  {
    alert(&apos;Only unpaid invoices can be charged&apos;); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>Convert_to_Regular_Invoice</fullName>
        <availability>online</availability>
        <description>Create Regular Invoice</description>
        <displayType>button</displayType>
        <height>600</height>
        <linkType>page</linkType>
        <masterLabel>Convert To Regular Invoice</masterLabel>
        <openType>sidebar</openType>
        <page>createProformaInvToRegularInv</page>
        <protected>false</protected>
    </webLinks>
    <webLinks>
        <fullName>Create_Revenue_Transaction</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Create Revenue Transaction</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)} 

var result = sforce.apex.execute( 
&quot;invoiceit_s.RevenueTransactionsForInvoiceUtilClass&quot;, 
&quot;createRevenueTransactionForInvoice&quot;, 
{invoiceIds: &quot;{!Invoice__c.Id}&quot;}); 

alert(result); 
window.location.reload();</url>
    </webLinks>
    <webLinks>
        <fullName>Download_CSV</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <height>600</height>
        <linkType>page</linkType>
        <masterLabel>Download CSV</masterLabel>
        <openType>sidebar</openType>
        <page>downloadInvoiceCSV</page>
        <protected>false</protected>
    </webLinks>
    <webLinks>
        <fullName>EmailInvoice</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <height>600</height>
        <linkType>page</linkType>
        <masterLabel>Email Invoice</masterLabel>
        <openType>sidebar</openType>
        <page>EmailInvoice</page>
        <protected>false</protected>
    </webLinks>
    <webLinks>
        <fullName>Partial_Credit</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <height>600</height>
        <linkType>page</linkType>
        <masterLabel>Partial Credit</masterLabel>
        <openType>noSidebar</openType>
        <page>createCreditNote</page>
        <protected>false</protected>
    </webLinks>
    <webLinks>
        <fullName>Post</fullName>
        <availability>online</availability>
        <description>Can be clicked only when the status is draft. This changes the status of the invoice and invoice lines to posted</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Post</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;

var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;__&apos;;
}
} 

var url = parent.location.href;
var connection = sforce.connection;
var invoiceStatus = &apos;{!Invoice__c.Invoice_Status__c}&apos;;
var invoiceId = &apos;{!Invoice__c.Id}&apos;;


if(invoiceStatus != &apos;Draft&apos;) {
alert(&apos;Only invoice with status Draft can be posted&apos;);
} else {
var queryResult = sforce.connection.query(&quot;SELECT Id FROM &quot;+prefix+&quot;Invoice_Lines__c WHERE &quot;+prefix+&quot;Invoice__c = &apos;&quot; + invoiceId + &quot;&apos; &quot;);
var linerecords = queryResult.getArray(&apos;records&apos;);
for (var a=0; a&lt;linerecords.length; a++)
{
linerecords[a].invoiceit_s__Status__c = &apos;Posted&apos;;
}
sforce.connection.update(linerecords);

var updateInvoiceRecords = [];
var update_Invoice = new sforce.SObject(&quot;&quot;+prefix+&quot;Invoice__c&quot;)
update_Invoice.Id = invoiceId;
update_Invoice.invoiceit_s__Invoice_Status__c = &apos;Posted&apos;;
updateInvoiceRecords.push(update_Invoice);
sforce.connection.update(updateInvoiceRecords );

//parent.location.href = encodeURI(url);
alert(&apos;Invoice Status is updated to Posted&apos;);
window.location.reload();
}</url>
    </webLinks>
    <webLinks>
        <fullName>Refund</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Refund</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;
var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;/&apos;;
}
} 

var invoiceStatus = &apos;{!Invoice__c.Invoice_Status__c}&apos;; 

if(invoiceStatus ==  &apos;Posted&apos;) {
// Now make a synchronous call to the Apex Web service
// method
var result = sforce.apex.execute(
&quot;&quot;+prefix+&quot;PaymentOperations&quot;, 
&quot;refund&quot;, 
{invoiceId : &quot;{!Invoice__c.Id}&quot;});

result = result[0];
alert(result.message); 

if(result.reloadPage == &quot;true&quot;) {
    window.location.reload();
}
}

else {
   alert(&apos;Only Posted invoices can be refunded&apos;); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>View_Email_Quote</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <height>600</height>
        <linkType>url</linkType>
        <masterLabel>View / Email Invoice</masterLabel>
        <openType>sidebar</openType>
        <protected>false</protected>
        <url>/apex/loop__looplus?eid={!Invoice__c.Id}&amp;sessionId={!$Api.Session_ID}</url>
    </webLinks>
    <webLinks>
        <fullName>View_Invoice</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>page</linkType>
        <masterLabel>View Invoice</masterLabel>
        <openType>newWindow</openType>
        <page>viewInvoice</page>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
    </webLinks>
    <webLinks>
        <fullName>VirtualTerminal</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Virtual Terminal</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&apos;/resource/invoiceit_s__jQueryForPopup/jQuery/jquery-1.8.2.min.js&apos;)} 
{!REQUIRESCRIPT(&apos;/resource/invoiceit_s__jQueryForPopup/jQuery/ui/jquery-ui-1.9.1.custom.min.js&apos;)} 

{!REQUIRESCRIPT(&quot;/soap/ajax/23.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/23.0/apex.js&quot; )} 

var results = sforce.connection.query(&quot;SELECT Name FROM invoiceit_s__Payment_Method__c &quot; + 
&quot;WHERE invoiceit_s__Is_Dummy__c = true and invoiceit_s__Account__c = &apos;{!Invoice__c.AccountId__c}&apos;&quot;); 
var defaultMethodExit = results.getArray(&quot;records&quot;); 
if(defaultMethodExit.length == 0){ 
var dummyPaymentMethod = new sforce.SObject(&quot;invoiceit_s__Payment_Method__c&quot;); 
dummyPaymentMethod.invoiceit_s__Payment_Method__c = &quot;Credit Card&quot; 
dummyPaymentMethod.invoiceit_s__Is_Dummy__c = true; 
dummyPaymentMethod.invoiceit_s__Account__c = &apos;{!Invoice__c.AccountId__c}&apos;; 
dummyPaymentMethod.invoiceit_s__Active__c = false; 
// create dummy payment method. 
sforce.connection.create([dummyPaymentMethod]); 

} 

requireCssFile(&apos;/resource/invoiceit_s__jQueryForPopup/jQuery/ui/css/ui-lightness/jquery-ui-1.9.1.custom.min.css&apos;); 
function requireCssFile(filename) 
{ 
var fileref = document.createElement(&apos;link&apos;);
fileref.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;);
fileref.setAttribute(&apos;type&apos;, &apos;text/css&apos;);
fileref.setAttribute(&apos;href&apos;, filename);
document.getElementsByTagName(&apos;head&apos;)[0].appendChild(fileref);
} 
jQuery(function() {
var iframe_url = &apos;{!URLFOR(&quot;/apex/invoiceit_s__processVirtualTerminalForInvoice?id=&quot;+Invoice__c.Id)}&apos;;
var child_domain = iframe_url.substring(0, iframe_url.indexOf(&apos;/&apos;, 9));
var parent_domain = window.location.protocol + &apos;//&apos; + window.location.host;
var modalDialog = jQuery(&apos;&lt;div id=&quot;opppopup&quot;&gt;&lt;/div&gt;&apos;).html(&apos;&lt;iframe id=&quot;iframeContentId&quot; src=&quot;&apos; + iframe_url + &apos;&quot; frameborder=&quot;0&quot; height=&quot;100%&quot; width=&quot;100%&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; scrolling=&quot;yes&quot; /&gt;&apos;).dialog({ 
autoOpen: false, 
title: &apos;Virtual Terminal&apos;, 
resizable: true, 
width: 800, 
height: 540, 
autoResize: true, 
modal: true, 
draggable: true 
});

modalDialog.dialog(&apos;open&apos;);
});</url>
    </webLinks>
    <webLinks>
        <fullName>Void</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Void</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/14.0/apex.js&quot;)}

var prefix = &apos;&apos;;
var result = sforce.connection.query(&apos;SELECT NamespacePrefix FROM ApexClass WHERE Name = \&apos;CommonUtilClass\&apos;&apos;);
var records = result.getArray(&quot;records&quot;);

for (var i=0; i&lt; records.length; i++) {
var record = records[i];
if(record.NamespacePrefix == &apos;invoiceit_s&apos;){
prefix = record.NamespacePrefix+&apos;/&apos;;
}
} 

var invoiceStatus = &apos;{!Invoice__c.Invoice_Status__c}&apos;; 

// Now make a synchronous call to the Apex Web service
// method
if(invoiceStatus == &apos;Posted&apos;) { 
var result = sforce.apex.execute(
&quot;&quot;+prefix+&quot;PaymentOperations&quot;, 
&quot;void&quot;, 
{invoiceId : &quot;{!Invoice__c.Id}&quot;});

result = result[0];
alert(result.message); 

if(result.reloadPage == &quot;true&quot;) {
    window.location.reload();
}
}

else {
   alert(&apos;Only Posted invoices can be voided.&apos;); 
}</url>
    </webLinks>
</CustomObject>
